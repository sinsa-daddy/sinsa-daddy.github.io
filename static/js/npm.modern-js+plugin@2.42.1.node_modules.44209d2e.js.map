{"version":3,"file":"static/js/npm.modern-js+plugin@2.42.1.node_modules.44209d2e.js","mappings":"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","sources":["webpack://@sinsa/web/../../node_modules/.pnpm/@modern-js+plugin@2.42.1/node_modules/@modern-js/plugin/dist/esm/index.js"],"sourcesContent":["// src/farrow-pipeline/index.ts\nimport { _ as _define_property } from \"@swc/helpers/_/_define_property\";\nimport { _ as _object_spread } from \"@swc/helpers/_/_object_spread\";\nimport { _ as _to_consumable_array } from \"@swc/helpers/_/_to_consumable_array\";\n\n// src/farrow-pipeline/context.ts\nvar createContext = function(value) {\n  var currentValue = value;\n  return {\n    use: function() {\n      return {\n        get value() {\n          return currentValue;\n        },\n        set value(v) {\n          currentValue = v;\n        }\n      };\n    },\n    get: function() {\n      return currentValue;\n    },\n    set: function(v1) {\n      currentValue = v1;\n    }\n  };\n};\n\n// src/farrow-pipeline/counter.ts\nvar createCounter = function(callback) {\n  var dispatch = function(index, input) {\n    var next = function() {\n      var nextInput = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : input;\n      return dispatch(index + 1, nextInput);\n    };\n    return callback(index, input, next);\n  };\n  return {\n    start: function(input) {\n      return dispatch(0, input);\n    },\n    dispatch\n  };\n};\n\n// src/farrow-pipeline/index.ts\nvar isPipeline = function(input) {\n  return Boolean(input === null || input === void 0 ? void 0 : input[PipelineSymbol]);\n};\nvar PipelineSymbol = Symbol.for(\"MODERN_PIPELINE\");\nvar getMiddleware = function(input) {\n  if (typeof input === \"function\") {\n    return input;\n  } else if (input && typeof input.middleware === \"function\") {\n    return input.middleware;\n  }\n  throw new Error(\"\".concat(input, \" is not a Middleware\"));\n};\nvar createPipeline = function() {\n  var middlewares = [];\n  var use = function() {\n    for (var _len = arguments.length, inputs = new Array(_len), _key = 0; _key < _len; _key++) {\n      inputs[_key] = arguments[_key];\n    }\n    var _middlewares;\n    (_middlewares = middlewares).push.apply(_middlewares, _to_consumable_array(inputs.map(getMiddleware)));\n    return pipeline;\n  };\n  var createCurrentCounter = function(onLast) {\n    return createCounter(function(index, input, next) {\n      if (index >= middlewares.length) {\n        if (onLast) {\n          return onLast(input);\n        }\n        throw new Error(\"Expect returning a value, but all middlewares just calling next()\");\n      }\n      return middlewares[index](input, next);\n    });\n  };\n  var currentCounter = createCurrentCounter();\n  var getCounter = function(options) {\n    if (!options) {\n      return currentCounter;\n    }\n    return createCurrentCounter(options === null || options === void 0 ? void 0 : options.onLast);\n  };\n  var run = function(input, options) {\n    return getCounter(options).start(input);\n  };\n  var middleware = function(input, next) {\n    return run(input, {\n      onLast: next\n    });\n  };\n  var _obj;\n  var pipeline = (_obj = {}, _define_property(_obj, PipelineSymbol, true), _define_property(_obj, \"use\", use), _define_property(_obj, \"run\", run), _define_property(_obj, \"middleware\", middleware), _obj);\n  return pipeline;\n};\nvar createAsyncPipeline = function() {\n  var pipeline = createPipeline();\n  return _object_spread({}, pipeline);\n};\n\n// src/waterfall/sync.ts\nimport { _ as _define_property2 } from \"@swc/helpers/_/_define_property\";\nimport { _ as _object_spread2 } from \"@swc/helpers/_/_object_spread\";\nimport { _ as _object_spread_props } from \"@swc/helpers/_/_object_spread_props\";\nimport { _ as _to_consumable_array2 } from \"@swc/helpers/_/_to_consumable_array\";\nvar WATERFALL_SYMBOL = Symbol.for(\"MODERN_WATERFALL\");\nvar getBrook = function(input) {\n  if (typeof input === \"function\") {\n    return input;\n  } else if (input && typeof input.middleware === \"function\") {\n    return input.middleware;\n  }\n  throw new Error(\"\".concat(input, \" is not a Brook or { brook: Brook }\"));\n};\nvar createWaterfall = function() {\n  var pipeline = createPipeline();\n  var use = function() {\n    for (var _len = arguments.length, brooks = new Array(_len), _key = 0; _key < _len; _key++) {\n      brooks[_key] = arguments[_key];\n    }\n    var _pipeline;\n    (_pipeline = pipeline).use.apply(_pipeline, _to_consumable_array2(brooks.map(getBrook).map(mapBrookToMiddleware)));\n    return waterfall;\n  };\n  var run = function(input, options) {\n    return pipeline.run(input, _object_spread_props(_object_spread2({}, options), {\n      onLast: function(input2) {\n        return input2;\n      }\n    }));\n  };\n  var middleware = function(input) {\n    return pipeline.run(input, {\n      onLast: function(input2) {\n        return input2;\n      }\n    });\n  };\n  var waterfall = _object_spread_props(_object_spread2({}, pipeline), _define_property2({\n    use,\n    run,\n    middleware\n  }, WATERFALL_SYMBOL, true));\n  return waterfall;\n};\nvar isWaterfall = function(input) {\n  return Boolean(input === null || input === void 0 ? void 0 : input[WATERFALL_SYMBOL]);\n};\nvar mapBrookToMiddleware = function(brook) {\n  return function(input, next) {\n    return next(brook(input));\n  };\n};\n\n// src/waterfall/async.ts\nimport { _ as _define_property3 } from \"@swc/helpers/_/_define_property\";\nimport { _ as _object_spread3 } from \"@swc/helpers/_/_object_spread\";\nimport { _ as _object_spread_props2 } from \"@swc/helpers/_/_object_spread_props\";\nimport { _ as _to_consumable_array3 } from \"@swc/helpers/_/_to_consumable_array\";\nvar ASYNC_WATERFALL_SYMBOL = Symbol.for(\"MODERN_ASYNC_WATERFALL\");\nvar getAsyncBrook = function(input) {\n  if (typeof input === \"function\") {\n    return input;\n  }\n  if (input && typeof input.middleware === \"function\") {\n    return input.middleware;\n  }\n  throw new Error(\"\".concat(input, \" is not a AsyncBrook or { brook: AsyncBrook }\"));\n};\nvar createAsyncWaterfall = function() {\n  var pipeline = createAsyncPipeline();\n  var use = function() {\n    for (var _len = arguments.length, input = new Array(_len), _key = 0; _key < _len; _key++) {\n      input[_key] = arguments[_key];\n    }\n    var _pipeline;\n    (_pipeline = pipeline).use.apply(_pipeline, _to_consumable_array3(input.map(getAsyncBrook).map(mapAsyncBrookToAsyncMiddleware)));\n    return waterfall;\n  };\n  var run = function(input, options) {\n    return pipeline.run(input, _object_spread_props2(_object_spread3({}, options), {\n      onLast: function(input2) {\n        return input2;\n      }\n    }));\n  };\n  var middleware = function(input) {\n    return pipeline.run(input, {\n      onLast: function(input2) {\n        return input2;\n      }\n    });\n  };\n  var waterfall = _object_spread_props2(_object_spread3({}, pipeline), _define_property3({\n    use,\n    run,\n    middleware\n  }, ASYNC_WATERFALL_SYMBOL, true));\n  return waterfall;\n};\nvar isAsyncWaterfall = function(input) {\n  return Boolean(input === null || input === void 0 ? void 0 : input[ASYNC_WATERFALL_SYMBOL]);\n};\nvar mapAsyncBrookToAsyncMiddleware = function(brook) {\n  return function(input, next) {\n    return Promise.resolve(brook(input)).then(function(result) {\n      return next(result);\n    });\n  };\n};\n\n// src/workflow/sync.ts\nimport { _ as _define_property4 } from \"@swc/helpers/_/_define_property\";\nimport { _ as _object_spread4 } from \"@swc/helpers/_/_object_spread\";\nimport { _ as _object_spread_props3 } from \"@swc/helpers/_/_object_spread_props\";\nimport { _ as _to_consumable_array4 } from \"@swc/helpers/_/_to_consumable_array\";\nvar WORKFLOW_SYMBOL = Symbol.for(\"MODERN_WORKFLOW\");\nvar createWorkflow = function() {\n  var pipeline = createPipeline();\n  var use = function() {\n    for (var _len = arguments.length, input = new Array(_len), _key = 0; _key < _len; _key++) {\n      input[_key] = arguments[_key];\n    }\n    var _pipeline;\n    (_pipeline = pipeline).use.apply(_pipeline, _to_consumable_array4(input.map(mapWorkerToMiddleware)));\n    return workflow;\n  };\n  var run = function(input) {\n    var result = pipeline.run(input, {\n      onLast: function() {\n        return [];\n      }\n    });\n    return result.filter(Boolean);\n  };\n  var workflow = _object_spread_props3(_object_spread4({}, pipeline), _define_property4({\n    use,\n    run\n  }, WORKFLOW_SYMBOL, true));\n  return workflow;\n};\nvar isWorkflow = function(input) {\n  return Boolean(input === null || input === void 0 ? void 0 : input[WORKFLOW_SYMBOL]);\n};\nvar mapWorkerToMiddleware = function(worker) {\n  return function(input, next) {\n    return [\n      worker(input)\n    ].concat(_to_consumable_array4(next(input)));\n  };\n};\n\n// src/workflow/parallel.ts\nimport { _ as _define_property5 } from \"@swc/helpers/_/_define_property\";\nimport { _ as _object_spread5 } from \"@swc/helpers/_/_object_spread\";\nimport { _ as _object_spread_props4 } from \"@swc/helpers/_/_object_spread_props\";\nimport { _ as _to_consumable_array5 } from \"@swc/helpers/_/_to_consumable_array\";\nvar PARALLEL_WORKFLOW_SYMBOL = Symbol.for(\"MODERN_PARALLEL_WORKFLOW\");\nvar isParallelWorkflow = function(input) {\n  return Boolean(input === null || input === void 0 ? void 0 : input[PARALLEL_WORKFLOW_SYMBOL]);\n};\nvar createParallelWorkflow = function() {\n  var pipeline = createPipeline();\n  var use = function() {\n    for (var _len = arguments.length, input = new Array(_len), _key = 0; _key < _len; _key++) {\n      input[_key] = arguments[_key];\n    }\n    var _pipeline;\n    (_pipeline = pipeline).use.apply(_pipeline, _to_consumable_array5(input.map(mapParallelWorkerToAsyncMiddleware)));\n    return workflow;\n  };\n  var run = function(input) {\n    return Promise.all(pipeline.run(input, {\n      onLast: function() {\n        return [];\n      }\n    })).then(function(result) {\n      return result.filter(Boolean);\n    });\n  };\n  var workflow = _object_spread_props4(_object_spread5({}, pipeline), _define_property5({\n    run,\n    use\n  }, PARALLEL_WORKFLOW_SYMBOL, true));\n  return workflow;\n};\nvar mapParallelWorkerToAsyncMiddleware = function(worker) {\n  return function(input, next) {\n    return [\n      worker(input)\n    ].concat(_to_consumable_array5(next(input)));\n  };\n};\n\n// src/workflow/async.ts\nimport { _ as _define_property6 } from \"@swc/helpers/_/_define_property\";\nimport { _ as _object_spread6 } from \"@swc/helpers/_/_object_spread\";\nimport { _ as _object_spread_props5 } from \"@swc/helpers/_/_object_spread_props\";\nimport { _ as _to_consumable_array6 } from \"@swc/helpers/_/_to_consumable_array\";\nvar ASYNC_WORKFLOW_SYMBOL = Symbol.for(\"MODERN_ASYNC_WORKFLOW\");\nvar isPromise = function(obj) {\n  return obj && typeof obj.then === \"function\";\n};\nvar isAsyncWorkflow = function(input) {\n  return Boolean(input === null || input === void 0 ? void 0 : input[ASYNC_WORKFLOW_SYMBOL]);\n};\nvar createAsyncWorkflow = function() {\n  var pipeline = createAsyncPipeline();\n  var use = function() {\n    for (var _len = arguments.length, input = new Array(_len), _key = 0; _key < _len; _key++) {\n      input[_key] = arguments[_key];\n    }\n    var _pipeline;\n    (_pipeline = pipeline).use.apply(_pipeline, _to_consumable_array6(input.map(mapAsyncWorkerToAsyncMiddleware)));\n    return workflow;\n  };\n  var run = function(input) {\n    var result = pipeline.run(input, {\n      onLast: function() {\n        return [];\n      }\n    });\n    if (isPromise(result)) {\n      return result.then(function(result2) {\n        return result2.filter(Boolean);\n      });\n    }\n    return result.filter(Boolean);\n  };\n  var workflow = _object_spread_props5(_object_spread6({}, pipeline), _define_property6({\n    use,\n    run\n  }, ASYNC_WORKFLOW_SYMBOL, true));\n  return workflow;\n};\nvar mapAsyncWorkerToAsyncMiddleware = function(worker) {\n  return function(input, next) {\n    return Promise.resolve(worker(input)).then(function(result) {\n      return Promise.resolve(next(input)).then(function(nextResult) {\n        return [\n          result\n        ].concat(_to_consumable_array6(nextResult));\n      });\n    });\n  };\n};\n\n// src/manager/sync.ts\nimport { _ as _object_spread7 } from \"@swc/helpers/_/_object_spread\";\nimport { _ as _object_spread_props6 } from \"@swc/helpers/_/_object_spread_props\";\n\n// src/manager/shared.ts\nimport { pluginDagSort } from \"@modern-js/utils/universal/plugin-dag-sort\";\nvar checkPlugins = function(plugins) {\n  if (process.env.NODE_ENV !== \"production\") {\n    plugins.forEach(function(origin) {\n      origin.rivals.forEach(function(rival) {\n        plugins.forEach(function(plugin) {\n          if (rival === plugin.name) {\n            throw new Error(\"\".concat(origin.name, \" has rival \").concat(plugin.name));\n          }\n        });\n      });\n      origin.required.forEach(function(required) {\n        if (!plugins.some(function(plugin) {\n          return plugin.name === required;\n        })) {\n          throw new Error(\"The plugin: \".concat(required, \" is required when plugin: \").concat(origin.name, \" is exist.\"));\n        }\n      });\n    });\n  }\n};\nfunction sortPlugins(input) {\n  return pluginDagSort(input.slice());\n}\nvar includePlugin = function(plugins, input) {\n  return plugins.some(function(plugin) {\n    return plugin.name === input.name;\n  });\n};\nvar isObject = function(obj) {\n  return obj !== null && typeof obj === \"object\";\n};\nvar hasOwnProperty = function(obj, prop) {\n  return obj.hasOwnProperty(prop);\n};\n\n// src/manager/sync.ts\nvar SYNC_PLUGIN_SYMBOL = \"SYNC_PLUGIN_SYMBOL\";\nvar DEFAULT_OPTIONS = {\n  name: \"untitled\",\n  pre: [],\n  post: [],\n  rivals: [],\n  required: [],\n  usePlugins: [],\n  registerHook: {}\n};\nvar createManager = function(hooks, api) {\n  var index = 0;\n  var runners;\n  var currentHooks = _object_spread7({}, hooks);\n  var useRunner = function() {\n    return runners;\n  };\n  var registerHook = function(extraHooks) {\n    currentHooks = _object_spread7({}, extraHooks, currentHooks);\n  };\n  var isPlugin = function(input) {\n    return isObject(input) && hasOwnProperty(input, SYNC_PLUGIN_SYMBOL) && input[SYNC_PLUGIN_SYMBOL] === SYNC_PLUGIN_SYMBOL;\n  };\n  var pluginAPI = _object_spread_props6(_object_spread7({}, api), {\n    useHookRunners: useRunner\n  });\n  var clone = function(overrideAPI) {\n    var plugins = [];\n    var addPlugin = function(plugin) {\n      if (!includePlugin(plugins, plugin)) {\n        plugins.push(_object_spread7({}, plugin));\n      }\n    };\n    var usePlugin = function() {\n      for (var _len = arguments.length, input = new Array(_len), _key = 0; _key < _len; _key++) {\n        input[_key] = arguments[_key];\n      }\n      input.forEach(function(plugin) {\n        if (isPlugin(plugin)) {\n          addPlugin(plugin);\n        } else if (typeof plugin === \"function\") {\n          var options = plugin();\n          addPlugin(createPlugin(options.setup, options));\n        } else if (isObject(plugin)) {\n          addPlugin(createPlugin(plugin.setup, plugin));\n        } else if (process.env.NODE_ENV !== \"production\") {\n          console.warn(\"Unknown plugin: \".concat(JSON.stringify(plugin)));\n        }\n      });\n      return manager;\n    };\n    var createPlugin = function() {\n      var setup = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : function() {\n      }, options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};\n      var _options_usePlugins;\n      if ((_options_usePlugins = options.usePlugins) === null || _options_usePlugins === void 0 ? void 0 : _options_usePlugins.length) {\n        options.usePlugins.forEach(function(plugin) {\n          usePlugin(createPlugin(plugin.setup, plugin));\n        });\n      }\n      if (options.registerHook) {\n        registerHook(options.registerHook);\n      }\n      return _object_spread_props6(_object_spread7(_object_spread_props6(_object_spread7({}, DEFAULT_OPTIONS), {\n        name: \"No.\".concat(index++, \" plugin\")\n      }), options), {\n        SYNC_PLUGIN_SYMBOL,\n        setup\n      });\n    };\n    var clear = function() {\n      plugins = [];\n    };\n    var init = function() {\n      var sortedPlugins = sortPlugins(plugins);\n      var mergedPluginAPI = _object_spread7({}, pluginAPI, overrideAPI);\n      checkPlugins(sortedPlugins);\n      var hooksList = sortedPlugins.map(function(plugin) {\n        return plugin.setup(mergedPluginAPI);\n      });\n      runners = generateRunner(hooksList, currentHooks);\n      return runners;\n    };\n    var run = function(cb) {\n      return cb();\n    };\n    var manager = {\n      createPlugin,\n      isPlugin,\n      usePlugin,\n      init,\n      clear,\n      run,\n      registerHook,\n      useRunner,\n      clone\n    };\n    return manager;\n  };\n  return clone();\n};\nvar generateRunner = function(hooksList, hooksMap) {\n  var runner = {};\n  var cloneShape = cloneHooksMap(hooksMap);\n  if (hooksMap) {\n    var _loop = function(key2) {\n      hooksList.forEach(function(hooks) {\n        if (hooks === null || hooks === void 0 ? void 0 : hooks[key2]) {\n          cloneShape[key2].use(hooks[key2]);\n        }\n      });\n      runner[key2] = function(input, options) {\n        return cloneShape[key2].run(input, _object_spread7({}, options));\n      };\n    };\n    for (var key in cloneShape)\n      _loop(key);\n  }\n  return runner;\n};\nvar cloneHook = function(hook) {\n  if (isWaterfall(hook)) {\n    return createWaterfall();\n  }\n  if (isAsyncWaterfall(hook)) {\n    return createAsyncWaterfall();\n  }\n  if (isWorkflow(hook)) {\n    return createWorkflow();\n  }\n  if (isAsyncWorkflow(hook)) {\n    return createAsyncWorkflow();\n  }\n  if (isParallelWorkflow(hook)) {\n    return createParallelWorkflow();\n  }\n  if (isPipeline(hook)) {\n    return createPipeline();\n  }\n  throw new Error(\"Unknown hook: \".concat(hook));\n};\nvar cloneHooksMap = function(record) {\n  if (!record) {\n    return record;\n  }\n  var result = {};\n  for (var key in record) {\n    result[key] = cloneHook(record[key]);\n  }\n  return result;\n};\n\n// src/manager/async.ts\nimport { _ as _async_to_generator } from \"@swc/helpers/_/_async_to_generator\";\nimport { _ as _object_spread8 } from \"@swc/helpers/_/_object_spread\";\nimport { _ as _object_spread_props7 } from \"@swc/helpers/_/_object_spread_props\";\nimport { _ as _ts_generator } from \"@swc/helpers/_/_ts_generator\";\nvar ASYNC_PLUGIN_SYMBOL = \"ASYNC_PLUGIN_SYMBOL\";\nvar createAsyncManager = function(hooks, api) {\n  var index = 0;\n  var runners;\n  var currentHooks = _object_spread8({}, hooks);\n  var useRunner = function() {\n    return runners;\n  };\n  var registerHook = function(extraHooks) {\n    currentHooks = _object_spread8({}, extraHooks, currentHooks);\n  };\n  var isPlugin = function(input) {\n    return isObject(input) && hasOwnProperty(input, ASYNC_PLUGIN_SYMBOL) && input[ASYNC_PLUGIN_SYMBOL] === ASYNC_PLUGIN_SYMBOL;\n  };\n  var pluginAPI = _object_spread_props7(_object_spread8({}, api), {\n    useHookRunners: useRunner\n  });\n  var clone = function(overrideAPI) {\n    var plugins = [];\n    var addPlugin = function(plugin) {\n      if (!includePlugin(plugins, plugin)) {\n        plugins.push(_object_spread8({}, plugin));\n      }\n    };\n    var usePlugin = function() {\n      for (var _len = arguments.length, input = new Array(_len), _key = 0; _key < _len; _key++) {\n        input[_key] = arguments[_key];\n      }\n      input.forEach(function(plugin) {\n        if (isPlugin(plugin)) {\n          addPlugin(plugin);\n        } else if (typeof plugin === \"function\") {\n          var options = plugin();\n          addPlugin(createPlugin(options.setup, options));\n        } else if (isObject(plugin)) {\n          addPlugin(createPlugin(plugin.setup, plugin));\n        } else if (process.env.NODE_ENV !== \"production\") {\n          console.warn(\"Unknown plugin: \".concat(JSON.stringify(plugin)));\n        }\n      });\n      return manager;\n    };\n    var createPlugin = function() {\n      var setup = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : function() {\n      }, options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};\n      var _options_usePlugins;\n      if ((_options_usePlugins = options.usePlugins) === null || _options_usePlugins === void 0 ? void 0 : _options_usePlugins.length) {\n        options.usePlugins.forEach(function(plugin) {\n          usePlugin(createPlugin(plugin.setup, plugin));\n        });\n      }\n      if (options.registerHook) {\n        registerHook(options.registerHook);\n      }\n      return _object_spread_props7(_object_spread8(_object_spread_props7(_object_spread8({}, DEFAULT_OPTIONS), {\n        name: \"No.\".concat(index++, \" plugin\")\n      }), options), {\n        ASYNC_PLUGIN_SYMBOL,\n        setup\n      });\n    };\n    var clear = function() {\n      plugins = [];\n    };\n    var init = function() {\n      var _ref = _async_to_generator(function() {\n        var sortedPlugins, mergedPluginAPI, hooksList, _iteratorNormalCompletion, _didIteratorError, _iteratorError, _iterator, _step, plugin, _, err;\n        return _ts_generator(this, function(_state) {\n          switch (_state.label) {\n            case 0:\n              sortedPlugins = sortPlugins(plugins);\n              mergedPluginAPI = _object_spread8({}, pluginAPI, overrideAPI);\n              checkPlugins(sortedPlugins);\n              hooksList = [];\n              _iteratorNormalCompletion = true, _didIteratorError = false, _iteratorError = void 0;\n              _state.label = 1;\n            case 1:\n              _state.trys.push([\n                1,\n                6,\n                7,\n                8\n              ]);\n              _iterator = sortedPlugins[Symbol.iterator]();\n              _state.label = 2;\n            case 2:\n              if (!!(_iteratorNormalCompletion = (_step = _iterator.next()).done))\n                return [\n                  3,\n                  5\n                ];\n              plugin = _step.value;\n              _ = hooksList.push;\n              return [\n                4,\n                plugin.setup(mergedPluginAPI)\n              ];\n            case 3:\n              _.apply(hooksList, [\n                _state.sent()\n              ]);\n              _state.label = 4;\n            case 4:\n              _iteratorNormalCompletion = true;\n              return [\n                3,\n                2\n              ];\n            case 5:\n              return [\n                3,\n                8\n              ];\n            case 6:\n              err = _state.sent();\n              _didIteratorError = true;\n              _iteratorError = err;\n              return [\n                3,\n                8\n              ];\n            case 7:\n              try {\n                if (!_iteratorNormalCompletion && _iterator.return != null) {\n                  _iterator.return();\n                }\n              } finally {\n                if (_didIteratorError) {\n                  throw _iteratorError;\n                }\n              }\n              return [\n                7\n              ];\n            case 8:\n              runners = generateRunner(hooksList, currentHooks);\n              return [\n                2,\n                runners\n              ];\n          }\n        });\n      });\n      return function init2() {\n        return _ref.apply(this, arguments);\n      };\n    }();\n    var run = function(cb) {\n      return cb();\n    };\n    var manager = {\n      createPlugin,\n      isPlugin,\n      usePlugin,\n      init,\n      run,\n      clear,\n      clone,\n      registerHook,\n      useRunner\n    };\n    return manager;\n  };\n  return clone();\n};\nexport {\n  DEFAULT_OPTIONS,\n  cloneHook,\n  cloneHooksMap,\n  createAsyncManager,\n  createAsyncPipeline,\n  createAsyncWaterfall,\n  createAsyncWorkflow,\n  createContext,\n  createManager,\n  createParallelWorkflow,\n  createPipeline,\n  createWaterfall,\n  createWorkflow,\n  generateRunner,\n  getAsyncBrook,\n  getBrook,\n  isAsyncWaterfall,\n  isAsyncWorkflow,\n  isParallelWorkflow,\n  isPipeline,\n  isWaterfall,\n  isWorkflow\n};\n"],"names":["PipelineSymbol","Symbol","for","getMiddleware","input","middleware","Error","concat","createPipeline","_obj","middlewares","createCurrentCounter","onLast","callback","index","next","length","dispatch","arguments","start","currentCounter","run","options","getCounter","pipeline","_","_len","inputs","Array","_key","_middlewares","push","apply","map","createAsyncPipeline","WATERFALL_SYMBOL","getBrook","createWaterfall","waterfall","use","brooks","_pipeline","mapBrookToMiddleware","input2","brook","ASYNC_WATERFALL_SYMBOL","getAsyncBrook","mapAsyncBrookToAsyncMiddleware","Promise","resolve","then","result","WORKFLOW_SYMBOL","mapWorkerToMiddleware","worker","PARALLEL_WORKFLOW_SYMBOL","mapParallelWorkerToAsyncMiddleware","ASYNC_WORKFLOW_SYMBOL","mapAsyncWorkerToAsyncMiddleware","nextResult","checkPlugins","plugins","sortPlugins","slice","includePlugin","some","plugin","name","isObject","obj","hasOwnProperty","prop","SYNC_PLUGIN_SYMBOL","DEFAULT_OPTIONS","pre","post","rivals","required","usePlugins","registerHook","createManager","hooks","api","runners","currentHooks","useRunner","extraHooks","isPlugin","pluginAPI","useHookRunners","clone","overrideAPI","addPlugin","usePlugin","forEach","createPlugin","setup","manager","_options_usePlugins","init","sortedPlugins","mergedPluginAPI","hooksList","generateRunner","clear","cb","hooksMap","runner","cloneShape","cloneHooksMap","_loop","key2","key","cloneHook","hook","Boolean","isAsyncWaterfall","isWorkflow","workflow","filter","createWorkflow","isAsyncWorkflow","result2","createAsyncWorkflow","isParallelWorkflow","all","createParallelWorkflow","isPipeline","record"],"sourceRoot":""}
{"version":3,"file":"static/js/async/4861.22c05ef8.js","mappings":"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","sources":["webpack://@sinsa/web/./src/components/AurorianCard/styles.module.less","webpack://@sinsa/web/./src/components/AurorianCard/index.tsx","webpack://@sinsa/web/./src/components/AuroriansTeam/styles.module.less","webpack://@sinsa/web/./src/components/AuroriansTeam/index.tsx","webpack://@sinsa/web/./src/components/CopilotsTable/columns.tsx","webpack://@sinsa/web/./src/components/CopilotsTable/index.tsx","webpack://@sinsa/web/./src/containers/TermChanger.tsx","webpack://@sinsa/web/./src/containers/TermNotFound.tsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"AurorianCard\":\"AurorianCard-Xue7wW\",\"aurorianCard\":\"AurorianCard-Xue7wW\",\"SameSize\":\"SameSize-ttH5Jw\",\"sameSize\":\"SameSize-ttH5Jw\",\"Skin\":\"Skin-ZCSfLL\",\"skin\":\"Skin-ZCSfLL\",\"BlackContainer\":\"BlackContainer-KqzHeu\",\"blackContainer\":\"BlackContainer-KqzHeu\",\"MetaContainer\":\"MetaContainer-VBs_Be\",\"metaContainer\":\"MetaContainer-VBs_Be\",\"SameSizeMeta\":\"SameSizeMeta-jxMufu\",\"sameSizeMeta\":\"SameSizeMeta-jxMufu\",\"MetaAttributeContainer\":\"MetaAttributeContainer-oaQn6c\",\"metaAttributeContainer\":\"MetaAttributeContainer-oaQn6c\",\"MetaClass\":\"MetaClass-oogC_v\",\"metaClass\":\"MetaClass-oogC_v\",\"MetaFirstAttribute\":\"MetaFirstAttribute-bRrn32\",\"metaFirstAttribute\":\"MetaFirstAttribute-bRrn32\",\"MetaSecondAttribute\":\"MetaSecondAttribute-C0kSzr\",\"metaSecondAttribute\":\"MetaSecondAttribute-C0kSzr\",\"NameContainer\":\"NameContainer-zUDWby\",\"nameContainer\":\"NameContainer-zUDWby\",\"BreakThrough\":\"BreakThrough-eMpTUR\",\"breakThrough\":\"BreakThrough-eMpTUR\"};","import React, { useEffect, useMemo, useRef } from 'react';\nimport { useModel } from '@modern-js/runtime/model';\nimport { type AurorianType } from '@sinsa/schema';\nimport { Badge, ConfigProvider, Rate } from 'antd';\nimport { clsx } from 'clsx';\nimport styles from './styles.module.less';\nimport { ClassURLMapper, ElementURLMapper, RarityMapper } from './constants';\nimport { AuroriansModel } from '@/models/aurorians';\n\ninterface AurorianCardProps {\n  name: string;\n  breakthrough?: number;\n  isReplaceable?: boolean;\n  sameSize?: boolean;\n}\n\nexport const AurorianCard = React.memo<AurorianCardProps>(\n  ({ name, breakthrough, isReplaceable, sameSize }) => {\n    const [{ auroriansMap }] = useModel(AuroriansModel);\n    const aurorian = useMemo(\n      () => auroriansMap[name] as AurorianType | undefined,\n      [auroriansMap, name],\n    );\n\n    const cardRef = useRef<HTMLDivElement>(null);\n\n    useEffect(() => {\n      if (aurorian?.aurorian_name) {\n        import(`@/assets/skins/${aurorian.aurorian_name}.webp`)\n          .then(esm => {\n            if (typeof esm?.default === 'string') {\n              if (cardRef.current) {\n                cardRef.current.style.backgroundImage = `url(${esm.default})`;\n              }\n            }\n          })\n          .catch(() => {\n            // ignore\n          });\n      }\n    }, [aurorian?.aurorian_name]);\n\n    return (\n      <Badge.Ribbon\n        style={{\n          fontSize: '12px',\n          display: isReplaceable ? 'block' : 'none',\n          zIndex: 10000,\n        }}\n        text={isReplaceable ? '可替' : undefined}\n      >\n        <div\n          className={clsx(styles.AurorianCard, sameSize && styles.SameSize)}\n          ref={cardRef}\n        >\n          {aurorian?.class && aurorian?.attribute ? (\n            <div\n              className={clsx(\n                styles.MetaContainer,\n                sameSize && styles.SameSizeMeta,\n              )}\n            >\n              <img\n                className={styles.MetaClass}\n                alt={aurorian.class}\n                src={ClassURLMapper[aurorian.class]}\n              />\n              <div className={styles.MetaAttributeContainer}>\n                <img\n                  className={styles.MetaFirstAttribute}\n                  alt={aurorian.attribute}\n                  src={ElementURLMapper[aurorian.attribute]}\n                />\n                {aurorian.secondary_attribute ? (\n                  <img\n                    className={styles.MetaSecondAttribute}\n                    alt={aurorian.secondary_attribute}\n                    src={ElementURLMapper[aurorian.secondary_attribute]}\n                  />\n                ) : null}\n              </div>\n            </div>\n          ) : null}\n          <div className={styles.NameContainer}>\n            <div title={aurorian?.aurorian_name}>\n              {aurorian?.aurorian_cn_name}\n            </div>\n\n            {typeof breakthrough === 'number' && aurorian?.rarity ? (\n              <ConfigProvider\n                theme={{\n                  components: {\n                    Rate: {\n                      starBg: 'white',\n                      starSize: 8,\n                    },\n                  },\n                }}\n              >\n                <Rate\n                  className={styles.BreakThrough}\n                  disabled\n                  value={breakthrough}\n                  count={RarityMapper[aurorian.rarity]}\n                />\n              </ConfigProvider>\n            ) : null}\n          </div>\n        </div>\n      </Badge.Ribbon>\n    );\n  },\n);\n","// extracted by mini-css-extract-plugin\nexport default {\"AuroriansTeam\":\"AuroriansTeam-bW_gmF\",\"auroriansTeam\":\"AuroriansTeam-bW_gmF\"};","import type { CopilotType } from '@sinsa/schema';\nimport React from 'react';\nimport { AurorianCard } from '../AurorianCard';\nimport styles from './styles.module.less';\n\ninterface AuroriansTeamProps {\n  aurorianSummaries: CopilotType['aurorian_summaries'];\n}\n\nexport const AuroriansTeam: React.FC<AuroriansTeamProps> = ({\n  aurorianSummaries,\n}) => {\n  return (\n    <div className={styles.AuroriansTeam}>\n      {aurorianSummaries.map(\n        ({ aurorian_name, breakthrough, is_replaceable }) => {\n          return (\n            <AurorianCard\n              key={aurorian_name}\n              name={aurorian_name}\n              breakthrough={breakthrough}\n              isReplaceable={is_replaceable}\n            />\n          );\n        },\n      )}\n    </div>\n  );\n};\n","import type { ProColumns } from '@ant-design/pro-components';\nimport type { CopilotType } from '@sinsa/schema';\nimport { Tooltip, Typography } from 'antd';\nimport { AuroriansTeam } from '../AuroriansTeam';\n\nexport interface TableParams {\n  title?: CopilotType['title'];\n  author?: CopilotType['author'];\n  term?: `${number}`;\n  dataSource?: CopilotType[];\n  score?: [number, undefined] | [number, number] | [undefined, number];\n}\n\nexport const copilotsColumns: ProColumns<CopilotType>[] = [\n  {\n    title: '光灵配置',\n    dataIndex: 'aurorian_summaries',\n    hideInSearch: true,\n    render(_, entity) {\n      return <AuroriansTeam aurorianSummaries={entity.aurorian_summaries} />;\n    },\n    width: 80 * 5 + 24,\n  },\n  {\n    title: '结算分数',\n    dataIndex: 'score',\n    valueType: 'digit',\n    hideInSearch: true,\n    width: 130,\n  },\n  {\n    title: '作者',\n    dataIndex: 'author',\n    valueType: 'select',\n    hideInSearch: true,\n    ellipsis: true,\n    width: 160,\n    renderText(dom, entity) {\n      return (\n        <>\n          {dom}\n          <Tooltip title={entity.description}>\n            {entity.description ? '🗒' : null}\n          </Tooltip>\n        </>\n      );\n    },\n  },\n  {\n    title: '标题',\n    dataIndex: 'title',\n    ellipsis: true,\n    render(dom, entity) {\n      return (\n        <Typography.Link\n          href={`https://b23.tv/${entity.bv}`}\n          target=\"_blank\"\n          title={entity.title}\n        >\n          {entity.title}\n        </Typography.Link>\n      );\n    },\n  },\n  {\n    title: '上传时间',\n    dataIndex: 'upload_time',\n    valueType: 'dateTime',\n    width: 160,\n    hideInSearch: true,\n  },\n];\n","import { useCallback, useMemo, useRef } from 'react';\nimport type { ActionType } from '@ant-design/pro-components';\nimport { ProTable } from '@ant-design/pro-components';\nimport type { CopilotType } from '@sinsa/schema';\nimport { type TableParams, copilotsColumns } from './columns';\n\ninterface CopilotsTableProps {\n  dataSource: CopilotType[];\n  term?: `${number}`;\n}\n\nexport function copilotRowKey(c: CopilotType) {\n  return c.bv;\n}\n\nconst TABLE_CONST_PROPS = {\n  pagination: {\n    pageSize: 5,\n    size: 'default',\n    position: ['bottomCenter'] as any,\n  },\n  scroll: { x: 'max-content', scrollToFirstRowOnChange: true },\n} as const;\n\nexport const CopilotsTable: React.FC<CopilotsTableProps> = ({\n  dataSource,\n  term,\n}) => {\n  const actionRef = useRef<ActionType>();\n\n  const deps = useMemo(\n    (): TableParams => ({ term, dataSource }),\n    [term, dataSource],\n  );\n\n  const request = useCallback(async (params: TableParams) => {\n    return {\n      data:\n        params.dataSource?.filter(item => {\n          let ok = true;\n          if (params.title) {\n            ok = item.title.includes(params.title);\n          }\n          // min\n          if (typeof params.score?.[0] === 'number') {\n            ok = params.score[0] <= item.score;\n          }\n\n          // max\n          if (typeof params.score?.[1] === 'number') {\n            ok = item.score <= params.score[1];\n          }\n          return ok;\n        }) ?? [],\n      success: true,\n    };\n  }, []);\n\n  return (\n    <ProTable<CopilotType, TableParams>\n      rowKey={copilotRowKey}\n      actionRef={actionRef}\n      columns={copilotsColumns}\n      params={deps}\n      request={request}\n      {...TABLE_CONST_PROPS}\n    />\n  );\n};\n","import { useModel } from '@modern-js/runtime/model';\nimport { Select } from 'antd';\nimport { useNavigate, useParams } from '@modern-js/runtime/router';\nimport { TermsModel } from '@/models/terms';\nimport { RoutePath } from '@/components/MyLayout/constants';\n\nexport const TermChanger: React.FC<{\n  pathFn: typeof RoutePath.Copilots | typeof RoutePath.Solutions;\n}> = ({ pathFn }) => {\n  const params = useParams<{ term: `${number}` }>();\n  const [terms] = useModel(TermsModel);\n  const navigate = useNavigate();\n\n  return (\n    <Select\n      value={params.term && Number.parseInt(params.term, 10)}\n      options={terms.termsOptions}\n      placeholder=\"荒典期数\"\n      onChange={(nextTerm: number) => {\n        navigate(pathFn(nextTerm));\n      }}\n    />\n  );\n};\n","import { useModel } from '@modern-js/runtime/model';\nimport { Button, Result } from 'antd';\nimport { Link } from '@modern-js/runtime/router';\nimport { TermsModel } from '@/models/terms';\nimport { RoutePath } from '@/components/MyLayout/constants';\n\nexport const TermNotFound: React.FC = () => {\n  const [{ firstTerm }] = useModel(TermsModel);\n\n  return (\n    <Result\n      status=\"404\"\n      title=\"荒典作业不见了\"\n      subTitle=\"检查链接是否正确或返回最近荒典作业\"\n      extra={\n        firstTerm ? (\n          <Link to={RoutePath.Copilots(firstTerm.term)}>\n            <Button type=\"primary\">返回最近作业</Button>\n          </Link>\n        ) : (\n          <Link to={RoutePath.Home}>\n            <Button type=\"primary\">返回首页</Button>\n          </Link>\n        )\n      }\n    />\n  );\n};\n"],"names":["AurorianCard","React","name","breakthrough","isReplaceable","sameSize","auroriansMap","useModel","AuroriansModel","aurorian","useMemo","cardRef","useRef","useEffect","aurorian_name","then","esm","default","current","style","backgroundImage","catch","_jsx","Badge","Ribbon","fontSize","display","zIndex","text","undefined","children","_jsxs","className","clsx","styles","ref","class","attribute","alt","src","ClassURLMapper","ElementURLMapper","secondary_attribute","title","aurorian_cn_name","rarity","ConfigProvider","theme","components","Rate","starBg","starSize","disabled","value","count","RarityMapper","AuroriansTeam","aurorianSummaries","map","is_replaceable","copilotsColumns","dataIndex","hideInSearch","render","_","entity","aurorian_summaries","width","valueType","ellipsis","renderText","dom","_Fragment","Tooltip","description","Typography","Link","href","bv","target","copilotRowKey","c","TABLE_CONST_PROPS","pagination","pageSize","size","position","scroll","x","scrollToFirstRowOnChange","CopilotsTable","dataSource","term","actionRef","deps","request","useCallback","async","data","params","filter","item","ok","includes","score","success","ProTable","rowKey","columns","TermChanger","pathFn","useParams","terms","TermsModel","navigate","useNavigate","Select","Number","parseInt","options","termsOptions","placeholder","onChange","nextTerm","TermNotFound","firstTerm","Result","status","subTitle","extra","to","RoutePath","Copilots","Button","type","Home"],"sourceRoot":""}
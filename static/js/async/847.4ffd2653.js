/*! For license information please see 847.4ffd2653.js.LICENSE.txt */
(self.webpackChunk_sinsa_web=self.webpackChunk_sinsa_web||[]).push([["847"],{268763:function(e,r,t){"use strict";t.r(r),t.d(r,{AurorianSelectorBox:function(){return h}});var a=t("397458"),n=t("189976"),l=t("167471"),i=t("673148"),o=t("333906"),u=t("126736"),s=t("11561"),c=t("286982"),d=t("157064"),m=t("792421");let p=[1,2,3,4,5],v=[1],f=e=>{let{columnIndex:r,rowIndex:t,style:n,data:l}=e,o=l.dataSource?.[t]?.[r];if(o){let e=(0,i.findKey)(l.selected,e=>e===o.aurorian_id),r=l.requireMap[o.aurorian_id];return(0,a.jsx)("div",{style:n,className:c.CellContainer,children:(0,a.jsxs)("div",{className:c.CardContainer,onClick:r=>{if(r.stopPropagation(),"string"==typeof e){l.setSelected(r=>(0,s.produce)(r,r=>{delete r[e]})),l.setActiveArurorianId(null);return}let t=l.getNextLabel();"number"==typeof t&&(l.setSelected(e=>({...e,[t]:o.aurorian_id})),l.setActiveArurorianId(o.aurorian_id))},children:[(0,a.jsx)(m.AdaptiveAurorianCard,{readOnly:!0,aurorianId:o.aurorian_id,remark:r?.remark,breakthrough:r?.breakthrough}),"string"==typeof e?(0,a.jsx)("div",{className:c.SelectedSingle,children:e}):null]})})}return null},h=e=>{let{filter:r,column:t=3,selected:s,setSelected:m,activeArurorianId:h,setActiveArurorianId:x,multi:g,requireMap:A}=e,[{auroriansMap:C}]=(0,n.useModel)(d.AuroriansModel),b=(0,o.useMemo)(()=>{let e="all"===r.element?(0,i.toArray)(C):(0,i.filter)(C,e=>e.primary_element===r.element||"string"==typeof(0,i.find)(s,r=>r===e.aurorian_id)),a=(0,i.sortBy)(e,e=>-e.rarity-("string"==typeof(0,i.find)(s,r=>r===e.aurorian_id)&&"all"!==r.element&&e.primary_element!==r.element?100:0));return(0,i.chunk)(a,t)},[C,r.element,t,s]),y=(0,o.useCallback)(()=>{for(let e of g?p:v){if("string"!=typeof s[e])return e;if(!g)return e}return null},[s,g]),j=(0,o.useMemo)(()=>({selected:s,dataSource:b,setSelected:m,getNextLabel:y,activeArurorianId:h,setActiveArurorianId:x,requireMap:A}),[b,s,y,h,A]);return(0,a.jsx)("div",{className:c.BoxContainer,children:(0,a.jsx)(u.default,{children:e=>{let{height:r,width:n}=e;return(0,a.jsx)(l.FixedSizeGrid,{columnCount:t,columnWidth:(t>=4?n-16:n)/t,height:r,rowCount:b.length,rowHeight:138,width:n,itemData:j,children:f})}})})}},276829:function(e,r,t){"use strict";t.r(r),t.d(r,{AurorianSelectorDetail:function(){return f}});var a=t("397458"),n=t("189976"),l=t("333906"),i=t("280550"),o=t("11561"),u=t("367882"),s=t("807910"),c=t("157064"),d=t("792421"),m=t("250470"),p=t("709807"),v=t("69500");let f=e=>{let{value:r,onChange:t,activeArurorianId:f}=e,[{auroriansMap:h}]=(0,n.useModel)(c.AuroriansModel),x=(0,l.useMemo)(()=>"string"==typeof f?h[f]:void 0,[h,f]),g=f&&r[f]||{aurorian_id:f,breakthrough:x?(0,m.getDefaultBreakthrough)(x.rarity):0};return((0,l.useEffect)(()=>{if(f&&x?.rarity){let e=r[f];x.rarity>=4&&0===Object.keys(e?.remark?.level??{}).length?t({...r,[f]:{...g,remark:{level:{asc:3,lv:80,eq:0,rfn:0,aff:0}}}}):t({...r,[f]:{...g}})}},[f,r,x?.rarity]),f)?x?(0,a.jsxs)("div",{className:s.Container,children:[(0,a.jsx)("div",{className:s.CardContainer,children:(0,a.jsx)(d.AdaptiveAurorianCard,{readOnly:!0,aurorianId:f,remark:g.remark,breakthrough:g.breakthrough})}),(0,a.jsxs)(i.Form,{children:[(0,a.jsx)(i.Form.Item,{label:"\u7A81\u7834\u6570",children:(0,a.jsx)(i.Rate,{value:g.breakthrough,count:x.rarity,onChange:e=>{t?.({...r,[f]:o.produce(g,r=>{r.breakthrough=e})})},tooltips:(0,p.getDefaultTooltips)(x.rarity)})}),x?.rarity&&x.rarity>=4?(0,a.jsx)(i.Form.Item,{label:"\u5149\u7075\u7B49\u7EA7",extra:(0,a.jsx)(i.InputNumber,{prefix:"Lv.",className:s.LvInput,value:g.remark?.level?.lv,min:1,max:80,onChange:e=>{t?.({...r,[f]:{...g,remark:o.produce(g.remark??{},r=>{r.level&&"number"==typeof e&&(r.level.lv=e,e<80&&(r.level.rfn=0))})}})}}),children:(0,a.jsx)(i.Slider,{value:g.remark?.level?.lv,min:1,max:80,marks:v.LEVEL_MARKS,onChange:e=>{t?.({...r,[f]:{...g,remark:o.produce(g.remark??{},r=>{r.level&&(r.level.lv=e,e<80&&(r.level.rfn=0))})}})},step:null})}):null,g.remark?.level?.lv===80?(0,a.jsx)(i.Form.Item,{label:"\u88C5\u5907\u7CBE\u70BC",children:(0,a.jsx)(i.Radio.Group,{optionType:"button",value:g.remark?.level?.rfn??0,options:v.RFN_OPTIONS,onChange:e=>{t?.({...r,[f]:{...g,remark:o.produce(g.remark??{},r=>{r.level&&(r.level.rfn=e.target.value)})}})}})}):null]})]}):(0,a.jsxs)("div",{children:["\u672A\u627E\u5230 ",f," \u7684\u5149\u7075"]}):(0,a.jsx)(i.Result,{icon:(0,a.jsx)(u.SmilingFace,{size:48}),title:"\u6B22\u8FCE\u4F7F\u7528",subTitle:"\u8BF7\u4ECE\u5149\u7075\u5217\u8868\u4E2D\u9009\u62E9\u4E00\u4E2A\u5149\u7075\u4EE5\u914D\u7F6E"})}},917495:function(e,r,t){"use strict";t.r(r),t.d(r,{InnerAurorianSelectorFilter:function(){return c}});var a=t("397458"),n=t("280550"),l=t("250877"),i=t("11561"),o=t("679626"),u=t("717747");let s=[{label:"\u5168\u90E8",value:"all"},{label:"\u6C34",value:l.AurorianAttributeType.Water,icon:(0,a.jsx)("img",{className:o.FilterElementIcon,alt:l.AurorianAttributeType.Water,src:u.ElementURLMapper[l.AurorianAttributeType.Water]})},{label:"\u706B",value:l.AurorianAttributeType.Fire,icon:(0,a.jsx)("img",{className:o.FilterElementIcon,alt:l.AurorianAttributeType.Fire,src:u.ElementURLMapper[l.AurorianAttributeType.Fire]})},{label:"\u68EE",value:l.AurorianAttributeType.Forest,icon:(0,a.jsx)("img",{className:o.FilterElementIcon,alt:l.AurorianAttributeType.Forest,src:u.ElementURLMapper[l.AurorianAttributeType.Forest]})},{label:"\u96F7",value:l.AurorianAttributeType.Thunder,icon:(0,a.jsx)("img",{className:o.FilterElementIcon,alt:l.AurorianAttributeType.Thunder,src:u.ElementURLMapper[l.AurorianAttributeType.Thunder]})}],c=e=>{let{value:r,onChange:t}=e;return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(n.Segmented,{size:"large",value:r.element,options:s,onChange:e=>{t((0,i.produce)(r,r=>{r.element=e}))}})})}},141035:function(e,r,t){"use strict";t.r(r),t.d(r,{AurorianSelector:function(){return p}});var a=t("397458"),n=t("439958"),l=t("280550"),i=t("333906"),o=t("189976"),u=t("673148"),s=t("268763"),c=t("276829"),d=t("917495"),m=t("157064");let p=(0,n.create)(e=>{let{multi:r,initialValue:t}=e,p=(0,n.useModal)(),v=l.Grid.useBreakpoint(),[f,h]=(0,i.useState)(()=>({element:"all"})),[x,g]=(0,i.useState)(()=>{let e={};if(t)for(let r=0;r<t.length;r++)e[r+1]=t[r].aurorian_id;return e}),[A,C]=(0,i.useState)(()=>{let e={};if(t)for(let r of t)e[r.aurorian_id]=r;return e}),[b,y]=(0,i.useState)(null),j=v.md,S=(0,i.useMemo)(()=>{var e,r;return e=x,r=A,Object.entries(e).toSorted((e,r)=>Number(e[0])-Number(r[0])).filter(e=>"string"==typeof e[1]).map(e=>e[1]).map(e=>r[e]).filter(e=>!!e)},[x,A]),[{auroriansOptions:k}]=(0,o.useModel)(m.AuroriansModel),I=(0,a.jsx)(l.Select,{mode:"multiple",options:k,placeholder:"\u652F\u6301\u6309\u62FC\u97F3\u641C\u7D22, \u6BD4\u5982 ad \u53EF\u4EE5\u641C\u5230 \u5B89\u987F",showSearch:!0,allowClear:!1,value:S?.map(e=>e.aurorian_id),filterOption:m.filterAuroriansOption,onChange:e=>{g(e.slice(0,5).reduce((e,r,t)=>({...e,[t+1]:r}),{}));let r=(0,u.last)(e);r&&y(r)}});return(0,a.jsx)(l.Drawer,{...(0,n.antdDrawerV5)(p),bodyStyle:{padding:0},placement:"bottom",title:r?"\u5FEB\u901F\u7F16\u961F":"\u9009\u62E9\u5149\u7075",height:j?"calc(50vh + 120px)":"95vh",extra:(0,a.jsx)(l.Space,{children:(0,a.jsx)(l.Button,{type:"primary",onClick:e=>{e.stopPropagation(),p.resolve(S),p.hide()},children:"\u5B8C\u6210"})}),children:j?(0,a.jsxs)(l.Flex,{wrap:"nowrap",gap:8,children:[(0,a.jsxs)(l.Flex,{vertical:!0,gap:8,style:{flexBasis:0,flexGrow:1},children:[I,(0,a.jsx)(d.InnerAurorianSelectorFilter,{value:f,onChange:h}),(0,a.jsx)(s.AurorianSelectorBox,{selected:x,setSelected:g,column:v.lg?6:4,filter:f,activeArurorianId:b,setActiveArurorianId:y,multi:r,requireMap:A})]}),(0,a.jsx)("div",{style:{width:"400px"},children:(0,a.jsx)(c.AurorianSelectorDetail,{activeArurorianId:b,value:A,onChange:C})})]}):(0,a.jsxs)(l.Flex,{vertical:!0,gap:8,children:[I,(0,a.jsx)(d.InnerAurorianSelectorFilter,{value:f,onChange:h}),(0,a.jsx)(s.AurorianSelectorBox,{selected:x,setSelected:g,filter:f,activeArurorianId:b,setActiveArurorianId:y,multi:r,requireMap:A}),(0,a.jsx)(c.AurorianSelectorDetail,{activeArurorianId:b,value:A,onChange:C})]})})})},69500:function(e,r,t){"use strict";t.r(r),t.d(r,{ASC_OPTIONS:function(){return a},LEVEL_MARKS:function(){return l},RFN_OPTIONS:function(){return n}});let a=[{label:"\u89C9\u9192\u4E09",value:3},{label:"\u89C9\u9192\u4E8C",value:2},{label:"\u89C9\u9192\u4E00",value:1},{label:"\u672A\u89C9\u9192",value:0}],n=[{label:"\u672A\u7CBE\u70BC",value:0},{label:"\u7CBE\u70BC\u2160",value:1},{label:"\u7CBE\u70BC\u2161",value:2},{label:"\u7CBE\u70BC\u2162",value:3}],l={1:"1",10:"10",20:"20",30:"30",40:"40",50:"50",60:"60",80:"80"}},709807:function(e,r,t){"use strict";t.r(r),t.d(r,{getDefaultTooltips:function(){return a}});let a=(0,t("673148").memoize)(e=>{switch(e){case 6:return["\u96F6","\u96F6","\u4E00","\u4E00","\u4E00","\u6EE1"].map(e=>`${e}\u{7834}`);case 5:return["\u96F6","\u4E00","\u4E00","\u4E00","\u6EE1"].map(e=>`${e}\u{7834}`);case 4:return["\u96F6","\u96F6","\u96F6","\u6EE1"].map(e=>`${e}\u{7834}`);case 3:return["\u96F6","\u96F6","\u6EE1"].map(e=>`${e}\u{7834}`);case 2:return["\u96F6","\u6EE1"].map(e=>`${e}\u{7834}`);case 1:return["\u6EE1"].map(e=>`${e}\u{7834}`);default:return[]}})},250470:function(e,r,t){"use strict";t.r(r),t.d(r,{getDefaultBreakthrough:function(){return a}});let a=(0,t("673148").memoize)(e=>{switch(e){case 6:case 2:return 2;case 5:case 1:return 1;case 4:return 4;case 3:return 3;default:return 0}})},286982:function(e){"use strict";e.exports={BoxContainer:"BoxContainer-_03a30",boxContainer:"BoxContainer-_03a30",CardContainer:"CardContainer-e57d98",cardContainer:"CardContainer-e57d98",CellContainer:"CellContainer-_9517f",cellContainer:"CellContainer-_9517f",SelectedSingle:"SelectedSingle-_23e2f",selectedSingle:"SelectedSingle-_23e2f"}},807910:function(e){"use strict";e.exports={CardContainer:"CardContainer-d82ab2",cardContainer:"CardContainer-d82ab2",Container:"Container-ca82c4",container:"Container-ca82c4",LvInput:"LvInput-aec760",lvInput:"LvInput-aec760"}},679626:function(e){"use strict";e.exports={FilterElementIcon:"FilterElementIcon-af80d4",filterElementIcon:"FilterElementIcon-af80d4"}}}]);
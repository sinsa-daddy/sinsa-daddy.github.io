/*! For license information please see 409.f7c90647.js.LICENSE.txt */
(globalThis.webpackChunk_sinsa_web=globalThis.webpackChunk_sinsa_web||[]).push([["409"],{592245:function(e,r,t){"use strict";e.exports=t.p+"static/image/sorry.06ca1022.png"},439465:function(e,r,t){"use strict";e.exports=t.p+"static/image/3StarAsc2.5e960018.webp"},459670:function(e,r,t){"use strict";e.exports=t.p+"static/image/Asc3.40b5771f.webp"},119571:function(e,r,t){"use strict";e.exports={Asc:"Asc-_61174",asc:"Asc-_61174",Icon2of2:"Icon2of2-_1950c",icon2of2:"Icon2of2-_1950c",Icon3of3:"Icon3of3-_13b84",icon3of3:"Icon3of3-_13b84"}},522728:function(e,r,t){"use strict";e.exports={AdaptiveAurorianCard:"AdaptiveAurorianCard-d7ef3b",adaptiveAurorianCard:"AdaptiveAurorianCard-d7ef3b",BackgroundImage:"BackgroundImage-_43461",backgroundImage:"BackgroundImage-_43461",BreakThrough:"BreakThrough-bbea6b",breakThrough:"BreakThrough-bbea6b",Disabled:"Disabled-_21a59",disabled:"Disabled-_21a59",LargeSize:"LargeSize-_6952b",largeSize:"LargeSize-_6952b",MetaClass:"MetaClass-d72291",metaClass:"MetaClass-d72291",MetaContainer:"MetaContainer-a2721f",metaContainer:"MetaContainer-a2721f",MetaFirstAttribute:"MetaFirstAttribute-cfe989",metaFirstAttribute:"MetaFirstAttribute-cfe989",MetaSecondAttribute:"MetaSecondAttribute-_1cb80",metaSecondAttribute:"MetaSecondAttribute-_1cb80",MiniSize:"MiniSize-_8a459",miniSize:"MiniSize-_8a459",NameContainer:"NameContainer-ca1a21",nameContainer:"NameContainer-ca1a21",RemarkContainer:"RemarkContainer-e5526c",remarkContainer:"RemarkContainer-e5526c",ReplaceableTag:"ReplaceableTag-_725fb",replaceableTag:"ReplaceableTag-_725fb",num:"num-_7331a"}},899916:function(e,r,t){"use strict";e.exports={RelativeTimeText:"RelativeTimeText-ab3533",relativeTimeText:"RelativeTimeText-ab3533"}},794331:function(e,r,t){"use strict";e.exports={AuroriansTeam:"AuroriansTeam-_29905",auroriansTeam:"AuroriansTeam-_29905"}},293221:function(e,r,t){"use strict";e.exports={Author:"Author-_4d4b8",author:"Author-_4d4b8",CopilotBlock:"CopilotBlock-_51402",copilotBlock:"CopilotBlock-_51402",Dot:"Dot-_3d0fb",dot:"Dot-_3d0fb",Header:"Header-_18b85",header:"Header-_18b85",PaddingContainer:"PaddingContainer-_620c9",paddingContainer:"PaddingContainer-_620c9",Score:"Score-_04302",score:"Score-_04302",Title:"Title-cf149e",title:"Title-cf149e"}},321438:function(e,r,t){"use strict";t.r(r),t.d(r,{IconAsc:function(){return l}});var n=t("766791"),a=t("835079"),i=t("450348"),o=t.n(i),s=t("119571");let l=o().memo(e=>{let{rairty:r}=e;return(0,n.jsx)("div",{className:(0,a.default)(s.Asc,r>=4?s.Icon3of3:s.Icon2of2)})},(e,r)=>e.asc===r.asc&&e.rairty===r.rairty)},408748:function(e,r,t){"use strict";t.r(r),t.d(r,{AdaptiveAurorianCard:function(){return x}});var n=t("766791"),a=t("450348"),i=t.n(a),o=t("67348"),s=t("835079"),l=t("375748"),u=t("928958"),c=t("863266"),d=t("522728"),m=t("791520"),p=t("887921"),g=t("321438"),h=t("439538"),f=t("714874"),y=t("609386");let x=i().memo(e=>{let{aurorianId:r,breakthrough:t,remark:i,readOnly:x,mini:A}=e,[{auroriansMap:b}]=(0,o.useModel)(h.AuroriansModel),T=(0,a.useMemo)(()=>b[r],[b,r]),{containerRef:_}=(0,m.useLazyImage)(T?.aurorian_id),C=(0,u.useBreakpoint)(),k=(0,a.useMemo)(()=>{let e=10;switch(C){case"xs":e=10;break;case"sm":e=12;break;default:e=13}return{components:{Rate:{starBg:"white",starSize:e}}}},[C]),v=(0,a.useMemo)(()=>[{label:`\u{6392}\u{9664}${T?.cn_name}`,key:p.AdaptiveAurorianCardMenuKey.IgnoreAurorian},"number"==typeof t?{label:`\u{4EC5}\u{6392}\u{9664}\u{6B64}\u{7A81}\u{7834}\u{6570}\u{7684}${T?.cn_name}`,key:p.AdaptiveAurorianCardMenuKey.IgnoreBreakthrough}:null,{label:`\u{66FF}\u{6362}${T?.cn_name}`,key:p.AdaptiveAurorianCardMenuKey.ReplaceAurorian}].filter(e=>e),[T?.cn_name,t]),{triggerFormAction:j}=(0,f.useSolutionResultContext)();return(0,n.jsx)(l.Dropdown,{disabled:x,trigger:["click"],getPopupContainer:()=>document.body,menu:{items:v,onClick:e=>{let{key:r}=e;if(T?.aurorian_id)switch(r){case p.AdaptiveAurorianCardMenuKey.IgnoreBreakthrough:"number"==typeof t&&j({type:y.QueryFormAction.IgnoreAurorianBreakthroughOnly,aurorian:T,breakthrough:t});break;case p.AdaptiveAurorianCardMenuKey.IgnoreAurorian:j({type:y.QueryFormAction.IgnoreAurorian,aurorian:T})}}},children:(0,n.jsxs)(c.m.div,{ref:_,className:(0,s.default)(d.AdaptiveAurorianCard,d.BackgroundImage,x&&d.Disabled,A?d.MiniSize:d.LargeSize),whileHover:x?void 0:{opacity:.6},whileTap:x?void 0:{opacity:.2},children:[T?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(l.Flex,{vertical:!0,className:d.NameContainer,children:[(0,n.jsx)("span",{children:T?.cn_name}),"number"==typeof t&&T?.rarity?(0,n.jsx)(l.ConfigProvider,{theme:k,children:(0,n.jsx)(l.Rate,{className:d.BreakThrough,disabled:!0,value:t,count:T.rarity})}):null]}),(0,n.jsxs)(l.Flex,{align:"center",className:d.MetaContainer,children:[(0,n.jsx)("img",{className:d.MetaClass,alt:T.profession,src:p.ClassURLMapper[T.profession]}),(0,n.jsxs)(l.Flex,{align:"center",vertical:A,children:[(0,n.jsx)("img",{className:d.MetaFirstAttribute,alt:T.primary_element,src:p.ElementURLMapper[T.primary_element]}),T.secondary_element?(0,n.jsx)("img",{className:d.MetaSecondAttribute,alt:T.secondary_element,src:p.ElementURLMapper[T.secondary_element]}):null]})]})]}):null,i?.replace?.type==="any"&&i?.replace?.any==="All"?(0,n.jsx)(l.Tag,{className:d.ReplaceableTag,color:"#dc5950",children:"\u53EF\u66FF"}):null,i?.replace?.type==="any"&&i?.replace?.any==="DPS"?(0,n.jsx)(l.Tag,{className:d.ReplaceableTag,color:"#dc5950",children:"\u53EF\u66FF\u8F93\u51FA"}):null,i?.replace?.type==="any"?null:T?.rarity&&i?.level?.asc===3&&"number"==typeof i?.level?.lv?(0,n.jsx)(l.Tag,{className:d.RemarkContainer,color:"rgba(0,0,0,0.4)",children:(0,n.jsxs)(l.Flex,{align:"center",gap:2,children:[(0,n.jsx)(g.IconAsc,{rairty:T.rarity,asc:3}),(0,n.jsx)("span",{className:d.num,children:i?.level?.lv})]})}):null]})})})},216746:function(e,r,t){"use strict";t.r(r),t.d(r,{RelativeTimeText:function(){return c}});var n=t("766791"),a=t("375748"),i=t("561904"),o=t.n(i),s=t("450348"),l=t.n(s),u=t("899916");let c=l().memo(e=>{let{time:r}=e;return(0,n.jsx)(a.Tooltip,{title:o()(r).format("YYYY-MM-DD HH:mm:ss"),children:(0,n.jsx)("span",{className:u.RelativeTimeText,children:o()(r).fromNow()})})},(e,r)=>e.time.valueOf()===r.time.valueOf())},947720:function(e,r,t){"use strict";t.r(r),t.d(r,{AdaptiveAuroriansTeam:function(){return s}});var n=t("766791"),a=t("375748"),i=t("794331"),o=t("408748");let s=e=>{let{aurorianRequirements:r,readOnly:t}=e;return(0,n.jsx)(a.Flex,{className:i.AuroriansTeam,children:r.map(e=>{let{aurorian_id:r,breakthrough:a,remark:i}=e;return(0,n.jsx)(o.AdaptiveAurorianCard,{aurorianId:r,breakthrough:a,remark:i,readOnly:t},r)})})}},764059:function(e,r,t){"use strict";t.r(r),t.d(r,{CopilotBlock:function(){return b}});var n,a=t("766791"),i=t("835079"),o=t("375748"),s=t("450348"),l=t.n(s),u=t("132802"),c=t.n(u),d=t("928958"),m=t("134640"),p=t("947720"),g=t("293221"),h=t("216278"),f=t("216746"),y=t("870233"),x=t("714874"),A=t("609386");(n||(n={})).IgnoreCopilot="IgnoreCopilot";let b=l().memo(e=>{let{copilot:r,currentTerm:t,className:n,readOnly:l}=e,u=(0,d.useBreakpoint)(),b=(0,s.useMemo)(()=>"lg"===u||"xl"===u||"xxl"===u,[u]),T=(0,s.useMemo)(()=>Array.isArray(r.assets),[r.assets]),_=(0,s.useMemo)(()=>(0,y.trimTitle)(r.title),[r.title]),{triggerFormAction:C}=(0,x.useSolutionResultContext)();return(0,a.jsxs)("div",{className:(0,i.clsx)(g.CopilotBlock,n),children:[(0,a.jsx)(p.AdaptiveAuroriansTeam,{aurorianRequirements:r.aurorian_requirements,readOnly:l}),(0,a.jsxs)("div",{className:g.PaddingContainer,children:[(0,a.jsxs)(o.Flex,{className:g.Header,children:[(0,a.jsx)("span",{className:g.Score,children:c()(r.score).format("0,0")}),(0,a.jsxs)(o.Flex,{className:g.Author,align:"center",gap:6,children:[(0,a.jsx)(o.Typography.Text,{strong:!0,children:r.author_name}),r.description&&!b?(0,a.jsx)(o.Tooltip,{title:r.description,children:r.description?(0,a.jsx)(m.MessageOne,{size:18}):null}):null,(0,a.jsx)(f.RelativeTimeText,{time:r.upload_time}),(0,a.jsxs)(o.Space.Compact,{size:"small",children:[l?null:(0,a.jsx)(o.Dropdown,{menu:{items:[{key:"IgnoreCopilot",label:(0,a.jsxs)("span",{children:[(0,a.jsx)(m.PreviewCloseOne,{})," \u6392\u9664\u6B64\u4F5C\u4E1A"]})}],onClick:function(e){if("IgnoreCopilot"===e.key)C({type:A.QueryFormAction.IgnoreCopilot,copilot:r})}},children:(0,a.jsx)(o.Button,{icon:(0,a.jsx)(m.More,{})})}),(0,a.jsx)(o.Button,{icon:(0,a.jsx)(o.Tooltip,{title:"\u62A5\u544A\u6536\u5F55\u9519\u8BEF",children:(0,a.jsx)(m.Bug,{})}),onClick:e=>{e.stopPropagation();let t=Object.entries({\u6709\u6536\u5F55\u95EE\u9898\u7684\u4F5C\u4E1A\u6240\u5728\u8352\u5178\u671F\u6570:r.term_id,\u6709\u6536\u5F55\u95EE\u9898\u7684\u4F5C\u4E1A\u89C6\u9891\u94FE\u63A5:`${r.author_name} ${r.title} https://www.bilibili.com/video/${r.href}`}).map(e=>{let[r,t]=e;return`prefill_${window.encodeURIComponent(r)}=${window.encodeURIComponent(t)}`}).join("&");window.open(`https://fwf92qm5h53.feishu.cn/share/base/form/shrcnFMYfIOulCFwcl5ELDfGCVf?${t}`,"_blank")}})]})]})]}),(0,a.jsx)("div",{className:g.Title,children:(0,a.jsxs)(o.Typography.Link,{href:`https://www.bilibili.com/video/${r.href}`,target:"_blank",title:r.title,ellipsis:!0,children:[t?.term_id&&r.term_id!==t.term_id?(0,a.jsx)(o.Tooltip,{title:`\u{590D}\u{523B} ${r.term_id} \u{671F}\u{8352}\u{5178}`,children:(0,a.jsx)(o.Tag,{color:"red",children:"\u590D\u523B"})}):null,_]})}),r.description&&b?(0,a.jsx)(o.Typography.Paragraph,{type:"secondary",children:r.description}):null,T&&b?r.assets?.map((e,r)=>a.jsx(o.Popconfirm,{okText:"\u786E\u8BA4",title:"\u6B64\u8D44\u6E90\u4EC5\u4E3A\u4E34\u65F6\u5B58\u6863\u3002\u662F\u5426\u5F00\u59CB\u4E0B\u8F7D\uFF1F",onConfirm:()=>{let r=document.createElement("a");r.href=e.script33.link,r.click()},children:a.jsxs(o.Typography.Link,{children:[a.jsx(m.Paperclip,{})," ",h.AssetTypeTextMapper[e.type],"\u5B58\u6863"]})},`${e.type}${r}`)):null]})]})},(e,r)=>e.className===r.className&&e.copilot.copilot_id===r.copilot.copilot_id&&e.currentTerm.term_id===r.currentTerm.term_id)},718606:function(e,r,t){"use strict";t.r(r),t.d(r,{useTargetTermFromParams:function(){return u},TermChanger:function(){return c}});var n=t("766791"),a=t("67348"),i=t("375748"),o=t("551895"),s=t("450348"),l=t("966785");function u(){let e=(0,o.useParams)(),[{termsMap:r,latestTerm:t}]=(0,a.useModel)(l.TermsModel);return{targetTerm:(0,s.useMemo)(()=>{if(e.termId)return"latest"===e.termId?t:r[e.termId]},[e.termId,t?.term_id])}}let c=e=>{let{pathFn:r}=e,[t]=(0,a.useModel)(l.TermsModel),{targetTerm:s}=u(),c=(0,o.useNavigate)();return(0,n.jsx)(i.Select,{value:s?.term_id,options:t.termsOptions,placeholder:"\u8352\u5178\u671F\u6570",onChange:e=>{c(r(e===t.latestTerm?.term_id?"latest":e))}})}},18363:function(e,r,t){"use strict";t.r(r),t.d(r,{TermNotFound:function(){return c}});var n=t("766791"),a=t("67348"),i=t("375748"),o=t("551895"),s=t("966785"),l=t("605442"),u=t("592245");let c=()=>{let[{latestTerm:e}]=(0,a.useModel)(s.TermsModel);return(0,n.jsx)(i.Result,{title:"\u6682\u65F6\u6CA1\u6709\u8FD9\u671F\u8352\u5178\u4F5C\u4E1A",subTitle:"\u68C0\u67E5\u94FE\u63A5\u662F\u5426\u6B63\u786E\u6216\u8FD4\u56DE\u6700\u8FD1\u8352\u5178\u4F5C\u4E1A",icon:(0,n.jsx)("img",{alt:"\u672A\u627E\u5230\u4F5C\u4E1A",src:u}),extra:e?(0,n.jsx)(o.Link,{to:l.RoutePath.Copilots("latest"),children:(0,n.jsx)(i.Button,{type:"primary",children:"\u8FD4\u56DE\u6700\u8FD1\u4F5C\u4E1A"})}):(0,n.jsx)(o.Link,{to:l.RoutePath.Home,children:(0,n.jsx)(i.Button,{type:"primary",children:"\u8FD4\u56DE\u9996\u9875"})})})}},791520:function(e,r,t){"use strict";t.r(r),t.d(r,{useLazyImage:function(){return a}});var n=t("450348");function a(e){let r=(0,n.useRef)(null);return(0,n.useEffect)(()=>{(async()=>{e&&r.current&&(r.current.style.backgroundImage=`url(/assets/images/avatars/${e}.webp)`)})()},[e]),{containerRef:r}}},216278:function(e,r,t){"use strict";t.r(r),t.d(r,{AssetTypeTextMapper:function(){return n}});let n={script33:"\u4E09\u5341\u4E09\u53F7\u811A\u672C"}},870233:function(e,r,t){"use strict";function n(e){return e.replace("[\u767D\u591C\u6781\u5149]","").replace("\u3010\u767D\u591C\u6781\u5149\u3011","").replace("\u767D\u591C\u6781\u5149","").replace("\u8352\u5178","").replace("[hidden]","")}t.r(r),t.d(r,{trimTitle:function(){return n}})},28549:function(e,r,t){"use strict";t.r(r),t.d(r,{solutionAlgorithm:function(){return a}});class n{static getInstance(){return null===n.instance&&(n.instance=new n),n.instance}calculateAllSolutions(e,r,n){return new Promise((a,i)=>{let o=new Worker(new URL(t.p+t.u("651"),t.b));o.addEventListener("message",e=>{a(e.data),o.terminate()}),o.addEventListener("error",e=>{i(e),o.terminate()}),o.postMessage({context:e,k:r,options:n})})}constructor(){}}n.instance=null;let a=n.getInstance()},718151:function(e,r,t){"use strict";function n(e){return e}t.r(r),t.d(r,{ensureQueryKey:function(){return n}})},714874:function(e,r,t){"use strict";t.r(r),t.d(r,{SolutionResultProvider:function(){return s},useSolutionResultContext:function(){return l}});var n=t("363733"),a=t("928958"),i=t("642862"),o=t("292812");let[s,l]=(0,n.default)(()=>{let{solutionResult:e,loadingSolutionResult:r,requestSolution:t}=(0,i.useRequestSolution)(),[n]=a.ProForm.useForm(),{triggerFormAction:s}=(0,o.useTriggerFormAction)(n);return{solutionResult:e,loadingSolutionResult:r,requestSolution:t,form:n,triggerFormAction:s}})},642862:function(e,r,t){"use strict";t.r(r),t.d(r,{useRequestSolution:function(){return l}});var n=t("260740"),a=t("67348"),i=t("734513"),o=t("439538"),s=t("28549");function l(){let[{WHOLE_BOX:e}]=(0,a.useModel)(o.AuroriansModel),{data:r,loading:t,runAsync:l}=(0,n.useRequest)(async(r,t)=>{let{exclude:n,k:a,disableAlternative:o,copilotsIgnore:l,enableExclude:u}=t,c=u&&Array.isArray(n)?(0,i.withoutExclude)(e,n):e,d=await s.solutionAlgorithm.calculateAllSolutions({copilots:r,availableBox:c},a,{disableAlternative:o,copilotsIgnore:l}),m=new WeakMap;for(let e=0;e<d.solutions.length;e++){let r=d.solutions[e];m.set(r,e)}return{allSolutions:d,rankSet:m}},{manual:!0});return{solutionResult:r,loadingSolutionResult:t,requestSolution:l}}},609386:function(e,r,t){"use strict";var n,a;t.r(r),t.d(r,{QueryFormAction:function(){return n}}),(a=n||(n={})).IgnoreAurorian="IgnoreAurorian",a.IgnoreAurorianBreakthroughOnly="IgnoreAurorianBreakthroughOnly",a.IgnoreCopilot="IgnoreCopilot",a.ReplaceAurorian="ReplaceAurorian"},292812:function(e,r,t){"use strict";t.r(r),t.d(r,{useTriggerFormAction:function(){return s}});var n=t("450348"),a=t("718151"),i=t("734513"),o=t("609386");function s(e){return{triggerFormAction:(0,n.useCallback)(r=>{switch(r.type){case o.QueryFormAction.IgnoreCopilot:{let t=e.getFieldValue((0,a.ensureQueryKey)("copilotsIgnore")),n=Array.isArray(t)?[...t,r.copilot.copilot_id]:[r.copilot.copilot_id];e.setFieldValue((0,a.ensureQueryKey)("copilotsIgnore"),n);break}case o.QueryFormAction.IgnoreAurorian:case o.QueryFormAction.IgnoreAurorianBreakthroughOnly:{e.setFieldValue((0,a.ensureQueryKey)("enableExclude"),!0);let{exclude:t}=e.getFieldsValue(),n=t?.find(e=>e.aurorianId===r.aurorian.aurorian_id),s=Array.isArray(t)?Array.from(t):[];n&&(s=s.filter(e=>e.aurorianId!==n.aurorianId));let l=r.type===o.QueryFormAction.IgnoreAurorianBreakthroughOnly?[...s,{aurorianId:r.aurorian.aurorian_id,excludeBreakthroughOnly:!0,excludeBreakthrough:(0,i.getNormalizeBreakthroughByRarity)(r.breakthrough,r.aurorian.rarity)}]:[...s,{aurorianId:r.aurorian.aurorian_id}];e.setFieldValue((0,a.ensureQueryKey)("exclude"),l)}}window.setTimeout(()=>e.submit())},[e])}}},734513:function(e,r,t){"use strict";t.r(r),t.d(r,{getNormalizeBreakthroughByRarity:function(){return a},withoutExclude:function(){return i}});var n=t("826424");function a(e,r){switch(r){case 6:return[0,0,3,3,3,6].at(e-1);case 5:return[0,2,2,2,5].at(e-1);case 4:return[0,0,0,4].at(e-1);case 3:return[0,0,3].at(e-1);case 2:return[0,2].at(e-1);case 1:return[1].at(e-1);default:return 0}}function i(e,r){return r?(0,n.produce)(e,e=>{for(let{excludeBreakthroughOnly:t,excludeBreakthrough:n,aurorianId:a}of r)t?"number"==typeof n&&n>=1&&(e[a].breakthrough=Math.max(n-1,0)):delete e[a]}):e}}}]);
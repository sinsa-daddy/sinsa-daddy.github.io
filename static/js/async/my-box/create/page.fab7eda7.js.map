{"version":3,"file":"static/js/async/my-box/create/page.fab7eda7.js","mappings":"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","sources":["webpack://@sinsa/web/./src/components/AurorianBoxCard/styles.module.less","webpack://@sinsa/web/./src/components/AurorianBoxCard/index.tsx","webpack://@sinsa/web/./src/components/CheckControlAurorianBoxCard/index.tsx","webpack://@sinsa/web/./src/components/CreateMyBoxForm/index.tsx","webpack://@sinsa/web/./src/routes/my-box/create/page.tsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"AurorianBoxCard\":\"AurorianBoxCard-LexgSF\",\"aurorianBoxCard\":\"AurorianBoxCard-LexgSF\",\"Skin\":\"Skin-unjkDp\",\"skin\":\"Skin-unjkDp\",\"BlackContainer\":\"BlackContainer-y3r0Nl\",\"blackContainer\":\"BlackContainer-y3r0Nl\",\"MetaContainer\":\"MetaContainer-dJMmhh\",\"metaContainer\":\"MetaContainer-dJMmhh\",\"MetaClass\":\"MetaClass-HwRwCA\",\"metaClass\":\"MetaClass-HwRwCA\",\"MetaAttributeContainer\":\"MetaAttributeContainer-Qzval5\",\"metaAttributeContainer\":\"MetaAttributeContainer-Qzval5\",\"MetaFirstAttribute\":\"MetaFirstAttribute-VujLSL\",\"metaFirstAttribute\":\"MetaFirstAttribute-VujLSL\",\"MetaSecondAttribute\":\"MetaSecondAttribute-_jIoss\",\"metaSecondAttribute\":\"MetaSecondAttribute-_jIoss\",\"NameContainer\":\"NameContainer-k1YCea\",\"nameContainer\":\"NameContainer-k1YCea\",\"BreakThrough\":\"BreakThrough-qk6EVh\",\"breakThrough\":\"BreakThrough-qk6EVh\"};","import React, { useEffect, useMemo, useRef } from 'react';\nimport { useModel } from '@modern-js/runtime/model';\nimport { type AurorianType } from '@sinsa/schema';\nimport { ConfigProvider, Rate } from 'antd';\nimport {\n  ClassURLMapper,\n  ElementURLMapper,\n  RarityMapper,\n} from '../AurorianCard/constants';\nimport styles from './styles.module.less';\nimport { AuroriansModel } from '@/models/aurorians';\n\ninterface AurorianBoxCardProps {\n  name: string;\n  breakthrough: number;\n  onBreakthroughChange?: (breakthrough: number) => void;\n}\n\nexport const AurorianBoxCard = React.memo<AurorianBoxCardProps>(\n  ({ name, breakthrough, onBreakthroughChange }) => {\n    const [{ auroriansMap }] = useModel(AuroriansModel);\n    const aurorian = useMemo(\n      () => auroriansMap[name] as AurorianType | undefined,\n      [auroriansMap, name],\n    );\n\n    const cardRef = useRef<HTMLDivElement>(null);\n\n    useEffect(() => {\n      if (aurorian?.aurorian_name) {\n        import(`@/assets/skins/${aurorian.aurorian_name}.webp`)\n          .then(esm => {\n            if (typeof esm?.default === 'string') {\n              if (cardRef.current) {\n                cardRef.current.style.backgroundImage = `url(${esm.default})`;\n              }\n            }\n          })\n          .catch(() => {\n            // ignore\n          });\n      }\n    }, [aurorian?.aurorian_name]);\n\n    return (\n      <div className={styles.AurorianBoxCard} ref={cardRef}>\n        {aurorian?.class && aurorian?.attribute ? (\n          <div className={styles.MetaContainer}>\n            <img\n              className={styles.MetaClass}\n              alt={aurorian.class}\n              src={ClassURLMapper[aurorian.class]}\n            />\n            <div className={styles.MetaAttributeContainer}>\n              <img\n                className={styles.MetaFirstAttribute}\n                alt={aurorian.attribute}\n                src={ElementURLMapper[aurorian.attribute]}\n              />\n              {aurorian.secondary_attribute ? (\n                <img\n                  className={styles.MetaSecondAttribute}\n                  alt={aurorian.secondary_attribute}\n                  src={ElementURLMapper[aurorian.secondary_attribute]}\n                />\n              ) : null}\n            </div>\n          </div>\n        ) : null}\n        <div className={styles.NameContainer}>\n          <div title={aurorian?.aurorian_name}>\n            {aurorian?.aurorian_cn_name}\n          </div>\n\n          {aurorian?.rarity ? (\n            <ConfigProvider\n              theme={{\n                components: {\n                  Rate: {\n                    starBg: 'white',\n                    starSize: 16,\n                  },\n                },\n              }}\n            >\n              <Rate\n                className={styles.BreakThrough}\n                value={breakthrough}\n                count={RarityMapper[aurorian.rarity]}\n                onChange={t => {\n                  onBreakthroughChange?.(t);\n                }}\n              />\n            </ConfigProvider>\n          ) : null}\n        </div>\n      </div>\n    );\n  },\n);\n","import { CheckCard } from '@ant-design/pro-components';\nimport { useState } from 'react';\nimport { AurorianBoxCard } from '../AurorianBoxCard';\n\ninterface CheckControlAurorianBoxCardProps {\n  name: string;\n}\n\nexport const CheckControlAurorianBoxCard: React.FC<\n  CheckControlAurorianBoxCardProps\n> = ({ name, ...rest }) => {\n  const [breakthrough, setBreakthrough] = useState(0);\n  return (\n    <CheckCard\n      {...rest}\n      value={{ name, breakthrough }}\n      style={{\n        width: 110,\n        height: 160,\n        boxSizing: 'border-box',\n        overflow: 'hidden',\n      }}\n      cover={\n        <AurorianBoxCard\n          name={name}\n          breakthrough={breakthrough}\n          onBreakthroughChange={setBreakthrough}\n        />\n      }\n    />\n  );\n};\n","import {\n  type ProFormInstance,\n  StepsForm,\n  ProFormText,\n  CheckCard,\n} from '@ant-design/pro-components';\nimport { useModel } from '@modern-js/runtime/model';\nimport { useMemo, useRef } from 'react';\nimport { groupBy } from 'lodash-es';\nimport { Form } from 'antd';\nimport { AurorianAttributeType } from '@sinsa/schema';\nimport { CheckControlAurorianBoxCard } from '../CheckControlAurorianBoxCard';\nimport { AuroriansModel } from '@/models/aurorians';\n\nexport const CreateMyBoxForm: React.FC = () => {\n  const formRef = useRef<ProFormInstance>();\n  const [{ auroriansMap }] = useModel(AuroriansModel);\n\n  const chunks = useMemo(() => {\n    return groupBy(Object.values(auroriansMap), item => item.attribute);\n  }, [auroriansMap]);\n\n  console.log('chunks', chunks);\n  return (\n    <StepsForm formRef={formRef}>\n      <StepsForm.StepForm title=\"完成 Box 名称\">\n        <ProFormText\n          name=\"title\"\n          label=\"Box 名称\"\n          placeholder=\"给 Box 取一个好听的名字\"\n          rules={[{ required: true }]}\n        />\n      </StepsForm.StepForm>\n      <StepsForm.StepForm\n        title=\"选择火属性光灵\"\n        onValuesChange={changed => {\n          console.log('changed', changed);\n        }}\n      >\n        <Form.Item name={'fire'}>\n          <CheckCard.Group multiple>\n            {chunks[AurorianAttributeType.Fire].map(aurorian => (\n              <CheckControlAurorianBoxCard\n                key={aurorian.aurorian_name}\n                name={aurorian.aurorian_name}\n              />\n            ))}\n          </CheckCard.Group>\n        </Form.Item>\n      </StepsForm.StepForm>\n    </StepsForm>\n  );\n};\n","import { PageContainer } from '@ant-design/pro-components';\nimport { CreateMyBoxForm } from '@/components/CreateMyBoxForm';\n\nconst CreateMyBoxPage: React.FC = () => {\n  return (\n    <PageContainer title=\"创建自定义 Box\">\n      <CreateMyBoxForm />\n    </PageContainer>\n  );\n};\n\nexport default CreateMyBoxPage;\n"],"names":["AurorianBoxCard","React","name","breakthrough","onBreakthroughChange","auroriansMap","useModel","AuroriansModel","aurorian","useMemo","cardRef","useRef","useEffect","aurorian_name","then","esm","default","current","style","backgroundImage","catch","_jsxs","className","styles","ref","children","class","attribute","_jsx","alt","src","ClassURLMapper","ElementURLMapper","secondary_attribute","title","aurorian_cn_name","rarity","ConfigProvider","theme","components","Rate","starBg","starSize","value","count","RarityMapper","onChange","t","CheckControlAurorianBoxCard","rest","setBreakthrough","useState","CheckCard","width","height","boxSizing","overflow","cover","CreateMyBoxForm","formRef","chunks","_groupBy","Object","values","item","console","log","StepsForm","StepForm","ProFormText","label","placeholder","rules","required","onValuesChange","changed","Form","Item","Group","multiple","AurorianAttributeType","Fire","map","CreateMyBoxPage","PageContainer"],"sourceRoot":""}
{"version":3,"file":"static/js/async/8651.5b3a554f.js","sources":["../../packages/solution-calculator/dist/es/index.js"],"sourcesContent":["var __defProp = Object.defineProperty;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\n\n// src/lib/helpers/box-without-aurorians-in-copilot.ts\nfunction boxWithoutAuroriansInCopilot(myBox, copilot, { disalbeAlternative }) {\n  const cloneMyBox = __spreadValues({}, myBox);\n  for (const aurorianInCopilot of copilot.aurorian_summaries) {\n    if (!disalbeAlternative && aurorianInCopilot.is_replaceable) {\n      continue;\n    }\n    delete cloneMyBox[aurorianInCopilot.aurorian_name];\n  }\n  return cloneMyBox;\n}\n\n// src/lib/helpers/can-use-copilot.ts\nfunction canUseCopilot(myBox, copilot, { disalbeAlternative }) {\n  for (const aurorianInCopilot of copilot.aurorian_summaries) {\n    if (!disalbeAlternative && aurorianInCopilot.is_replaceable) {\n      continue;\n    }\n    const aurorianInMyBox = myBox[aurorianInCopilot.aurorian_name];\n    if (!aurorianInMyBox) {\n      return false;\n    }\n    if (aurorianInMyBox.breakthrough < aurorianInCopilot.breakthrough) {\n      return false;\n    }\n  }\n  return true;\n}\n\n// src/lib/calculate-all-solutions.ts\nfunction calculateAllSolutions(context, k = 3, { disalbeAlternative } = {}) {\n  const result = {\n    solutions: []\n  };\n  const stack = [\n    {\n      currentCopilotIndex: 0,\n      currentScenario: [],\n      remainingBox: context.availableBox,\n      count: k\n    }\n  ];\n  while (stack.length > 0) {\n    const { currentCopilotIndex, currentScenario, remainingBox, count } = stack.pop();\n    if (count === 0 || currentCopilotIndex === context.copilots.length) {\n      if (currentScenario.length >= k) {\n        result.solutions.push({\n          copilots: [...currentScenario],\n          totalScore: currentScenario.reduce(\n            (score, next) => score + BigInt(next.score),\n            BigInt(0)\n          )\n        });\n      }\n    } else {\n      const currentCopilot = context.copilots[currentCopilotIndex];\n      if (canUseCopilot(remainingBox, currentCopilot, { disalbeAlternative })) {\n        const newRemainingBox = boxWithoutAuroriansInCopilot(\n          remainingBox,\n          currentCopilot,\n          { disalbeAlternative }\n        );\n        stack.push({\n          currentCopilotIndex: currentCopilotIndex + 1,\n          currentScenario: [...currentScenario, currentCopilot],\n          remainingBox: newRemainingBox,\n          count: count - 1\n        });\n      }\n      stack.push({\n        currentCopilotIndex: currentCopilotIndex + 1,\n        currentScenario,\n        remainingBox,\n        count\n      });\n    }\n  }\n  result.solutions.sort((a, b) => Number(b.totalScore - a.totalScore));\n  return result;\n}\n\n// src/index.ts\nself.addEventListener(\"message\", (event) => {\n  const { context, k, options } = event.data;\n  const result = calculateAllSolutions(context, k, options);\n  self.postMessage(result);\n});\n"],"names":["__defProp","Object","defineProperty","__getOwnPropSymbols","getOwnPropertySymbols","__hasOwnProp","prototype","hasOwnProperty","__propIsEnum","propertyIsEnumerable","__defNormalProp","obj","key","value","enumerable","configurable","writable","__spreadValues","a","b","prop","call","self","addEventListener","event","context","k","options","data","result","calculateAllSolutions","disalbeAlternative","solutions","stack","currentCopilotIndex","currentScenario","remainingBox","availableBox","count","length","pop","copilots","push","totalScore","reduce","score","next","BigInt","currentCopilot","canUseCopilot","myBox","copilot","aurorianInCopilot","aurorian_summaries","is_replaceable","aurorianInMyBox","aurorian_name","breakthrough","newRemainingBox","boxWithoutAuroriansInCopilot","cloneMyBox","sort","Number","postMessage"],"mappings":"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"}
"use strict";(globalThis.webpackChunk_sinsa_web=globalThis.webpackChunk_sinsa_web||[]).push([[9638],{49542:(e,t,a)=>{a.r(t),a.d(t,{default:()=>E});var r=a(19279),n=a(83584),s=a(16799),i=a(87363),o=a.n(i);function l(e){return fetch(e).then((e=>e.json()))}var c=a(13065),u=a(81821),d=a(98187),m=a(3630),h=a(42357),b=a(97458);const p=()=>{const[{firstTerm:e}]=(0,c.tT)(m.d);return(0,b.jsx)(u.Result,{status:"404",title:"\u8352\u5178\u4f5c\u4e1a\u4e0d\u89c1\u4e86",subTitle:"\u68c0\u67e5\u94fe\u63a5\u662f\u5426\u6b63\u786e\u6216\u8fd4\u56de\u6700\u8fd1\u8352\u5178\u4f5c\u4e1a",extra:e?(0,b.jsx)(d.rU,{to:h.h.Copilots(e.term),children:(0,b.jsx)(u.Button,{type:"primary",children:"\u8fd4\u56de\u6700\u8fd1\u4f5c\u4e1a"})}):(0,b.jsx)(d.rU,{to:h.h.Home,children:(0,b.jsx)(u.Button,{type:"primary",children:"\u8fd4\u56de\u9996\u9875"})})})},x=()=>{const e=(0,r.UO)(),[t]=(0,c.tT)(m.d),a=(0,r.s0)();return(0,b.jsx)(u.Select,{value:e.term&&Number.parseInt(e.term,10),options:t.termsOptions,placeholder:"\u8352\u5178\u671f\u6570",onChange:e=>{a(h.h.Copilots(e))}})};var g=a(32541),j=a(10389),v=a(48636),y=a(55950),f=a.n(y),_=a(82547);function S(e,t,{disalbeAlternative:a}){return(0,_.Uy)(e,(e=>{for(const r of t.aurorian_summaries)!a&&r.is_replaceable||delete e[r.aurorian_name]}))}function C(e,t,{disalbeAlternative:a}){for(const r of t.aurorian_summaries){if(!a&&r.is_replaceable)continue;const t=e[r.aurorian_name];if(!t)return!1;if(t.breakthrough<r.breakthrough)return!1}return!0}var T=a(38259),k=a(64419);const B="AurorianCard-Xue7wW",w="MetaContainer-VBs_Be",I="MetaClass-oogC_v",A="MetaAttributeContainer-oaQn6c",N="MetaFirstAttribute-bRrn32",M="MetaSecondAttribute-C0kSzr",R="NameContainer-zUDWby",z="BreakThrough-eMpTUR";var U=a(67103);const O=o().memo((({name:e,breakthrough:t,isReplaceable:r})=>{const[{auroriansMap:n}]=(0,c.tT)(T.b),s=(0,i.useMemo)((()=>n[e]),[n,e]),o=(0,i.useRef)(null);return(0,i.useEffect)((()=>{s?.aurorian_name&&a(1798)(`./${s.aurorian_name}.webp`).then((e=>{"string"==typeof e?.default&&o.current&&(o.current.style.backgroundImage=`url(${e.default})`)})).catch((()=>{}))}),[s?.aurorian_name]),(0,b.jsx)(u.Badge.Ribbon,{style:{fontSize:"12px",display:r?"block":"none",zIndex:1e4},text:r?"\u53ef\u66ff":void 0,children:(0,b.jsxs)("div",{className:B,ref:o,children:[s?.class&&s?.attribute?(0,b.jsxs)("div",{className:w,children:[(0,b.jsx)("img",{className:I,alt:s.class,src:U.T2[s.class]}),(0,b.jsxs)("div",{className:A,children:[(0,b.jsx)("img",{className:N,alt:s.attribute,src:U.nP[s.attribute]}),s.secondary_attribute?(0,b.jsx)("img",{className:M,alt:s.secondary_attribute,src:U.nP[s.secondary_attribute]}):null]})]}):null,(0,b.jsxs)("div",{className:R,children:[(0,b.jsx)("div",{title:s?.aurorian_name,children:s?.aurorian_cn_name}),s?.rarity?(0,b.jsx)(u.ConfigProvider,{theme:{components:{Rate:{starBg:"white",starSize:10}}},children:(0,b.jsx)(u.Rate,{className:z,disabled:!0,value:t,count:U.gW[s.rarity]})}):null]})]})})})),Z="AuroriansTeam-bW_gmF",F=({aurorianSummaries:e})=>(0,b.jsx)("div",{className:Z,children:e.map((({aurorian_name:e,breakthrough:t,is_replaceable:a})=>(0,b.jsx)(O,{name:e,breakthrough:t,isReplaceable:a},e)))}),P=[{title:"\u5149\u7075\u914d\u7f6e",dataIndex:"aurorian_summaries",hideInSearch:!0,render:(e,t)=>(0,b.jsx)(F,{aurorianSummaries:t.aurorian_summaries}),width:448},{title:"\u7ed3\u7b97\u5206\u6570",dataIndex:"score",valueType:"digit",width:130,hideInSearch:!0},{title:"\u4f5c\u8005",dataIndex:"author",valueType:"select",hideInSearch:!0,ellipsis:!0,width:150},{title:"\u6807\u9898",dataIndex:"title",ellipsis:!0,render:(e,t)=>(0,b.jsx)(u.Typography.Link,{href:`https://b23.tv/${t.bv}`,target:"_blank",title:t.title,children:t.title})},{title:"\u4e0a\u4f20\u65f6\u95f4",dataIndex:"upload_time",valueType:"dateTime",width:160}];function W(e){return e.bv}const $={pagination:{pageSize:5,size:"default",position:["bottomCenter"]},scroll:{x:"max-content",scrollToFirstRowOnChange:!0},toolbar:{title:"\u6536\u5f55\u4f5c\u4e1a"}},q=({dataSource:e,term:t})=>{const a=(0,i.useRef)(),r=(0,i.useMemo)((()=>({term:t})),[t]),n=(0,i.useCallback)((async t=>({data:e.filter((e=>{let a=!0;return t.title&&(a=e.title.includes(t.title)),a})),success:!0})),[]);return(0,b.jsx)(k.Z,{rowKey:W,actionRef:a,columns:P,params:r,request:n,...$})},L=({solution:e,title:t})=>{const a=(0,i.useCallback)((async()=>({data:(0,_.Uy)(e.copilots,(e=>{e.sort(((e,t)=>Number(t.score-e.score)))})),success:!0})),[]),r=(0,i.useMemo)((()=>({title:t,settings:[]})),[t]),n=(0,i.useMemo)((()=>({x:"max-content"})),[]);return(0,b.jsx)(k.Z,{toolbar:r,rowKey:W,columns:P,request:a,search:!1,pagination:!1,size:"small",scroll:n})},K=({dataSource:e})=>{const[{WHOLE_BOX:t}]=(0,c.tT)(T.b),[a,r]=(0,i.useState)();return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(u.Typography.Title,{level:3,children:"\u5bfb\u627e\u961f\u4f0d\u65b9\u6848"}),(0,b.jsxs)(g.t,{defaultCollapsed:!0,onFinish:async a=>{const n=function(e,t=3,{disalbeAlternative:a}={}){const r={scenarios:[]},n=[{currentCopilotIndex:0,currentScenario:[],remainingBox:e.availableBox,count:t}];for(;n.length>0;){const{currentCopilotIndex:s,currentScenario:i,remainingBox:o,count:l}=n.pop();if(0===l||s===e.copilots.length)i.length>=t&&r.scenarios.push({copilots:[...i],totalScore:i.reduce(((e,t)=>e+BigInt(t.score)),BigInt(0))});else{const t=e.copilots[s];if(C(o,t,{disalbeAlternative:a})){const e=S(o,t,{disalbeAlternative:a});n.push({currentCopilotIndex:s+1,currentScenario:[...i,t],remainingBox:e,count:l-1})}n.push({currentCopilotIndex:s+1,currentScenario:i,remainingBox:o,count:l})}}return r.scenarios.sort(((e,t)=>Number(t.totalScore-e.totalScore))),r}({copilots:e,availableBox:t.aurorian_summaries},a.k,{disalbeAlternative:a.disalbeAlternative});r(n)},searchText:"\u5bfb\u627e\u961f\u4f0d\u65b9\u6848",initialValues:{k:3,box:"whole"},layout:"vertical",children:[(0,b.jsx)(j.Z.Group,{name:"k",label:"\u961f\u4f0d\u6570\u91cf",rules:[{required:!0}],options:[{label:"\u4e24\u652f\u961f\u4f0d",value:2},{label:"\u4e09\u652f\u961f\u4f0d",value:3},{label:"\u56db\u652f\u961f\u4f0d",value:4}],allowClear:!1,radioType:"button"}),(0,b.jsx)(j.Z.Group,{name:"box",label:"Box \u5339\u914d",options:[{label:"\u5168\u56fe\u9274\u6ee1\u7a81\u7834 Box",value:"whole"},{label:"\u6211\u7684\u81ea\u5b9a\u4e49 Box",value:"my-box",disabled:!0}],allowClear:!1,radioType:"button",rules:[{required:!0}]}),(0,b.jsx)(v.Z,{name:"disalbeAlternative",label:"\u4e0d\u8003\u8651\u53ef\u66ff\u81ea\u7531\u4f4d",tooltip:"\u5f00\u542f\u540e\uff0c\u8ba1\u7b97\u7684\u961f\u4f0d\u65b9\u6848\u4e2d\u7edd\u5bf9\u4e0d\u4f1a\u51fa\u73b0\u91cd\u590d\u5149\u7075\uff0c\u6ee1\u8db3\u56fe\u9274\u5927\u4f6c\u7684\u5f3a\u8feb\u75c7"})]}),a?.scenarios.length?(0,b.jsxs)(u.Typography.Paragraph,{children:["\u5df2\u4e3a\u60a8\u627e\u5230 ",a?.scenarios.length," ","\u4e2a\u961f\u4f0d\u65b9\u6848\uff0c\u603b\u5206\u6570\u7531\u9ad8\u81f3\u4f4e\u6392\u5217"]}):null,(0,b.jsx)(u.List,{dataSource:a?.scenarios,pagination:{align:"center"},rowKey:e=>e.copilots.map((e=>e.bv)).join(""),renderItem:e=>(0,b.jsx)("div",{style:{marginBottom:"1rem"},children:(0,b.jsx)(L,{solution:e,title:`\u65b9\u6848: ${f()(e.totalScore).format("0,0")} \u5206`})},e.copilots.map((e=>e.bv)).join(""))})]})},E=()=>{const e=(0,r.UO)(),{data:t,error:a,isLoading:o}=(0,n.ZP)(`/api/copilots/${e.term}.json`,l),c=(0,i.useMemo)((()=>Object.values(t??[])),[t]);return a?(0,b.jsx)(p,{}):(0,b.jsxs)(s._z,{content:(0,b.jsx)(x,{}),title:"\u8352\u5178\u4f5c\u4e1a",loading:o,children:[(0,b.jsx)(q,{term:e.term,dataSource:c}),(0,b.jsx)(K,{dataSource:c})]})}}}]);
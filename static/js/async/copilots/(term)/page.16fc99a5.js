"use strict";(globalThis.webpackChunk_sinsa_web=globalThis.webpackChunk_sinsa_web||[]).push([[9638],{72555:(e,a,r)=>{r.r(a),r.d(a,{default:()=>Y});var t=r(19279),n=r(83584),s=r(16799),o=r(87363),l=r.n(o);function i(e){return fetch(e).then((e=>e.json()))}var u=r(13065),c=r(81821),d=r(98187),m=r(3630),h=r(42357),x=r(97458);const b=()=>{const[{firstTerm:e}]=(0,u.tT)(m.d);return(0,x.jsx)(c.Result,{status:"404",title:"\u8352\u5178\u4f5c\u4e1a\u4e0d\u89c1\u4e86",subTitle:"\u68c0\u67e5\u94fe\u63a5\u662f\u5426\u6b63\u786e\u6216\u8fd4\u56de\u6700\u8fd1\u8352\u5178\u4f5c\u4e1a",extra:e?(0,x.jsx)(d.rU,{to:h.h.Copilots(e.term),children:(0,x.jsx)(c.Button,{type:"primary",children:"\u8fd4\u56de\u6700\u8fd1\u4f5c\u4e1a"})}):(0,x.jsx)(d.rU,{to:h.h.Home,children:(0,x.jsx)(c.Button,{type:"primary",children:"\u8fd4\u56de\u9996\u9875"})})})},p=()=>{const e=(0,t.UO)(),[a]=(0,u.tT)(m.d),r=(0,t.s0)();return(0,x.jsx)(c.Select,{value:e.term&&Number.parseInt(e.term,10),options:a.termsOptions,placeholder:"\u8352\u5178\u671f\u6570",onChange:e=>{r(h.h.Copilots(e))}})};var g=r(32479),j=r(10389),v=r(48636),y=r(92921),f=r(55950),B=r.n(f),S=r(82547);function k(e,a,{disalbeAlternative:r}){return(0,S.Uy)(e,(e=>{for(const t of a.aurorian_summaries)!r&&t.is_replaceable||delete e[t.aurorian_name]}))}function _(e,a,{disalbeAlternative:r}){for(const t of a.aurorian_summaries){if(!r&&t.is_replaceable)continue;const a=e[t.aurorian_name];if(!a)return!1;if(a.breakthrough<t.breakthrough)return!1}return!0}var w=r(38259),T=r(64419),C=r(28934);const N="AurorianCard-Xue7wW",I="SameSize-ttH5Jw",A="MetaContainer-VBs_Be",M="SameSizeMeta-jxMufu",O="MetaAttributeContainer-oaQn6c",Z="MetaClass-oogC_v",z="MetaFirstAttribute-bRrn32",R="MetaSecondAttribute-C0kSzr",U="NameContainer-zUDWby",W="BreakThrough-eMpTUR";var F=r(67103);const P=l().memo((({name:e,breakthrough:a,isReplaceable:t,sameSize:n})=>{const[{auroriansMap:s}]=(0,u.tT)(w.b),l=(0,o.useMemo)((()=>s[e]),[s,e]),i=(0,o.useRef)(null);return(0,o.useEffect)((()=>{l?.aurorian_name&&r(1798)(`./${l.aurorian_name}.webp`).then((e=>{"string"==typeof e?.default&&i.current&&(i.current.style.backgroundImage=`url(${e.default})`)})).catch((()=>{}))}),[l?.aurorian_name]),(0,x.jsx)(c.Badge.Ribbon,{style:{fontSize:"12px",display:t?"block":"none",zIndex:1e4},text:t?"\u53ef\u66ff":void 0,children:(0,x.jsxs)("div",{className:(0,C.W)(N,n&&I),ref:i,children:[l?.class&&l?.attribute?(0,x.jsxs)("div",{className:(0,C.W)(A,n&&M),children:[(0,x.jsx)("img",{className:Z,alt:l.class,src:F.T2[l.class]}),(0,x.jsxs)("div",{className:O,children:[(0,x.jsx)("img",{className:z,alt:l.attribute,src:F.nP[l.attribute]}),l.secondary_attribute?(0,x.jsx)("img",{className:R,alt:l.secondary_attribute,src:F.nP[l.secondary_attribute]}):null]})]}):null,(0,x.jsxs)("div",{className:U,children:[(0,x.jsx)("div",{title:l?.aurorian_name,children:l?.aurorian_cn_name}),"number"==typeof a&&l?.rarity?(0,x.jsx)(c.ConfigProvider,{theme:{components:{Rate:{starBg:"white",starSize:10}}},children:(0,x.jsx)(c.Rate,{className:W,disabled:!0,value:a,count:F.gW[l.rarity]})}):null]})]})})})),$="AuroriansTeam-bW_gmF",q=({aurorianSummaries:e})=>(0,x.jsx)("div",{className:$,children:e.map((({aurorian_name:e,breakthrough:a,is_replaceable:r})=>(0,x.jsx)(P,{name:e,breakthrough:a,isReplaceable:r},e)))}),E=[{title:"\u5149\u7075\u914d\u7f6e",dataIndex:"aurorian_summaries",hideInSearch:!0,render:(e,a)=>(0,x.jsx)(q,{aurorianSummaries:a.aurorian_summaries}),width:448},{title:"\u7ed3\u7b97\u5206\u6570",dataIndex:"score",valueType:"digit",width:130,hideInSearch:!0},{title:"\u4f5c\u8005",dataIndex:"author",valueType:"select",hideInSearch:!0,ellipsis:!0,width:160,renderText:(e,a)=>(0,x.jsxs)(x.Fragment,{children:[e,(0,x.jsx)(c.Tooltip,{title:a.description,children:a.description?"\u{1f5d2}":null})]})},{title:"\u6807\u9898",dataIndex:"title",ellipsis:!0,render:(e,a)=>(0,x.jsx)(c.Typography.Link,{href:`https://b23.tv/${a.bv}`,target:"_blank",title:a.title,children:a.title})},{title:"\u4e0a\u4f20\u65f6\u95f4",dataIndex:"upload_time",valueType:"dateTime",width:160}];function G(e){return e.bv}const L={pagination:{pageSize:5,size:"default",position:["bottomCenter"]},scroll:{x:"max-content",scrollToFirstRowOnChange:!0},toolbar:{title:"\u6536\u5f55\u4f5c\u4e1a"}},H=({dataSource:e,term:a})=>{const r=(0,o.useRef)(),t=(0,o.useMemo)((()=>({term:a})),[a]),n=(0,o.useCallback)((async a=>({data:e.filter((e=>{let r=!0;return a.title&&(r=e.title.includes(a.title)),r})),success:!0})),[]);return(0,x.jsx)(T.Z,{rowKey:G,actionRef:r,columns:E,params:t,request:n,...L})},K=({solution:e,title:a})=>{const r=(0,o.useCallback)((async()=>({data:(0,S.Uy)(e.copilots,(e=>{e.sort(((e,a)=>Number(a.score-e.score)))})),success:!0})),[]),t=(0,o.useMemo)((()=>({title:a,settings:[]})),[a]),n=(0,o.useMemo)((()=>({x:"max-content"})),[]);return(0,x.jsx)(T.Z,{toolbar:t,rowKey:G,columns:E,request:r,search:!1,pagination:!1,size:"small",scroll:n})};var D=r(97822),V=r(46855),X=r(12781);const J=({name:e,...a})=>{const[{auroriansOptions:r,auroriansMap:t}]=(0,u.tT)(w.b);return(0,x.jsx)(D.u,{...a,creatorButtonProps:{creatorButtonText:"\u6dfb\u52a0\u6392\u9664\u7684\u5149\u7075"},name:e,alwaysShowItemLabel:!0,children:()=>(0,x.jsxs)(g.A.Group,{children:[(0,x.jsx)(V.Z,{label:"\u6392\u9664\u7684\u5149\u7075",name:"aurorianName",options:r,allowClear:!0,showSearch:!0,width:"sm",rules:[{required:!0}]}),(0,x.jsx)(y.Z,{name:["aurorianName"],children:({aurorianName:e})=>e?(0,x.jsx)(P,{sameSize:!0,name:e}):null},"excludeBreakthroughOnly"),(0,x.jsx)(y.Z,{name:["aurorianName"],children:({aurorianName:e})=>e?(0,x.jsx)(v.Z,{label:"\u4ec5\u6392\u9664\u7a81\u7834",name:"excludeBreakthroughOnly"}):null},"excludeBreakthroughOnly"),(0,x.jsx)(y.Z,{name:["aurorianName","excludeBreakthroughOnly"],children:({aurorianName:e,excludeBreakthroughOnly:a})=>{const r=t[e];return a&&r?(0,x.jsx)(X.Z,{name:"excludeBreakthrough",label:"\u6392\u9664\u7a81\u7834\u6570",fieldProps:{count:F.gW[r.rarity],allowHalf:!1},tooltip:"\u6b64\u7a81\u7834\u6570\u4ee5\u4e0a\u7684\u5149\u7075\u4f1a\u88ab\u6392\u9664\uff0c\u4f46\u4e0d\u4f1a\u6392\u9664\u96f6\u7834\u7684\u6b64\u5149\u7075"}):null}},"excludeBreakthrough")]})})},Q=({dataSource:e})=>{const[{WHOLE_BOX:a}]=(0,u.tT)(w.b),[r,t]=(0,o.useState)();return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(c.Typography.Title,{level:3,children:"\u5bfb\u627e\u961f\u4f0d\u65b9\u6848"}),(0,x.jsx)(g.A,{onFinish:async r=>{let n=a.aurorian_summaries;r.exclude&&(n=(0,S.Uy)(a.aurorian_summaries,(e=>{for(const a of r.exclude)a.excludeBreakthroughOnly?"number"==typeof a.excludeBreakthrough&&a.excludeBreakthrough>=1&&(e[a.aurorianName].breakthrough=a.excludeBreakthrough-1):delete e[a.aurorianName]})));const s=function(e,a=3,{disalbeAlternative:r}={}){const t={scenarios:[]},n=[{currentCopilotIndex:0,currentScenario:[],remainingBox:e.availableBox,count:a}];for(;n.length>0;){const{currentCopilotIndex:s,currentScenario:o,remainingBox:l,count:i}=n.pop();if(0===i||s===e.copilots.length)o.length>=a&&t.scenarios.push({copilots:[...o],totalScore:o.reduce(((e,a)=>e+BigInt(a.score)),BigInt(0))});else{const a=e.copilots[s];if(_(l,a,{disalbeAlternative:r})){const e=k(l,a,{disalbeAlternative:r});n.push({currentCopilotIndex:s+1,currentScenario:[...o,a],remainingBox:e,count:i-1})}n.push({currentCopilotIndex:s+1,currentScenario:o,remainingBox:l,count:i})}}return t.scenarios.sort(((e,a)=>Number(a.totalScore-e.totalScore))),t}({copilots:e,availableBox:n},r.k,{disalbeAlternative:r.disalbeAlternative});s.scenarios?.length&&c.message.success(`\u5df2\u4e3a\u60a8\u627e\u5230 ${s?.scenarios?.length} \u4e2a\u961f\u4f0d\u65b9\u6848\uff0c\u603b\u5206\u6570\u7531\u9ad8\u81f3\u4f4e\u6392\u5217`),t(s)},initialValues:{k:3,box:"whole"},layout:"vertical",submitter:{searchConfig:{submitText:"\u5bfb\u627e\u961f\u4f0d\u65b9\u6848"}},children:(0,x.jsxs)(g.A.Group,{children:[(0,x.jsx)(j.Z.Group,{name:"k",label:"\u961f\u4f0d\u6570\u91cf",rules:[{required:!0}],options:[{label:"\u4e24\u652f\u961f\u4f0d",value:2},{label:"\u4e09\u652f\u961f\u4f0d",value:3},{label:"\u56db\u652f\u961f\u4f0d",value:4}],allowClear:!1,radioType:"button"}),(0,x.jsx)(j.Z.Group,{name:"box",label:"Box \u5339\u914d",options:[{label:"\u5168\u56fe\u9274\u6ee1\u7a81\u7834 Box",value:"whole"},{label:"\u6211\u7684\u81ea\u5b9a\u4e49 Box",value:"my-box",disabled:!0}],allowClear:!1,radioType:"button",rules:[{required:!0}],extra:"\u81ea\u5b9a\u4e49 Box \u5339\u914d\u6682\u4e0d\u652f\u6301\uff0c\u65e0\u6cd5\u9009\u4e2d\uff0c\u656c\u8bf7\u671f\u5f85w"}),(0,x.jsx)(v.Z,{name:"disalbeAlternative",label:"\u4e0d\u8003\u8651\u53ef\u66ff\u81ea\u7531\u4f4d",tooltip:"\u5f00\u542f\u540e\uff0c\u8ba1\u7b97\u7684\u961f\u4f0d\u65b9\u6848\u4e2d\u7edd\u5bf9\u4e0d\u4f1a\u51fa\u73b0\u91cd\u590d\u5149\u7075\uff0c\u6ee1\u8db3\u56fe\u9274\u5927\u4f6c\u7684\u5f3a\u8feb\u75c7"}),(0,x.jsxs)(g.A.Group,{children:[(0,x.jsx)(v.Z,{name:"enableExclude",label:"\u989d\u5916\u6392\u9664\u5149\u7075",tooltip:"\u6392\u9664\u5149\u7075\u4f1a\u5ffd\u7565\u53ef\u66ff\u81ea\u7531\u4f4d"}),(0,x.jsx)(y.Z,{name:["enableExclude"],children:({enableExclude:e})=>e?(0,x.jsx)(J,{name:"exclude"}):null})]})]})}),(0,x.jsx)(c.Divider,{}),(0,x.jsx)(c.List,{dataSource:r?.scenarios,pagination:{align:"center"},rowKey:e=>e.copilots.map((e=>e.bv)).join(""),renderItem:e=>(0,x.jsx)("div",{style:{marginBottom:"1rem"},children:(0,x.jsx)(K,{solution:e,title:`\u65b9\u6848: ${B()(e.totalScore).format("0,0")} \u5206`})},e.copilots.map((e=>e.bv)).join(""))})]})},Y=()=>{const e=(0,t.UO)(),{data:a,error:r,isLoading:l}=(0,n.ZP)(`/api/copilots/${e.term}.json`,i),u=(0,o.useMemo)((()=>Object.values(a??[])),[a]);return r?(0,x.jsx)(b,{}):(0,x.jsxs)(s._z,{content:(0,x.jsx)(p,{}),title:"\u8352\u5178\u4f5c\u4e1a",loading:l,children:[(0,x.jsx)(H,{term:e.term,dataSource:u}),(0,x.jsx)(Q,{dataSource:u})]})}}}]);
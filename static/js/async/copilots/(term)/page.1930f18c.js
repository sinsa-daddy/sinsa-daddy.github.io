"use strict";(globalThis.webpackChunk_sinsa_web=globalThis.webpackChunk_sinsa_web||[]).push([[9638],{49542:(e,t,a)=>{a.r(t),a.d(t,{default:()=>K});var r=a(19279),s=a(83584),n=a(16799),i=a(87363),l=a.n(i);function o(e){return fetch(e).then((e=>e.json()))}var c=a(13065),u=a(81821),d=a(98187),m=a(3630),b=a(42357),h=a(97458);const p=()=>{const[{firstTerm:e}]=(0,c.tT)(m.d);return(0,h.jsx)(u.Result,{status:"404",title:"\u8352\u5178\u4f5c\u4e1a\u4e0d\u89c1\u4e86",subTitle:"\u68c0\u67e5\u94fe\u63a5\u662f\u5426\u6b63\u786e\u6216\u8fd4\u56de\u6700\u8fd1\u8352\u5178\u4f5c\u4e1a",extra:e?(0,h.jsx)(d.rU,{to:b.h.Copilots(e.term),children:(0,h.jsx)(u.Button,{type:"primary",children:"\u8fd4\u56de\u6700\u8fd1\u4f5c\u4e1a"})}):(0,h.jsx)(d.rU,{to:b.h.Home,children:(0,h.jsx)(u.Button,{type:"primary",children:"\u8fd4\u56de\u9996\u9875"})})})},x=()=>{const e=(0,r.UO)(),[t]=(0,c.tT)(m.d),a=(0,r.s0)();return(0,h.jsx)(u.Select,{value:e.term&&Number.parseInt(e.term,10),options:t.termsOptions,placeholder:"\u8352\u5178\u671f\u6570",onChange:e=>{a(b.h.Copilots(e))}})};var g=a(32541),v=a(10389),j=a(48636),y=a(55950),f=a.n(y),_=a(82547);function T(e,t=3,{disalbeAlternative:a}={}){const r={scenarios:[]};return function s(n,i,l,o){if(0===o||n===e.copilots.length)return void(l.length>=t&&r.scenarios.push({copilots:[...l],totalScore:l.reduce(((e,t)=>e+BigInt(t.score)),BigInt(0))}));const c=e.copilots[n];if(function(e,t,{disalbeAlternative:a}){for(const r of t.aurorian_summaries){if(!a&&r.is_replaceable)continue;const t=e[r.aurorian_name];if(!t)return!1;if(t.breakthrough<r.breakthrough)return!1}return!0}(i,c,{disalbeAlternative:a})){const e=function(e,t,{disalbeAlternative:a}){return(0,_.Uy)(e,(e=>{for(const r of t.aurorian_summaries)!a&&r.is_replaceable||delete e[r.aurorian_name]}))}(i,c,{disalbeAlternative:a});s(n+1,e,[...l,c],o-1)}s(n+1,i,l,o)}(0,e.availableBox,[],t),r.scenarios=(0,_.Uy)(r.scenarios,(e=>{e.sort(((e,t)=>Number(t.totalScore-e.totalScore)))})),r}var S=a(38259),k=a(64419);const C="AurorianCard-Xue7wW",w="MetaContainer-VBs_Be",B="MetaClass-oogC_v",I="MetaAttributeContainer-oaQn6c",A="MetaFirstAttribute-bRrn32",N="MetaSecondAttribute-C0kSzr",M="NameContainer-zUDWby",R="BreakThrough-eMpTUR";var z=a(67103);const U=l().memo((({name:e,breakthrough:t,isReplaceable:r})=>{const[{auroriansMap:s}]=(0,c.tT)(S.b),n=(0,i.useMemo)((()=>s[e]),[s,e]),l=(0,i.useRef)(null);return(0,i.useEffect)((()=>{n?.aurorian_name&&a(1798)(`./${n.aurorian_name}.webp`).then((e=>{"string"==typeof e?.default&&l.current&&(l.current.style.backgroundImage=`url(${e.default})`)})).catch((()=>{}))}),[n?.aurorian_name]),(0,h.jsx)(u.Badge.Ribbon,{style:{fontSize:"12px",display:r?"block":"none",zIndex:1e4},text:r?"\u53ef\u66ff":void 0,children:(0,h.jsxs)("div",{className:C,ref:l,children:[n?.class&&n?.attribute?(0,h.jsxs)("div",{className:w,children:[(0,h.jsx)("img",{className:B,alt:n.class,src:z.T2[n.class]}),(0,h.jsxs)("div",{className:I,children:[(0,h.jsx)("img",{className:A,alt:n.attribute,src:z.nP[n.attribute]}),n.secondary_attribute?(0,h.jsx)("img",{className:N,alt:n.secondary_attribute,src:z.nP[n.secondary_attribute]}):null]})]}):null,(0,h.jsxs)("div",{className:M,children:[(0,h.jsx)("div",{title:n?.aurorian_name,children:n?.aurorian_cn_name}),n?.rarity?(0,h.jsx)(u.ConfigProvider,{theme:{components:{Rate:{starBg:"white",starSize:10}}},children:(0,h.jsx)(u.Rate,{className:R,disabled:!0,value:t,count:z.gW[n.rarity]})}):null]})]})})})),O="AuroriansTeam-bW_gmF",Z=({aurorianSummaries:e})=>(0,h.jsx)("div",{className:O,children:e.map((({aurorian_name:e,breakthrough:t,is_replaceable:a})=>(0,h.jsx)(U,{name:e,breakthrough:t,isReplaceable:a},e)))}),F=[{title:"\u5149\u7075\u914d\u7f6e",dataIndex:"aurorian_summaries",hideInSearch:!0,render:(e,t)=>(0,h.jsx)(Z,{aurorianSummaries:t.aurorian_summaries}),width:448},{title:"\u7ed3\u7b97\u5206\u6570",dataIndex:"score",valueType:"digit",width:130,hideInSearch:!0},{title:"\u4f5c\u8005",dataIndex:"author",valueType:"select",hideInSearch:!0,ellipsis:!0,width:150},{title:"\u6807\u9898",dataIndex:"title",ellipsis:!0,render:(e,t)=>(0,h.jsx)(u.Typography.Link,{href:`https://b23.tv/${t.bv}`,target:"_blank",title:t.title,children:t.title})},{title:"\u4e0a\u4f20\u65f6\u95f4",dataIndex:"upload_time",valueType:"dateTime",width:160}];function P(e){return e.bv}const W={pagination:{pageSize:5,size:"default",position:["bottomCenter"]},scroll:{x:"max-content",scrollToFirstRowOnChange:!0},toolbar:{title:"\u6536\u5f55\u4f5c\u4e1a"}},$=({dataSource:e,term:t})=>{const a=(0,i.useRef)(),r=(0,i.useMemo)((()=>({term:t})),[t]),s=(0,i.useCallback)((async t=>({data:e.filter((e=>{let a=!0;return t.title&&(a=e.title.includes(t.title)),a})),success:!0})),[]);return(0,h.jsx)(k.Z,{rowKey:P,actionRef:a,columns:F,params:r,request:s,...W})},q=({solution:e,title:t})=>{const a=(0,i.useCallback)((async()=>({data:(0,_.Uy)(e.copilots,(e=>{e.sort(((e,t)=>Number(t.score-e.score)))})),success:!0})),[]),r=(0,i.useMemo)((()=>({title:t,settings:[]})),[t]),s=(0,i.useMemo)((()=>({x:"max-content"})),[]);return(0,h.jsx)(k.Z,{toolbar:r,rowKey:P,columns:F,request:a,search:!1,pagination:!1,size:"small",scroll:s})},L=({dataSource:e})=>{const[{WHOLE_BOX:t}]=(0,c.tT)(S.b),[a,r]=(0,i.useState)();return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(u.Typography.Title,{level:3,children:"\u5bfb\u627e\u961f\u4f0d\u65b9\u6848"}),(0,h.jsxs)(g.t,{defaultCollapsed:!0,onFinish:async a=>{const s=T({copilots:e,availableBox:t.aurorian_summaries},a.k,{disalbeAlternative:a.disalbeAlternative});r(s)},searchText:"\u5bfb\u627e\u961f\u4f0d\u65b9\u6848",initialValues:{k:3,box:"whole"},layout:"vertical",children:[(0,h.jsx)(v.Z.Group,{name:"k",label:"\u961f\u4f0d\u6570\u91cf",rules:[{required:!0}],options:[{label:"\u4e24\u652f\u961f\u4f0d",value:2},{label:"\u4e09\u652f\u961f\u4f0d",value:3},{label:"\u56db\u652f\u961f\u4f0d",value:4}],allowClear:!1,radioType:"button"}),(0,h.jsx)(v.Z.Group,{name:"box",label:"Box \u5339\u914d",options:[{label:"\u5168\u56fe\u9274\u6ee1\u7a81\u7834 Box",value:"whole"},{label:"\u6211\u7684\u81ea\u5b9a\u4e49 Box",value:"my-box",disabled:!0}],allowClear:!1,radioType:"button",rules:[{required:!0}]}),(0,h.jsx)(j.Z,{name:"disalbeAlternative",label:"\u4e0d\u8003\u8651\u53ef\u66ff\u81ea\u7531\u4f4d",tooltip:"\u5f00\u542f\u540e\uff0c\u8ba1\u7b97\u7684\u961f\u4f0d\u65b9\u6848\u4e2d\u7edd\u5bf9\u4e0d\u4f1a\u51fa\u73b0\u91cd\u590d\u5149\u7075\uff0c\u6ee1\u8db3\u56fe\u9274\u5927\u4f6c\u7684\u5f3a\u8feb\u75c7"})]}),a?.scenarios.length?(0,h.jsxs)(u.Typography.Paragraph,{children:["\u5df2\u4e3a\u60a8\u627e\u5230 ",a?.scenarios.length," ","\u4e2a\u961f\u4f0d\u65b9\u6848\uff0c\u603b\u5206\u6570\u7531\u9ad8\u81f3\u4f4e\u6392\u5217"]}):null,(0,h.jsx)(u.List,{dataSource:a?.scenarios,pagination:{align:"center"},rowKey:e=>e.copilots.map((e=>e.bv)).join(""),renderItem:e=>(0,h.jsx)("div",{style:{marginBottom:"1rem"},children:(0,h.jsx)(q,{solution:e,title:`\u65b9\u6848: ${f()(e.totalScore).format("0,0")} \u5206`})},e.copilots.map((e=>e.bv)).join(""))})]})},K=()=>{const e=(0,r.UO)(),{data:t,error:a,isLoading:l}=(0,s.ZP)(`/api/copilots/${e.term}.json`,o),c=(0,i.useMemo)((()=>Object.values(t??[])),[t]);return a?(0,h.jsx)(p,{}):(0,h.jsxs)(n._z,{content:(0,h.jsx)(x,{}),title:"\u8352\u5178\u4f5c\u4e1a",loading:l,children:[(0,h.jsx)($,{term:e.term,dataSource:c}),(0,h.jsx)(L,{dataSource:c})]})}}}]);
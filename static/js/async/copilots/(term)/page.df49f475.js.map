{"version":3,"file":"static/js/async/copilots/(term)/page.df49f475.js","sources":["./src/routes/copilots/[term]/page.tsx","./src/views/CopilotsView/CopilotListView/index.tsx","./src/views/CopilotsView/index.tsx"],"sourcesContent":["/* eslint-disable no-nested-ternary */\nimport { useRequest } from 'ahooks';\nimport { PageContainer } from '@ant-design/pro-components';\nimport { useMemo } from 'react';\nimport { TermNotFound } from '@/components/TermNotFound';\nimport { TermChanger, useTargetTermFromParams } from '@/components/TermChanger';\nimport { getCopilots } from '@/services/http';\nimport { RoutePath } from '@/views/GlobalLayout/constants';\nimport { CopilotsView } from '@/views/CopilotsView';\n\nconst CopilotsPage: React.FC = () => {\n  const { targetTerm: currentTerm } = useTargetTermFromParams();\n  const { data, error, loading } = useRequest(\n    () =>\n      currentTerm?.term\n        ? getCopilots(currentTerm.term)\n        : (Promise.resolve({}) as ReturnType<typeof getCopilots>),\n    { ready: Boolean(currentTerm?.term), refreshDeps: [currentTerm?.term] },\n  );\n\n  const copilots = useMemo(() => Object.values(data ?? []), [data]);\n\n  return (\n    <PageContainer\n      content={<TermChanger pathFn={RoutePath.Copilots} />}\n      title=\"作业全览\"\n      loading={loading}\n    >\n      {error ? (\n        <TermNotFound />\n      ) : currentTerm ? (\n        <CopilotsView currentTerm={currentTerm} copilots={copilots} />\n      ) : null}\n    </PageContainer>\n  );\n};\n\nexport default CopilotsPage;\n","import type { CopilotType, TermType } from '@sinsa/schema';\nimport { useMemo, useRef, useState } from 'react';\nimport { Card, List } from 'antd';\nimport styles from './styles.module.less';\nimport { CopilotBlock } from '@/components/SolutionCard/CopilotBlock';\n\nconst getRowKey = (c: CopilotType) => c.bv;\n\ninterface CopilotListViewProps {\n  currentTerm: TermType;\n  dataSource: CopilotType[];\n}\n\nexport const CopilotListView: React.FC<CopilotListViewProps> = ({\n  currentTerm,\n  dataSource,\n}) => {\n  const inViewRef = useRef<HTMLDivElement>(null);\n  const [current, setCurrent] = useState(1);\n\n  const pagination = useMemo(() => {\n    return {\n      align: 'center' as const,\n      defaultPageSize: 5,\n      current,\n      onChange(page: number) {\n        setCurrent(page);\n        window.scrollTo({\n          top: inViewRef.current!.offsetTop,\n          behavior: 'smooth',\n        });\n      },\n      showSizeChanger: false,\n      showTotal(total: number): string {\n        return `总共 ${total} 条作业`;\n      },\n    };\n  }, [current]);\n\n  return (\n    <>\n      <div className={styles.Mount} ref={inViewRef} />\n      <List<CopilotType>\n        dataSource={dataSource}\n        pagination={pagination}\n        rowKey={getRowKey}\n        renderItem={item => (\n          <Card\n            className={styles.CopilotCard}\n            bodyStyle={{ paddingBottom: 16 }}\n          >\n            <CopilotBlock\n              className={styles.ControlledCopilotBlock}\n              copilot={item}\n              currentTerm={currentTerm}\n              readOnly\n            />\n          </Card>\n        )}\n      />\n    </>\n  );\n};\n","import type { CopilotType, TermType } from '@sinsa/schema';\nimport { Flex } from 'antd';\nimport { CopilotListView } from './CopilotListView';\n\ninterface CopilotsViewProps {\n  copilots: CopilotType[];\n  currentTerm: TermType;\n}\n\nexport const CopilotsView: React.FC<CopilotsViewProps> = ({\n  copilots,\n  currentTerm,\n}) => {\n  return (\n    <Flex vertical gap=\"middle\">\n      <CopilotListView dataSource={copilots} currentTerm={currentTerm} />\n    </Flex>\n  );\n};\n"],"names":["targetTerm","currentTerm","useTargetTermFromParams","data","error","loading","useRequest","term","getCopilots","Promise","resolve","ready","Boolean","refreshDeps","copilots","useMemo","Object","values","PageContainer","content","TermChanger","pathFn","RoutePath","title","TermNotFound","CopilotsView","getRowKey","c","bv","CopilotListView","dataSource","inViewRef","useRef","current","setCurrent","useState","pagination","align","defaultPageSize","onChange","page","window","scrollTo","top","offsetTop","behavior","showSizeChanger","showTotal","total","className","ref","List","rowKey","renderItem","item","Card","bodyStyle","paddingBottom","CopilotBlock","copilot","readOnly","Flex","vertical","gap"],"mappings":";sjBAqCA,EA3B+B,KAC7B,GAAM,CAAEA,WAAYC,CAAW,CAAE,CAAG,KAAAC,uBAAA,IAC9B,CAAEC,KAAAA,CAAI,CAAEC,MAAAA,CAAK,CAAEC,QAAAA,CAAO,CAAE,CAAG,KAAAC,UAAA,EAC/B,IACEL,GAAaM,KACT,KAAAC,WAAA,EAAYP,EAAYM,IAAI,EAC3BE,QAAQC,OAAO,CAAC,CAAC,GACxB,CAAEC,MAAOC,CAAAA,CAAQX,GAAaM,KAAOM,YAAa,CAACZ,GAAaM,KAAK,AAAC,GAGlEO,EAAW,KAAAC,OAAA,EAAQ,IAAMC,OAAOC,MAAM,CAACd,GAAQ,EAAE,EAAG,CAACA,EAAK,EAEhE,MACE,UAAC,EAAAe,aAAa,EACZC,QAAS,UAAC,EAAAC,WAAW,EAACC,OAAQ,EAAAC,SAAA,SAAkB,GAChDC,MAAM,2BACNlB,QAASA,WAERD,EACC,UAAC,EAAAoB,YAAY,KACXvB,EACF,UAAC,EAAAwB,YAAY,EAACxB,YAAaA,EAAaa,SAAUA,IAChD,MAGV,sKC7BA,IAAMY,EAAY,AAACC,GAAmBA,EAAEC,EAAE,CAO7BC,EAAkD,AAAC,QAC9D5B,YAAAA,CAAW,CACX6B,WAAAA,CAAU,CACX,GACOC,EAAY,KAAAC,MAAA,EAAuB,MACnC,CAACC,EAASC,EAAW,CAAG,KAAAC,QAAA,EAAS,GAEjCC,EAAa,KAAArB,OAAA,EAAQ,IAClB,EACLsB,MAAO,SACPC,gBAAiB,EACjBL,QAAAA,EACAM,SAASC,CAAY,EACnBN,EAAWM,GACXC,OAAOC,QAAQ,CAAC,CACdC,IAAKZ,EAAUE,OAAO,CAAEW,SAAS,CACjCC,SAAU,QACZ,EACF,EACAC,gBAAiB,GACjBC,UAAAA,AAAUC,GACD,CAAC,iBAAG,EAAEA,EAAM,yBAAI,CAAC,AAE5B,GACC,CAACf,EAAQ,EAEZ,MACE,iCACE,UAAC,OAAIgB,UAAW,OAAY,CAAEC,IAAKnB,IACnC,UAAC,EAAAoB,IAAI,EACHrB,WAAYA,EACZM,WAAYA,EACZgB,OAAQ1B,EACR2B,WAAY,AAAAC,GACV,UAAC,EAAAC,IAAI,EACHN,UAAW,aAAkB,CAC7BO,UAAW,CAAEC,cAAe,EAAG,WAE/B,UAAC,EAAAC,YAAY,EACXT,UAAW,wBAA6B,CACxCU,QAASL,EACTrD,YAAaA,EACb2D,SAAQ,WAOtB,uICrDO,IAAMnC,EAA4C,AAAC,QACxDX,SAAAA,CAAQ,CACRb,YAAAA,CAAW,CACZ,GACC,MACE,UAAC,EAAA4D,IAAI,EAACC,SAAQ,GAACC,IAAI,kBACjB,UAAC,EAAAlC,eAAe,EAACC,WAAYhB,EAAUb,YAAaA,KAG1D"}
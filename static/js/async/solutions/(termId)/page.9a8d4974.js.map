{"version":3,"file":"static/js/async/solutions/(termId)/page.9a8d4974.js","sources":["../../node_modules/.pnpm/@ebay+nice-modal-react@1.2.13_react-dom@18.2.0_react@18.2.0/node_modules/@ebay/nice-modal-react/lib/esm/index.js","./src/components/ExcludeAurorianFormList/index.tsx","./src/components/SolutionCard/index.tsx","./src/routes/solutions/[termId]/page.tsx","./src/views/SolutionView/QueryForm/index.tsx","./src/views/SolutionView/SolutionListView/index.tsx","./src/views/SolutionView/index.tsx","./src/components/ExcludeAurorianFormList/utils.ts","./src/views/SolutionView/QueryForm/constants.ts","./src/views/SolutionView/QueryForm/hooks/use-initial-values.ts"],"sourcesContent":["/* *********************************************************\n * Copyright 2021 eBay Inc.\n\n * Use of this source code is governed by an MIT-style\n * license that can be found in the LICENSE file or at\n * https://opensource.org/licenses/MIT.\n*********************************************************** */\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\n/* eslint-disable @typescript-eslint/no-explicit-any */\n/**\n * @module NiceModal\n * */\nimport React, { useEffect, useCallback, useContext, useReducer, useMemo } from 'react';\nvar symModalId = Symbol('NiceModalId');\nvar initialState = {};\nexport var NiceModalContext = React.createContext(initialState);\nvar NiceModalIdContext = React.createContext(null);\nvar MODAL_REGISTRY = {};\nvar ALREADY_MOUNTED = {};\nvar uidSeed = 0;\nvar dispatch = function () {\n    throw new Error('No dispatch method detected, did you embed your app with NiceModal.Provider?');\n};\nvar getUid = function () { return \"_nice_modal_\" + uidSeed++; };\n// Modal reducer used in useReducer hook.\nexport var reducer = function (state, action) {\n    var _a, _b, _c;\n    if (state === void 0) { state = initialState; }\n    switch (action.type) {\n        case 'nice-modal/show': {\n            var _d = action.payload, modalId = _d.modalId, args = _d.args;\n            return __assign(__assign({}, state), (_a = {}, _a[modalId] = __assign(__assign({}, state[modalId]), { id: modalId, args: args, \n                // If modal is not mounted, mount it first then make it visible.\n                // There is logic inside HOC wrapper to make it visible after its first mount.\n                // This mechanism ensures the entering transition.\n                visible: !!ALREADY_MOUNTED[modalId], delayVisible: !ALREADY_MOUNTED[modalId] }), _a));\n        }\n        case 'nice-modal/hide': {\n            var modalId = action.payload.modalId;\n            if (!state[modalId])\n                return state;\n            return __assign(__assign({}, state), (_b = {}, _b[modalId] = __assign(__assign({}, state[modalId]), { visible: false }), _b));\n        }\n        case 'nice-modal/remove': {\n            var modalId = action.payload.modalId;\n            var newState = __assign({}, state);\n            delete newState[modalId];\n            return newState;\n        }\n        case 'nice-modal/set-flags': {\n            var _e = action.payload, modalId = _e.modalId, flags = _e.flags;\n            return __assign(__assign({}, state), (_c = {}, _c[modalId] = __assign(__assign({}, state[modalId]), flags), _c));\n        }\n        default:\n            return state;\n    }\n};\n// Get modal component by modal id\nfunction getModal(modalId) {\n    var _a;\n    return (_a = MODAL_REGISTRY[modalId]) === null || _a === void 0 ? void 0 : _a.comp;\n}\n// action creator to show a modal\nfunction showModal(modalId, args) {\n    return {\n        type: 'nice-modal/show',\n        payload: {\n            modalId: modalId,\n            args: args,\n        },\n    };\n}\n// action creator to set flags of a modal\nfunction setModalFlags(modalId, flags) {\n    return {\n        type: 'nice-modal/set-flags',\n        payload: {\n            modalId: modalId,\n            flags: flags,\n        },\n    };\n}\n// action creator to hide a modal\nfunction hideModal(modalId) {\n    return {\n        type: 'nice-modal/hide',\n        payload: {\n            modalId: modalId,\n        },\n    };\n}\n// action creator to remove a modal\nfunction removeModal(modalId) {\n    return {\n        type: 'nice-modal/remove',\n        payload: {\n            modalId: modalId,\n        },\n    };\n}\nvar modalCallbacks = {};\nvar hideModalCallbacks = {};\nvar getModalId = function (modal) {\n    if (typeof modal === 'string')\n        return modal;\n    if (!modal[symModalId]) {\n        modal[symModalId] = getUid();\n    }\n    return modal[symModalId];\n};\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\nexport function show(modal, args) {\n    var modalId = getModalId(modal);\n    if (typeof modal !== 'string' && !MODAL_REGISTRY[modalId]) {\n        register(modalId, modal);\n    }\n    dispatch(showModal(modalId, args));\n    if (!modalCallbacks[modalId]) {\n        // `!` tell ts that theResolve will be written before it is used\n        var theResolve_1;\n        // `!` tell ts that theResolve will be written before it is used\n        var theReject_1;\n        var promise = new Promise(function (resolve, reject) {\n            theResolve_1 = resolve;\n            theReject_1 = reject;\n        });\n        modalCallbacks[modalId] = {\n            resolve: theResolve_1,\n            reject: theReject_1,\n            promise: promise,\n        };\n    }\n    return modalCallbacks[modalId].promise;\n}\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\nexport function hide(modal) {\n    var modalId = getModalId(modal);\n    dispatch(hideModal(modalId));\n    // Should also delete the callback for modal.resolve #35\n    delete modalCallbacks[modalId];\n    if (!hideModalCallbacks[modalId]) {\n        // `!` tell ts that theResolve will be written before it is used\n        var theResolve_2;\n        // `!` tell ts that theResolve will be written before it is used\n        var theReject_2;\n        var promise = new Promise(function (resolve, reject) {\n            theResolve_2 = resolve;\n            theReject_2 = reject;\n        });\n        hideModalCallbacks[modalId] = {\n            resolve: theResolve_2,\n            reject: theReject_2,\n            promise: promise,\n        };\n    }\n    return hideModalCallbacks[modalId].promise;\n}\nexport var remove = function (modal) {\n    var modalId = getModalId(modal);\n    dispatch(removeModal(modalId));\n    delete modalCallbacks[modalId];\n    delete hideModalCallbacks[modalId];\n};\nvar setFlags = function (modalId, flags) {\n    dispatch(setModalFlags(modalId, flags));\n};\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\nexport function useModal(modal, args) {\n    var modals = useContext(NiceModalContext);\n    var contextModalId = useContext(NiceModalIdContext);\n    var modalId = null;\n    var isUseComponent = modal && typeof modal !== 'string';\n    if (!modal) {\n        modalId = contextModalId;\n    }\n    else {\n        modalId = getModalId(modal);\n    }\n    // Only if contextModalId doesn't exist\n    if (!modalId)\n        throw new Error('No modal id found in NiceModal.useModal.');\n    var mid = modalId;\n    // If use a component directly, register it.\n    useEffect(function () {\n        if (isUseComponent && !MODAL_REGISTRY[mid]) {\n            register(mid, modal, args);\n        }\n    }, [isUseComponent, mid, modal, args]);\n    var modalInfo = modals[mid];\n    var showCallback = useCallback(function (args) { return show(mid, args); }, [mid]);\n    var hideCallback = useCallback(function () { return hide(mid); }, [mid]);\n    var removeCallback = useCallback(function () { return remove(mid); }, [mid]);\n    var resolveCallback = useCallback(function (args) {\n        var _a;\n        (_a = modalCallbacks[mid]) === null || _a === void 0 ? void 0 : _a.resolve(args);\n        delete modalCallbacks[mid];\n    }, [mid]);\n    var rejectCallback = useCallback(function (args) {\n        var _a;\n        (_a = modalCallbacks[mid]) === null || _a === void 0 ? void 0 : _a.reject(args);\n        delete modalCallbacks[mid];\n    }, [mid]);\n    var resolveHide = useCallback(function (args) {\n        var _a;\n        (_a = hideModalCallbacks[mid]) === null || _a === void 0 ? void 0 : _a.resolve(args);\n        delete hideModalCallbacks[mid];\n    }, [mid]);\n    return useMemo(function () { return ({\n        id: mid,\n        args: modalInfo === null || modalInfo === void 0 ? void 0 : modalInfo.args,\n        visible: !!(modalInfo === null || modalInfo === void 0 ? void 0 : modalInfo.visible),\n        keepMounted: !!(modalInfo === null || modalInfo === void 0 ? void 0 : modalInfo.keepMounted),\n        show: showCallback,\n        hide: hideCallback,\n        remove: removeCallback,\n        resolve: resolveCallback,\n        reject: rejectCallback,\n        resolveHide: resolveHide,\n    }); }, [\n        mid,\n        modalInfo === null || modalInfo === void 0 ? void 0 : modalInfo.args,\n        modalInfo === null || modalInfo === void 0 ? void 0 : modalInfo.visible,\n        modalInfo === null || modalInfo === void 0 ? void 0 : modalInfo.keepMounted,\n        showCallback,\n        hideCallback,\n        removeCallback,\n        resolveCallback,\n        rejectCallback,\n        resolveHide,\n    ]);\n}\nexport var create = function (Comp) {\n    return function (_a) {\n        var _b;\n        var defaultVisible = _a.defaultVisible, keepMounted = _a.keepMounted, id = _a.id, props = __rest(_a, [\"defaultVisible\", \"keepMounted\", \"id\"]);\n        var _c = useModal(id), args = _c.args, show = _c.show;\n        // If there's modal state, then should mount it.\n        var modals = useContext(NiceModalContext);\n        var shouldMount = !!modals[id];\n        useEffect(function () {\n            // If defaultVisible, show it after mounted.\n            if (defaultVisible) {\n                show();\n            }\n            ALREADY_MOUNTED[id] = true;\n            return function () {\n                delete ALREADY_MOUNTED[id];\n            };\n        }, [id, show, defaultVisible]);\n        useEffect(function () {\n            if (keepMounted)\n                setFlags(id, { keepMounted: true });\n        }, [id, keepMounted]);\n        var delayVisible = (_b = modals[id]) === null || _b === void 0 ? void 0 : _b.delayVisible;\n        // If modal.show is called\n        //  1. If modal was mounted, should make it visible directly\n        //  2. If modal has not been mounted, should mount it first, then make it visible\n        useEffect(function () {\n            if (delayVisible) {\n                // delayVisible: false => true, it means the modal.show() is called, should show it.\n                show(args);\n            }\n        }, [delayVisible, args, show]);\n        if (!shouldMount)\n            return null;\n        return (React.createElement(NiceModalIdContext.Provider, { value: id },\n            React.createElement(Comp, __assign({}, props, args))));\n    };\n};\n// All registered modals will be rendered in modal placeholder\nexport var register = function (id, comp, props) {\n    if (!MODAL_REGISTRY[id]) {\n        MODAL_REGISTRY[id] = { comp: comp, props: props };\n    }\n    else {\n        MODAL_REGISTRY[id].props = props;\n    }\n};\n/**\n * Unregister a modal.\n * @param id - The id of the modal.\n */\nexport var unregister = function (id) {\n    delete MODAL_REGISTRY[id];\n};\n// The placeholder component is used to auto render modals when call modal.show()\n// When modal.show() is called, it means there've been modal info\nvar NiceModalPlaceholder = function () {\n    var modals = useContext(NiceModalContext);\n    var visibleModalIds = Object.keys(modals).filter(function (id) { return !!modals[id]; });\n    visibleModalIds.forEach(function (id) {\n        if (!MODAL_REGISTRY[id] && !ALREADY_MOUNTED[id]) {\n            console.warn(\"No modal found for id: \" + id + \". Please check the id or if it is registered or declared via JSX.\");\n            return;\n        }\n    });\n    var toRender = visibleModalIds\n        .filter(function (id) { return MODAL_REGISTRY[id]; })\n        .map(function (id) { return (__assign({ id: id }, MODAL_REGISTRY[id])); });\n    return (React.createElement(React.Fragment, null, toRender.map(function (t) { return (React.createElement(t.comp, __assign({ key: t.id, id: t.id }, t.props))); })));\n};\nvar InnerContextProvider = function (_a) {\n    var children = _a.children;\n    var arr = useReducer(reducer, initialState);\n    var modals = arr[0];\n    dispatch = arr[1];\n    return (React.createElement(NiceModalContext.Provider, { value: modals },\n        children,\n        React.createElement(NiceModalPlaceholder, null)));\n};\nexport var Provider = function (_a) {\n    var children = _a.children, givenDispatch = _a.dispatch, givenModals = _a.modals;\n    if (!givenDispatch || !givenModals) {\n        return React.createElement(InnerContextProvider, null, children);\n    }\n    dispatch = givenDispatch;\n    return (React.createElement(NiceModalContext.Provider, { value: givenModals },\n        children,\n        React.createElement(NiceModalPlaceholder, null)));\n};\n/**\n * Declarative way to register a modal.\n * @param id - The id of the modal.\n * @param component - The modal Component.\n * @returns\n */\nexport var ModalDef = function (_a) {\n    var id = _a.id, component = _a.component;\n    useEffect(function () {\n        register(id, component);\n        return function () {\n            unregister(id);\n        };\n    }, [id, component]);\n    return null;\n};\n/**\n * A place holder allows to bind props to a modal.\n * It assigns show/hide methods to handler object to show/hide the modal.\n *\n * Comparing to use the <MyNiceModal id=../> directly, this approach allows use registered modal id to find the modal component.\n * Also it avoids to create unique id for MyNiceModal.\n *\n * @param modal - The modal id registered or a modal component.\n * @param handler - The handler object to control the modal.\n * @returns\n */\nexport var ModalHolder = function (_a) {\n    var _b;\n    var modal = _a.modal, _c = _a.handler, handler = _c === void 0 ? {} : _c, restProps = __rest(_a, [\"modal\", \"handler\"]);\n    var mid = useMemo(function () { return getUid(); }, []);\n    var ModalComp = typeof modal === 'string' ? (_b = MODAL_REGISTRY[modal]) === null || _b === void 0 ? void 0 : _b.comp : modal;\n    if (!handler) {\n        throw new Error('No handler found in NiceModal.ModalHolder.');\n    }\n    if (!ModalComp) {\n        throw new Error(\"No modal found for id: \" + modal + \" in NiceModal.ModalHolder.\");\n    }\n    handler.show = useCallback(function (args) { return show(mid, args); }, [mid]);\n    handler.hide = useCallback(function () { return hide(mid); }, [mid]);\n    return React.createElement(ModalComp, __assign({ id: mid }, restProps));\n};\nexport var antdModal = function (modal) {\n    return {\n        visible: modal.visible,\n        onOk: function () { return modal.hide(); },\n        onCancel: function () { return modal.hide(); },\n        afterClose: function () {\n            // Need to resolve before remove\n            modal.resolveHide();\n            if (!modal.keepMounted)\n                modal.remove();\n        },\n    };\n};\nexport var antdModalV5 = function (modal) {\n    var _a = antdModal(modal), onOk = _a.onOk, onCancel = _a.onCancel, afterClose = _a.afterClose;\n    return {\n        open: modal.visible,\n        onOk: onOk,\n        onCancel: onCancel,\n        afterClose: afterClose,\n    };\n};\nexport var antdDrawer = function (modal) {\n    return {\n        visible: modal.visible,\n        onClose: function () { return modal.hide(); },\n        afterVisibleChange: function (v) {\n            if (!v) {\n                modal.resolveHide();\n            }\n            !v && !modal.keepMounted && modal.remove();\n        },\n    };\n};\nexport var antdDrawerV5 = function (modal) {\n    var _a = antdDrawer(modal), onClose = _a.onClose, afterOpenChange = _a.afterVisibleChange;\n    return {\n        open: modal.visible,\n        onClose: onClose,\n        afterOpenChange: afterOpenChange,\n    };\n};\nexport var muiDialog = function (modal) {\n    return {\n        open: modal.visible,\n        onClose: function () { return modal.hide(); },\n        onExited: function () {\n            modal.resolveHide();\n            !modal.keepMounted && modal.remove();\n        },\n    };\n};\nexport var muiDialogV5 = function (modal) {\n    return {\n        open: modal.visible,\n        onClose: function () { return modal.hide(); },\n        TransitionProps: {\n            onExited: function () {\n                modal.resolveHide();\n                !modal.keepMounted && modal.remove();\n            },\n        },\n    };\n};\nexport var bootstrapDialog = function (modal) {\n    return {\n        show: modal.visible,\n        onHide: function () { return modal.hide(); },\n        onExited: function () {\n            modal.resolveHide();\n            !modal.keepMounted && modal.remove();\n        },\n    };\n};\nvar NiceModal = {\n    Provider: Provider,\n    ModalDef: ModalDef,\n    ModalHolder: ModalHolder,\n    NiceModalContext: NiceModalContext,\n    create: create,\n    register: register,\n    getModal: getModal,\n    show: show,\n    hide: hide,\n    remove: remove,\n    useModal: useModal,\n    reducer: reducer,\n    antdModal: antdModal,\n    antdDrawer: antdDrawer,\n    muiDialog: muiDialog,\n    bootstrapDialog: bootstrapDialog,\n};\nexport default NiceModal;\n//# sourceMappingURL=index.js.map","import {\n  ProForm,\n  ProFormDependency,\n  ProFormList,\n  ProFormRate,\n  ProFormSwitch,\n} from '@ant-design/pro-components';\nimport { useModel } from '@modern-js/runtime/model';\nimport { Button, Select, Tooltip } from 'antd';\nimport { Delete } from '@icon-park/react';\nimport { AdaptiveAurorianCard } from '../AdaptiveAurorianCard';\nimport { ensureExcludeKey } from './utils';\nimport { AuroriansModel, filterAuroriansOption } from '@/models/aurorians';\n\ninterface ExcludeFormListProps {\n  name: string;\n}\n\nexport const ExcludeAurorianFormList: React.FC<ExcludeFormListProps> = ({\n  name,\n  ...props\n}) => {\n  const [{ auroriansOptions, auroriansMap }] = useModel(AuroriansModel);\n\n  return (\n    <ProFormList\n      {...props}\n      creatorButtonProps={{\n        creatorButtonText: '添加排除的光灵',\n      }}\n      name={name}\n      alwaysShowItemLabel\n      actionRender={(field, action) => [\n        <Tooltip key=\"delete\" title=\"删除此光灵\">\n          <Button\n            style={{ marginLeft: '.5rem' }}\n            icon={<Delete />}\n            onClick={e => {\n              e.stopPropagation();\n              action.remove(field.name);\n            }}\n          />\n        </Tooltip>,\n      ]}\n    >\n      {() => {\n        return (\n          <ProForm.Group>\n            <ProForm.Item\n              label=\"排除的光灵\"\n              name={ensureExcludeKey('aurorianId')}\n              rules={[{ required: true }]}\n            >\n              <Select\n                options={auroriansOptions}\n                showSearch\n                allowClear={false}\n                placeholder={'支持按拼音搜索光灵, 比如 ad 可以搜到 安顿'}\n                filterOption={filterAuroriansOption}\n              />\n            </ProForm.Item>\n            <ProFormDependency name={[ensureExcludeKey('aurorianId')]}>\n              {({ aurorianId }) => {\n                if (aurorianId) {\n                  return (\n                    <AdaptiveAurorianCard\n                      readOnly\n                      mini\n                      aurorianId={aurorianId}\n                    />\n                  );\n                }\n                return null;\n              }}\n            </ProFormDependency>\n            <ProFormDependency name={[ensureExcludeKey('aurorianId')]}>\n              {({ aurorianId }) => {\n                if (aurorianId) {\n                  return (\n                    <ProFormSwitch\n                      label=\"仅排除突破\"\n                      name={ensureExcludeKey('excludeBreakthroughOnly')}\n                    />\n                  );\n                }\n                return null;\n              }}\n            </ProFormDependency>\n\n            <ProFormDependency\n              name={[\n                ensureExcludeKey('aurorianId'),\n                ensureExcludeKey('excludeBreakthroughOnly'),\n              ]}\n            >\n              {({ aurorianId, excludeBreakthroughOnly }) => {\n                const targetAurorian = auroriansMap[aurorianId];\n                if (excludeBreakthroughOnly && targetAurorian) {\n                  return (\n                    <ProFormRate\n                      name={ensureExcludeKey('excludeBreakthrough')}\n                      label=\"排除突破数\"\n                      fieldProps={{\n                        count: targetAurorian.rarity,\n                        allowHalf: false,\n                      }}\n                      tooltip=\"大于等于此突破数的光灵会被排除，但不会排除零破的此光灵\"\n                      rules={[{ required: true }]}\n                    />\n                  );\n                }\n                return null;\n              }}\n            </ProFormDependency>\n          </ProForm.Group>\n        );\n      }}\n    </ProFormList>\n  );\n};\n","import type { Solution } from '@sinsa/solution-calculator/dist/types/types';\nimport { Card, Typography } from 'antd';\nimport React, { useMemo } from 'react';\nimport { isEqual } from 'lodash-es';\nimport numeral from 'numeral';\nimport type { CopilotNextType, TermNextType } from '@sinsa/schema';\nimport { CopilotBlock } from './CopilotBlock';\nimport styles from './styles.module.less';\n\nconst copilotRowKey = (c: CopilotNextType) => c.copilot_id;\n\nexport interface SolutionCardProps {\n  solution: Solution;\n  currentTerm: TermNextType;\n  index: number;\n}\n\nexport const SolutionCard = React.memo<SolutionCardProps>(\n  ({ solution, currentTerm, index }) => {\n    const sorted = useMemo(() => {\n      return [...solution.copilots].sort((a, b) => b.score - a.score);\n    }, [solution]);\n    return (\n      <Card className={styles.SolutionCard} bodyStyle={{ paddingBottom: 16 }}>\n        <div className={styles.TotalScore}>\n          <Typography.Text strong>{`#${index + 1} 匹配方案 ${numeral(\n            solution.totalScore,\n          ).format('0,0')}`}</Typography.Text>\n        </div>\n\n        {sorted.map(copilot => {\n          return (\n            <CopilotBlock\n              className={styles.ControlledCopilotBlock}\n              key={copilotRowKey(copilot)}\n              copilot={copilot}\n              currentTerm={currentTerm}\n            />\n          );\n        })}\n      </Card>\n    );\n  },\n  (prev, next) =>\n    isEqual(\n      prev.solution.copilots.map(c => c.copilot_id),\n      next.solution.copilots.map(c => c.copilot_id),\n    ) &&\n    prev.currentTerm.term_id === next.currentTerm.term_id &&\n    prev.index === next.index,\n);\n","/* eslint-disable no-nested-ternary */\nimport { PageContainer } from '@ant-design/pro-components';\nimport { useMemo } from 'react';\nimport { useRequest } from 'ahooks';\nimport { Space, Typography } from 'antd';\nimport { TermNotFound } from '@/components/TermNotFound';\nimport { TermChanger, useTargetTermFromParams } from '@/components/TermChanger';\nimport { getCopilots } from '@/services/http';\nimport { RoutePath } from '@/views/GlobalLayout/constants';\nimport { RelativeTimeText } from '@/components/RelativeTimeText';\nimport { SolutionView } from '@/views/SolutionView';\n\nconst SolutionsPage: React.FC = () => {\n  const { targetTerm: currentTerm } = useTargetTermFromParams();\n  const { data, error, loading } = useRequest(\n    () =>\n      currentTerm?.term_id\n        ? getCopilots(currentTerm.term_id)\n        : (Promise.resolve({}) as ReturnType<typeof getCopilots>),\n    {\n      ready: Boolean(currentTerm?.term_id),\n      refreshDeps: [currentTerm?.term_id],\n    },\n  );\n\n  const copilots = useMemo(() => Object.values(data ?? []), [data]);\n\n  return (\n    <PageContainer\n      content={\n        <Space wrap>\n          <TermChanger pathFn={RoutePath.Solutions} />\n          {copilots[0] ? (\n            <Typography.Text>\n              上次作业更新 <RelativeTimeText time={copilots[0].upload_time} />\n            </Typography.Text>\n          ) : null}\n          <Typography.Text type=\"secondary\">\n            Tips: 点击匹配作业中光灵头像可唤出菜单一键排除光灵或仅排除突破 ❤\n          </Typography.Text>\n        </Space>\n      }\n      title=\"作业匹配\"\n      loading={loading}\n    >\n      {error ? (\n        <TermNotFound />\n      ) : currentTerm ? (\n        <SolutionView copilots={copilots} currentTerm={currentTerm} />\n      ) : (\n        <TermNotFound />\n      )}\n    </PageContainer>\n  );\n};\n\nexport default SolutionsPage;\n","import type { SubmitterProps } from '@ant-design/pro-components';\nimport {\n  ProFormSelect,\n  ProFormDependency,\n  ProFormSwitch,\n  ProFormRadio,\n  ProForm,\n} from '@ant-design/pro-components';\nimport { useCallback, useMemo } from 'react';\nimport { Space, Typography } from 'antd';\nimport type { CopilotNextType, TermNextType } from '@sinsa/schema';\nimport { Search } from '@icon-park/react';\nimport type { QueryParamsType } from '../schemas/query-params';\nimport { useSolutionResultContext } from '../context';\nimport { useInitialValues } from './hooks/use-initial-values';\nimport { EXTENDED_TEAM_COUNT } from './constants';\nimport { ensureQueryKey } from './utils';\nimport { ExcludeAurorianFormList } from '@/components/ExcludeAurorianFormList';\n\ninterface QueryFormProps {\n  termId: TermNextType['term_id'];\n  copilots: CopilotNextType[];\n}\n\nexport const QueryForm: React.FC<QueryFormProps> = ({ termId, copilots }) => {\n  const { initialValues, setLocalInitialValues } = useInitialValues({ termId });\n\n  const { loadingSolutionResult, solutionResult, form, requestSolution } =\n    useSolutionResultContext();\n\n  const submitter = useMemo<SubmitterProps>(() => {\n    return {\n      searchConfig: { submitText: '寻找方案' },\n      submitButtonProps: {\n        icon: <Search theme=\"outline\" />,\n      },\n      render(_, dom) {\n        const display = [...dom];\n        if (typeof solutionResult?.allSolutions.solutions.length === 'number') {\n          display.push(\n            <Typography.Text key=\"count\">\n              已为您找到{' '}\n              <Typography.Text strong>\n                {solutionResult.allSolutions.solutions.length}\n              </Typography.Text>{' '}\n              个作业匹配方案\n            </Typography.Text>,\n          );\n        }\n        return <Space wrap>{display}</Space>;\n      },\n    };\n  }, [solutionResult?.allSolutions.solutions.length]);\n\n  const handleValuesChange = useCallback(\n    (_: unknown, allValues: QueryParamsType) => {\n      if (allValues.enableSaveLocalStorage) {\n        setLocalInitialValues(allValues);\n      } else {\n        setLocalInitialValues(undefined);\n      }\n      setLocalInitialValues(\n        allValues.enableSaveLocalStorage ? allValues : undefined,\n      );\n    },\n    [],\n  );\n\n  const ignoreOptions = useMemo(() => {\n    return copilots.map(c => {\n      return {\n        label: `${c.author_name} ${Math.floor(c.score / 10000)}W`,\n        value: c.copilot_id,\n      };\n    });\n  }, [copilots]);\n\n  const handleOnFinish = useCallback(\n    async (params: QueryParamsType) => {\n      await requestSolution(copilots, params);\n    },\n    [copilots],\n  );\n\n  return (\n    <ProForm<QueryParamsType>\n      onFinish={handleOnFinish}\n      layout=\"vertical\"\n      initialValues={initialValues}\n      submitter={submitter}\n      loading={loadingSolutionResult}\n      onValuesChange={handleValuesChange}\n      form={form}\n    >\n      <ProForm.Group>\n        <ProFormRadio.Group\n          name={ensureQueryKey('k')}\n          label=\"队伍数量\"\n          rules={[{ required: true }]}\n          options={EXTENDED_TEAM_COUNT}\n          allowClear={false}\n          radioType=\"button\"\n        />\n        <ProFormSwitch\n          name={ensureQueryKey('disableAlternative')}\n          label=\"不考虑可替自由位\"\n          tooltip=\"开启后，计算的队伍方案中绝对不会出现重复光灵，满足图鉴大佬的强迫症\"\n        />\n        <ProForm.Group>\n          <ProFormSwitch\n            name={ensureQueryKey('enableExclude')}\n            label=\"额外排除光灵\"\n            tooltip=\"排除光灵会忽略可替自由位\"\n          />\n          <ProFormDependency name={[ensureQueryKey('enableExclude')]}>\n            {({ enableExclude }: Pick<QueryParamsType, 'enableExclude'>) => {\n              return enableExclude ? (\n                <ExcludeAurorianFormList name={ensureQueryKey('exclude')} />\n              ) : null;\n            }}\n          </ProFormDependency>\n        </ProForm.Group>\n        <ProFormSwitch\n          name={ensureQueryKey('enableSaveLocalStorage')}\n          label=\"记住我的设置\"\n          tooltip=\"开启后，这一期荒典筛选的设置将会储存在您的浏览器本地，避免繁琐重复筛选\"\n        />\n      </ProForm.Group>\n      <ProFormDependency name={[ensureQueryKey('copilotsIgnore')]}>\n        {({ copilotsIgnore }: Pick<QueryParamsType, 'copilotsIgnore'>) => {\n          return copilotsIgnore?.length ? (\n            <ProFormSelect\n              mode=\"multiple\"\n              name={ensureQueryKey('copilotsIgnore')}\n              label=\"已额外排除的作业\"\n              options={ignoreOptions}\n            />\n          ) : null;\n        }}\n      </ProFormDependency>\n      <ProFormDependency name={[ensureQueryKey('copilotsDiff')]}>\n        {({ copilotsDiff }: Pick<QueryParamsType, 'copilotsDiff'>) => {\n          console.log('copilotsDiff', copilotsDiff);\n          return null;\n        }}\n      </ProFormDependency>\n    </ProForm>\n  );\n};\n","import { ConfigProvider, Empty, List, Result } from 'antd';\nimport { useEffect, useMemo, useRef, useState } from 'react';\nimport type { Solution } from '@sinsa/solution-calculator/dist/types/types';\nimport type { TermNextType } from '@sinsa/schema';\nimport { useSolutionResultContext } from '../context';\nimport styles from './styles.module.less';\nimport SINSA_SORRY_URL from '@/assets/sinsa/sorry.png';\nimport { SolutionCard } from '@/components/SolutionCard';\n\nconst getRowKey = (sc: Solution) =>\n  sc.copilots.map(c => c.copilot_id).join(',');\n\nexport interface SolutionListViewProps {\n  currentTerm: TermNextType;\n}\n\nexport const SolutionListView: React.FC<SolutionListViewProps> = ({\n  currentTerm,\n}) => {\n  const inViewRef = useRef<HTMLDivElement>(null);\n\n  const { loadingSolutionResult, solutionResult } = useSolutionResultContext();\n\n  const [current, setCurrent] = useState(1);\n\n  useEffect(() => {\n    if (solutionResult && current !== 1) {\n      setCurrent(1);\n    }\n  }, [solutionResult]);\n\n  const pagination = useMemo(() => {\n    return {\n      align: 'center' as const,\n      defaultPageSize: 5,\n      current,\n      onChange(page: number) {\n        setCurrent(page);\n        window.scrollTo({\n          top: inViewRef.current!.offsetTop,\n          behavior: 'smooth',\n        });\n      },\n      showSizeChanger: false,\n    };\n  }, [current]);\n\n  return (\n    <>\n      <div className={styles.Mount} ref={inViewRef} />\n      <ConfigProvider\n        renderEmpty={name => {\n          if (name === 'List') {\n            return solutionResult?.allSolutions.solutions.length === 0 ? (\n              <Result\n                icon={\n                  <img\n                    width={100}\n                    src={SINSA_SORRY_URL}\n                    alt=\"醒山daddy: 很抱歉\"\n                  />\n                }\n                title=\"没能找到匹配的作业\"\n                subTitle={\n                  <div>\n                    1. 可以适当降低搜索的队伍数量。例如搜索两队 + 自己自动一队\n                    <br />\n                    2. 当前作业数量较少。可等待作业站更新后再次搜索\n                  </div>\n                }\n              />\n            ) : (\n              <Empty\n                image={Empty.PRESENTED_IMAGE_SIMPLE}\n                description=\"准备好寻找作业了！\"\n              />\n            );\n          }\n          return <Empty image={Empty.PRESENTED_IMAGE_SIMPLE} />;\n        }}\n      >\n        <List<Solution>\n          loading={loadingSolutionResult}\n          dataSource={solutionResult?.allSolutions.solutions}\n          pagination={pagination}\n          rowKey={getRowKey}\n          renderItem={item => (\n            <SolutionCard\n              index={solutionResult?.rankSet.get(item) ?? 0}\n              solution={item}\n              currentTerm={currentTerm}\n            />\n          )}\n        />\n      </ConfigProvider>\n    </>\n  );\n};\n","import { Alert, Card, Flex, Typography } from 'antd';\nimport type { CopilotNextType, TermNextType } from '@sinsa/schema';\nimport { Provider as NiceModalProvider } from '@ebay/nice-modal-react';\nimport { SolutionResultProvider } from './context';\nimport { QueryForm } from './QueryForm';\nimport { SolutionListView } from './SolutionListView';\n\ninterface SolutionViewProps {\n  copilots: CopilotNextType[];\n  currentTerm: TermNextType;\n}\n\nexport const SolutionView: React.FC<SolutionViewProps> = ({\n  copilots,\n  currentTerm,\n}) => {\n  return (\n    <SolutionResultProvider>\n      <Flex vertical gap=\"middle\">\n        {currentTerm.order === 26 ? (\n          <Alert\n            type=\"error\"\n            showIcon={false}\n            banner\n            message=\"光灵黑潮目前装备技能存在 Bug 使得荒典分数可能存在虚高问题。官方将于 1 月 10 日更新后修复。本期黑潮队伍分数仅供参考。\"\n            action={\n              <Typography.Link\n                href={`https://www.bilibili.com/read/cv29262782/`}\n                target=\"_blank\"\n              >\n                查看官方公告\n              </Typography.Link>\n            }\n          />\n        ) : null}\n        <Card>\n          <NiceModalProvider>\n            <QueryForm copilots={copilots} termId={currentTerm.term_id} />\n          </NiceModalProvider>\n        </Card>\n        <SolutionListView currentTerm={currentTerm} />\n      </Flex>\n    </SolutionResultProvider>\n  );\n};\n","import type { ExcludeDataType } from '@/views/SolutionView/schemas/query-params';\n\nexport function ensureExcludeKey(key: keyof ExcludeDataType) {\n  return key;\n}\n","export const LOCAL_STORAGE_SETTING_KEY_PREFIX =\n  'SINSA_DADDY_SOLUTIONS_FILTER_KEY_V1';\n\nexport const EXTENDED_TEAM_COUNT = [\n  { label: '一队', value: 1 },\n  { label: '两队', value: 2 },\n  { label: '三队', value: 3 },\n  { label: '四队', value: 4 },\n];\n","import { useLocalStorageState } from 'ahooks';\nimport { useMemo } from 'react';\nimport type { TermNextType } from '@sinsa/schema';\nimport type { QueryParamsType } from '../../schemas/query-params';\n\ninterface UseInitialValuesArgs {\n  termId: TermNextType['term_id'];\n}\n\nconst LOCAL_STORAGE_SETTING_KEY_PREFIX = 'SINSA_DADDY_SOLUTIONS_FILTER_KEY_V1';\n\nconst DEFAULT_INITIAL_VALUES: QueryParamsType = {\n  k: 3,\n  exclude: [{}] as any[],\n};\n\nexport function useInitialValues({ termId }: UseInitialValuesArgs) {\n  const LOCAL_STORAGE_SETTING_KEY = useMemo(\n    () => `${LOCAL_STORAGE_SETTING_KEY_PREFIX}_${termId}` as const,\n    [termId],\n  );\n\n  const [loaclInitialValues, setLocalInitialValues] =\n    useLocalStorageState<QueryParamsType>(LOCAL_STORAGE_SETTING_KEY, {\n      defaultValue: undefined,\n    });\n\n  return {\n    initialValues: loaclInitialValues ?? DEFAULT_INITIAL_VALUES,\n    setLocalInitialValues,\n  };\n}\n"],"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","Symbol","initialState","NiceModalContext","MODAL_REGISTRY","ALREADY_MOUNTED","dispatch","Error","reducer","state","action","_a","_b","_c","type","_d","payload","modalId","args","id","visible","delayVisible","newState","_e","flags","NiceModalPlaceholder","modals","useContext","visibleModalIds","keys","filter","forEach","console","warn","toRender","map","comp","key","props","InnerContextProvider","children","arr","useReducer","Provider","value","givenDispatch","givenModals","ExcludeAurorianFormList","name","auroriansOptions","auroriansMap","useModel","AuroriansModel","ProFormList","creatorButtonProps","creatorButtonText","alwaysShowItemLabel","actionRender","field","Tooltip","title","Button","style","marginLeft","icon","Delete","onClick","e","stopPropagation","remove","ProForm","label","ensureExcludeKey","rules","required","Select","options","showSearch","allowClear","placeholder","filterOption","filterAuroriansOption","ProFormDependency","aurorianId","AdaptiveAurorianCard","readOnly","mini","ProFormSwitch","excludeBreakthroughOnly","targetAurorian","ProFormRate","fieldProps","count","rarity","allowHalf","tooltip","copilotRowKey","c","copilot_id","SolutionCard","solution","currentTerm","index","sorted","useMemo","copilots","sort","a","b","score","Card","className","bodyStyle","paddingBottom","Typography","strong","totalScore","format","copilot","CopilotBlock","prev","next","isEqual","term_id","targetTerm","useTargetTermFromParams","data","error","loading","useRequest","getCopilots","Promise","resolve","ready","Boolean","refreshDeps","values","PageContainer","content","Space","wrap","TermChanger","pathFn","RoutePath","RelativeTimeText","time","upload_time","TermNotFound","SolutionView","QueryForm","termId","initialValues","setLocalInitialValues","useInitialValues","loadingSolutionResult","solutionResult","form","requestSolution","useSolutionResultContext","submitter","searchConfig","submitText","submitButtonProps","Search","theme","render","_","dom","display","allSolutions","solutions","push","handleValuesChange","useCallback","allValues","enableSaveLocalStorage","undefined","ignoreOptions","author_name","Math","floor","handleOnFinish","params","onFinish","layout","onValuesChange","ProFormRadio","ensureQueryKey","EXTENDED_TEAM_COUNT","radioType","enableExclude","copilotsIgnore","ProFormSelect","mode","copilotsDiff","log","getRowKey","sc","join","SolutionListView","inViewRef","useRef","current","setCurrent","useState","useEffect","pagination","align","defaultPageSize","onChange","page","window","scrollTo","top","offsetTop","behavior","showSizeChanger","ref","ConfigProvider","renderEmpty","Result","width","src","alt","subTitle","Empty","image","description","List","dataSource","rowKey","renderItem","item","rankSet","get","SolutionResultProvider","Flex","vertical","gap","order","Alert","showIcon","banner","message","href","target","DEFAULT_INITIAL_VALUES","k","exclude","LOCAL_STORAGE_SETTING_KEY","loaclInitialValues","useLocalStorageState","defaultValue"],"mappings":"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"}
/*! For license information please see page.6369078f.js.LICENSE.txt */
(globalThis.webpackChunk_sinsa_web=globalThis.webpackChunk_sinsa_web||[]).push([["253"],{363733:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return l}});var o=r("450348"),n={},l=function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),l=1;l<t;l++)r[l-1]=arguments[l];var i=[],a=[],u=function(e){var t,r=(0,o.createContext)(n);i.push(r),a.push((t=r,function(){var e=(0,o.useContext)(t);return e}))};r.length?r.forEach(function(e){return u(e.name)}):u(e.name);var s=function(t){for(var n=t.children,l=e(function(e,t){if(null==e)return{};var r,o,n={},l=Object.keys(e);for(o=0;o<l.length;o++)r=l[o],!(t.indexOf(r)>=0)&&(n[r]=e[r]);return n}(t,["children"])),a=n,u=0;u<i.length;u+=1){var s=i[u],c=r[u]||function(e){return e};a=(0,o.createElement)(s.Provider,{value:c(l)},a)}return a};return[s].concat(a)}},493130:function(e,t,r){"use strict";e.exports=r.p+"static/image/sorry.06ca1022.png"},981939:function(e,t,r){"use strict";e.exports={ControlledCopilotBlock:"ControlledCopilotBlock-dc36e2",controlledCopilotBlock:"ControlledCopilotBlock-dc36e2",SolutionCard:"SolutionCard-ebad4e",solutionCard:"SolutionCard-ebad4e",TotalScore:"TotalScore-_372c2",totalScore:"TotalScore-_372c2"}},940904:function(e,t,r){"use strict";e.exports={Mount:"Mount-_70740",mount:"Mount-_70740"}},814647:function(e,t,r){"use strict";r.r(t),r.d(t,{ExcludeAurorianFormList:function(){return c}});var o=r("766791"),n=r("928958"),l=r("67348"),i=r("375748"),a=r("134640"),u=r("408748"),s=r("439538");let c=e=>{let{name:t,...r}=e,[{auroriansOptions:c,auroriansMap:d}]=(0,l.useModel)(s.AuroriansModel);return(0,o.jsx)(n.ProFormList,{...r,creatorButtonProps:{creatorButtonText:"\u6DFB\u52A0\u6392\u9664\u7684\u5149\u7075"},name:t,alwaysShowItemLabel:!0,actionRender:(e,t)=>[(0,o.jsx)(i.Tooltip,{title:"\u5220\u9664\u6B64\u5149\u7075",children:(0,o.jsx)(i.Button,{style:{marginLeft:".5rem"},icon:(0,o.jsx)(a.Delete,{}),onClick:r=>{r.stopPropagation(),t.remove(e.name)}})},"delete")],children:()=>(0,o.jsxs)(n.ProForm.Group,{children:[(0,o.jsx)(n.ProForm.Item,{label:"\u6392\u9664\u7684\u5149\u7075",name:"aurorianId",rules:[{required:!0}],children:(0,o.jsx)(i.Select,{options:c,showSearch:!0,allowClear:!1,placeholder:"\u652F\u6301\u6309\u62FC\u97F3\u641C\u7D22\u5149\u7075, \u6BD4\u5982 ad \u53EF\u4EE5\u641C\u5230 \u5B89\u987F",filterOption:s.filterAuroriansOption})}),(0,o.jsx)(n.ProFormDependency,{name:["aurorianId"],children:e=>{let{aurorianId:t}=e;return t?(0,o.jsx)(u.AdaptiveAurorianCard,{readOnly:!0,mini:!0,aurorianId:t}):null}},"excludeBreakthroughOnly"),(0,o.jsx)(n.ProFormDependency,{name:["aurorianName"],children:e=>{let{aurorianName:t}=e;return t?(0,o.jsx)(n.ProFormSwitch,{label:"\u4EC5\u6392\u9664\u7A81\u7834",name:"excludeBreakthroughOnly"}):null}},"excludeBreakthroughOnly"),(0,o.jsx)(n.ProFormDependency,{name:["aurorianName","excludeBreakthroughOnly"],children:e=>{let{aurorianName:t,excludeBreakthroughOnly:r}=e,l=d[t];return r&&l?(0,o.jsx)(n.ProFormRate,{name:"excludeBreakthrough",label:"\u6392\u9664\u7A81\u7834\u6570",fieldProps:{count:l.rarity,allowHalf:!1},tooltip:"\u5927\u4E8E\u7B49\u4E8E\u6B64\u7A81\u7834\u6570\u7684\u5149\u7075\u4F1A\u88AB\u6392\u9664\uFF0C\u4F46\u4E0D\u4F1A\u6392\u9664\u96F6\u7834\u7684\u6B64\u5149\u7075",rules:[{required:!0}]}):null}},"excludeBreakthrough")]})})}},643394:function(e,t,r){"use strict";r.r(t),r.d(t,{SolutionCard:function(){return p}});var o=r("766791"),n=r("375748"),l=r("450348"),i=r.n(l),a=r("667227"),u=r("132802"),s=r.n(u),c=r("764059"),d=r("981939");let m=e=>e.copilot_id,p=i().memo(e=>{let{solution:t,currentTerm:r,index:i,onIgnore:a}=e,u=(0,l.useMemo)(()=>[...t.copilots].sort((e,t)=>t.score-e.score),[t]);return(0,o.jsxs)(n.Card,{className:d.SolutionCard,bodyStyle:{paddingBottom:16},children:[(0,o.jsx)("div",{className:d.TotalScore,children:(0,o.jsx)(n.Typography.Text,{strong:!0,children:`#${i+1} \u{5339}\u{914D}\u{65B9}\u{6848} ${s()(t.totalScore).format("0,0")}`})}),u.map(e=>(0,o.jsx)(c.CopilotBlock,{className:d.ControlledCopilotBlock,copilot:e,currentTerm:r,onIgnore:a},m(e)))]})},(e,t)=>(0,a.isEqual)(e.solution.copilots.map(e=>e.copilot_id),t.solution.copilots.map(e=>e.copilot_id))&&e.currentTerm.term_id===t.currentTerm.term_id&&e.index===t.index)},447132:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return h}});var o=r("766791"),n=r("928958"),l=r("450348"),i=r("260740"),a=r("375748"),u=r("18363"),s=r("718606"),c=r("885561"),d=r("605442"),m=r("216746"),p=r("459648"),h=()=>{let{targetTerm:e}=(0,s.useTargetTermFromParams)(),{data:t,error:r,loading:h}=(0,i.useRequest)(()=>e?.term_id?(0,c.getCopilots)(e.term_id):Promise.resolve({}),{ready:!!e?.term_id,refreshDeps:[e?.term_id]}),x=(0,l.useMemo)(()=>Object.values(t??[]),[t]);return(0,o.jsx)(n.PageContainer,{content:(0,o.jsxs)(a.Space,{wrap:!0,children:[(0,o.jsx)(s.TermChanger,{pathFn:d.RoutePath.Solutions}),x[0]?(0,o.jsxs)(a.Typography.Text,{children:["\u4E0A\u6B21\u4F5C\u4E1A\u66F4\u65B0 ",(0,o.jsx)(m.RelativeTimeText,{time:x[0].upload_time})]}):null,(0,o.jsx)(a.Typography.Text,{type:"secondary",children:"Tips: \u70B9\u51FB\u5339\u914D\u4F5C\u4E1A\u4E2D\u5149\u7075\u5934\u50CF\u53EF\u5524\u51FA\u83DC\u5355\u4E00\u952E\u6392\u9664\u5149\u7075\u6216\u4EC5\u6392\u9664\u7A81\u7834 \u2764"})]}),title:"\u4F5C\u4E1A\u5339\u914D",loading:h,children:r?(0,o.jsx)(u.TermNotFound,{}):e?(0,o.jsx)(p.SolutionView,{copilots:x,currentTerm:e}):(0,o.jsx)(u.TermNotFound,{})})}},541e3:function(e,t,r){"use strict";r.r(t),r.d(t,{QueryForm:function(){return m}});var o=r("766791"),n=r("928958"),l=r("450348"),i=r("375748"),a=r("134640"),u=r("714874"),s=r("764104"),c=r("234106"),d=r("814647");let m=e=>{let{termId:t,copilots:r}=e,{initialValues:m,setLocalInitialValues:p}=(0,s.useInitialValues)({termId:t}),{loadingSolutionResult:h,solutionResult:x,form:g,requestSolution:f}=(0,u.useSolutionResultContext)(),S=(0,l.useMemo)(()=>({searchConfig:{submitText:"\u5BFB\u627E\u65B9\u6848"},submitButtonProps:{icon:(0,o.jsx)(a.Search,{theme:"outline"})},render(e,t){let r=[...t];return"number"==typeof x?.allSolutions.solutions.length&&r.push((0,o.jsxs)(i.Typography.Text,{children:["\u5DF2\u4E3A\u60A8\u627E\u5230"," ",(0,o.jsx)(i.Typography.Text,{strong:!0,children:x.allSolutions.solutions.length})," ","\u4E2A\u4F5C\u4E1A\u5339\u914D\u65B9\u6848"]},"count")),(0,o.jsx)(i.Space,{wrap:!0,children:r})}}),[x?.allSolutions.solutions.length]),j=(0,l.useCallback)((e,t)=>{t.enableSaveLocalStorage?p(t):p(void 0),p(t.enableSaveLocalStorage?t:void 0)},[]),y=(0,l.useMemo)(()=>r.map(e=>({label:`${e.author_name} ${Math.floor(e.score/1e4)}W`,value:e.copilot_id})),[r]),b=(0,l.useCallback)(async e=>{await f(r,e)},[r]);return(0,o.jsxs)(n.ProForm,{onFinish:b,layout:"vertical",initialValues:m,submitter:S,loading:h,onValuesChange:j,form:g,children:[(0,o.jsxs)(n.ProForm.Group,{children:[(0,o.jsx)(n.ProFormRadio.Group,{name:"k",label:"\u961F\u4F0D\u6570\u91CF",rules:[{required:!0}],options:c.EXTENDED_TEAM_COUNT,allowClear:!1,radioType:"button"}),(0,o.jsx)(n.ProFormSwitch,{name:"disableAlternative",label:"\u4E0D\u8003\u8651\u53EF\u66FF\u81EA\u7531\u4F4D",tooltip:"\u5F00\u542F\u540E\uFF0C\u8BA1\u7B97\u7684\u961F\u4F0D\u65B9\u6848\u4E2D\u7EDD\u5BF9\u4E0D\u4F1A\u51FA\u73B0\u91CD\u590D\u5149\u7075\uFF0C\u6EE1\u8DB3\u56FE\u9274\u5927\u4F6C\u7684\u5F3A\u8FEB\u75C7"}),(0,o.jsxs)(n.ProForm.Group,{children:[(0,o.jsx)(n.ProFormSwitch,{name:"enableExclude",label:"\u989D\u5916\u6392\u9664\u5149\u7075",tooltip:"\u6392\u9664\u5149\u7075\u4F1A\u5FFD\u7565\u53EF\u66FF\u81EA\u7531\u4F4D"}),(0,o.jsx)(n.ProFormDependency,{name:["enableExclude"],children:e=>{let{enableExclude:t}=e;return t?(0,o.jsx)(d.ExcludeAurorianFormList,{name:"exclude"}):null}})]}),(0,o.jsx)(n.ProFormSwitch,{name:"enableSaveLocalStorage",label:"\u8BB0\u4F4F\u6211\u7684\u8BBE\u7F6E",tooltip:"\u5F00\u542F\u540E\uFF0C\u8FD9\u4E00\u671F\u8352\u5178\u7B5B\u9009\u7684\u8BBE\u7F6E\u5C06\u4F1A\u50A8\u5B58\u5728\u60A8\u7684\u6D4F\u89C8\u5668\u672C\u5730\uFF0C\u907F\u514D\u7E41\u7410\u91CD\u590D\u7B5B\u9009"})]}),(0,o.jsx)(n.ProFormDependency,{name:["copilotsIgnore"],children:e=>{let{copilotsIgnore:t}=e;return t?.length?(0,o.jsx)(n.ProFormSelect,{mode:"multiple",name:"copilotsIgnore",label:"\u5DF2\u989D\u5916\u6392\u9664\u7684\u4F5C\u4E1A",options:y}):null}})]})}},873329:function(e,t,r){"use strict";r.r(t),r.d(t,{SolutionListView:function(){return p}});var o=r("766791"),n=r("375748"),l=r("450348"),i=r("260740"),a=r("667227"),u=r("714874"),s=r("493130"),c=r("940904"),d=r("643394");let m=e=>e.copilots.map(e=>e.copilot_id).join(","),p=e=>{let{currentTerm:t}=e,r=(0,l.useRef)(null),{loadingSolutionResult:p,solutionResult:h,form:x}=(0,u.useSolutionResultContext)(),[g,f]=(0,l.useState)(1);(0,l.useEffect)(()=>{h&&1!==g&&f(1)},[h]);let S=(0,l.useMemo)(()=>({align:"center",defaultPageSize:5,current:g,onChange(e){f(e),window.scrollTo({top:r.current.offsetTop,behavior:"smooth"})},showSizeChanger:!1}),[g]),j=(0,i.useMemoizedFn)(e=>{if("aurorian"===e.type&&e.aurorianId){x.setFieldValue("enableExclude",!0);let t=x.getFieldValue("exclude");Array.isArray(t)&&(t.find(t=>t.aurorianId===e.aurorianId)?n.notification.error({message:`\u{8FD9}\u{4E2A}\u{5149}\u{7075}\u{5DF2}\u{7ECF}\u{5728}\u{6392}\u{9664}\u{5217}\u{8868}\u{4E2D}\u{4E86} \u{2764}`}):(1===t.length&&(0,a.isEmpty)(t[0])&&t.pop(),e.breakthrough?x.setFieldValue("exclude",[...t,{aurorianId:e.aurorianId,excludeBreakthroughOnly:!0,excludeBreakthrough:e.breakthrough}]):x.setFieldValue("exclude",[...t,{aurorianId:e.aurorianId}]),x.submit()))}else if("copilot"===e.type){let t=x.getFieldValue("copilotsIgnore");Array.isArray(t)?x.setFieldValue("copilotsIgnore",[...t,e.copilotId]):x.setFieldValue("copilotsIgnore",[e.copilotId]),x.submit()}});return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:c.Mount,ref:r}),(0,o.jsx)(n.ConfigProvider,{renderEmpty:e=>"List"===e?h?.allSolutions.solutions.length===0?(0,o.jsx)(n.Result,{icon:(0,o.jsx)("img",{width:100,src:s,alt:"\u9192\u5C71daddy: \u5F88\u62B1\u6B49"}),title:"\u6CA1\u80FD\u627E\u5230\u5339\u914D\u7684\u4F5C\u4E1A",subTitle:(0,o.jsxs)("div",{children:["1. \u53EF\u4EE5\u9002\u5F53\u964D\u4F4E\u641C\u7D22\u7684\u961F\u4F0D\u6570\u91CF\u3002\u4F8B\u5982\u641C\u7D22\u4E24\u961F + \u81EA\u5DF1\u81EA\u52A8\u4E00\u961F",(0,o.jsx)("br",{}),"2. \u5F53\u524D\u4F5C\u4E1A\u6570\u91CF\u8F83\u5C11\u3002\u53EF\u7B49\u5F85\u4F5C\u4E1A\u7AD9\u66F4\u65B0\u540E\u518D\u6B21\u641C\u7D22"]})}):(0,o.jsx)(n.Empty,{image:n.Empty.PRESENTED_IMAGE_SIMPLE,description:"\u51C6\u5907\u597D\u5BFB\u627E\u4F5C\u4E1A\u4E86\uFF01"}):(0,o.jsx)(n.Empty,{image:n.Empty.PRESENTED_IMAGE_SIMPLE}),children:(0,o.jsx)(n.List,{loading:p,dataSource:h?.allSolutions.solutions,pagination:S,rowKey:m,renderItem:e=>(0,o.jsx)(d.SolutionCard,{index:h?.rankSet.get(e)??0,solution:e,currentTerm:t,onIgnore:j})})})]})}},459648:function(e,t,r){"use strict";r.r(t),r.d(t,{SolutionView:function(){return u}});var o=r("766791"),n=r("375748"),l=r("714874"),i=r("541000"),a=r("873329");let u=e=>{let{copilots:t,currentTerm:r}=e;return(0,o.jsx)(l.SolutionResultProvider,{children:(0,o.jsxs)(n.Flex,{vertical:!0,gap:"middle",children:[26===r.order?(0,o.jsx)(n.Alert,{type:"error",showIcon:!1,banner:!0,message:"\u5149\u7075\u9ED1\u6F6E\u76EE\u524D\u88C5\u5907\u6280\u80FD\u5B58\u5728 Bug \u4F7F\u5F97\u8352\u5178\u5206\u6570\u53EF\u80FD\u5B58\u5728\u865A\u9AD8\u95EE\u9898\u3002\u5B98\u65B9\u5C06\u4E8E 1 \u6708 10 \u65E5\u66F4\u65B0\u540E\u4FEE\u590D\u3002\u672C\u671F\u9ED1\u6F6E\u961F\u4F0D\u5206\u6570\u4EC5\u4F9B\u53C2\u8003\u3002",action:(0,o.jsx)(n.Typography.Link,{href:"https://www.bilibili.com/read/cv29262782/",target:"_blank",children:"\u67E5\u770B\u5B98\u65B9\u516C\u544A"})}):null,(0,o.jsx)(n.Card,{children:(0,o.jsx)(i.QueryForm,{copilots:t,termId:r.term_id})}),(0,o.jsx)(a.SolutionListView,{currentTerm:r})]})})}},28549:function(e,t,r){"use strict";r.r(t),r.d(t,{solutionAlgorithm:function(){return n}});class o{static getInstance(){return null===o.instance&&(o.instance=new o),o.instance}calculateAllSolutions(e,t,o){return new Promise((n,l)=>{let i=new Worker(new URL(r.p+r.u("651"),r.b));i.addEventListener("message",e=>{n(e.data),i.terminate()}),i.addEventListener("error",e=>{l(e),i.terminate()}),i.postMessage({context:e,k:t,options:o})})}constructor(){}}o.instance=null;let n=o.getInstance()},234106:function(e,t,r){"use strict";r.r(t),r.d(t,{EXTENDED_TEAM_COUNT:function(){return o}});let o=[{label:"\u4E00\u961F",value:1},{label:"\u4E24\u961F",value:2},{label:"\u4E09\u961F",value:3},{label:"\u56DB\u961F",value:4}]},764104:function(e,t,r){"use strict";r.r(t),r.d(t,{useInitialValues:function(){return i}});var o=r("260740"),n=r("450348");let l={k:3,exclude:[{}]};function i(e){let{termId:t}=e,r=(0,n.useMemo)(()=>`SINSA_DADDY_SOLUTIONS_FILTER_KEY_V1_${t}`,[t]),[i,a]=(0,o.useLocalStorageState)(r,{defaultValue:void 0});return{initialValues:i??l,setLocalInitialValues:a}}},714874:function(e,t,r){"use strict";r.r(t),r.d(t,{SolutionResultProvider:function(){return i},useSolutionResultContext:function(){return a}});var o=r("363733"),n=r("928958"),l=r("642862");let[i,a]=(0,o.default)(()=>{let{solutionResult:e,loadingSolutionResult:t,requestSolution:r}=(0,l.useRequestSolution)(),[o]=n.ProForm.useForm();return{solutionResult:e,loadingSolutionResult:t,requestSolution:r,form:o}})},642862:function(e,t,r){"use strict";r.r(t),r.d(t,{useRequestSolution:function(){return u}});var o=r("260740"),n=r("67348"),l=r("734513"),i=r("439538"),a=r("28549");function u(){let[{WHOLE_BOX:e}]=(0,n.useModel)(i.AuroriansModel),{data:t,loading:r,runAsync:u}=(0,o.useRequest)(async(t,r)=>{let{exclude:o,k:n,disableAlternative:i,copilotsIgnore:u,enableExclude:s}=r,c=s&&Array.isArray(o)?(0,l.withoutExclude)(e,o):e,d=await a.solutionAlgorithm.calculateAllSolutions({copilots:t,availableBox:c},n,{disableAlternative:i,copilotsIgnore:u}),m=new WeakMap;for(let e=0;e<d.solutions.length;e++){let t=d.solutions[e];m.set(t,e)}return{allSolutions:d,rankSet:m}},{manual:!0});return{solutionResult:t,loadingSolutionResult:r,requestSolution:u}}}}]);
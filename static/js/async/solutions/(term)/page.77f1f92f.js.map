{"version":3,"file":"static/js/async/solutions/(term)/page.77f1f92f.js","sources":["../../node_modules/.pnpm/constate@3.3.2_react@18.2.0/node_modules/constate/dist/constate.es.js","./src/components/AdaptiveAurorianCard/index.tsx","./src/components/AurorianCard/index.tsx","./src/components/AuroriansTeam/index.tsx","./src/components/CopilotsTable/columns.tsx","./src/components/CopilotsTable/index.tsx","./src/components/ExcludeAurorianFormList/index.tsx","./src/components/RelativeTimeText/index.tsx","./src/components/SolutionCard/CopilotBlock/AdaptiveAuroriansTeam/index.tsx","./src/components/SolutionCard/CopilotBlock/index.tsx","./src/components/SolutionCard/index.tsx","./src/components/TermChanger.tsx","./src/components/TermNotFound.tsx","./src/routes/solutions/[term]/page.tsx","./src/views/SolutionView/QueryForm/index.tsx","./src/views/SolutionView/SolutionListView/index.tsx","./src/views/SolutionView/index.tsx","./src/components/AdaptiveAurorianCard/constants.ts","./src/components/AdaptiveAurorianCard/hooks/use-lazy-image.ts","./src/components/SolutionCard/CopilotBlock/constants.ts","./src/components/utils.ts","./src/services/solution-algorithm.ts","./src/views/SolutionView/QueryForm/constants.ts","./src/views/SolutionView/QueryForm/hooks/use-initial-values.ts","./src/views/SolutionView/context.ts","./src/views/SolutionView/hooks/use-request-solution.ts","./src/views/SolutionView/utils/without-exclude.ts"],"sourcesContent":["import { useContext, createElement, createContext } from 'react';\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\n//                      ^^^^^^^^^^^^^^^^^^^^\n\nvar isDev = process.env.NODE_ENV !== \"production\";\nvar NO_PROVIDER = {};\n\nfunction createUseContext(context) {\n  return function () {\n    var value = useContext(context);\n\n    if (isDev && value === NO_PROVIDER) {\n      var warnMessage = context.displayName ? \"The context consumer of \" + context.displayName + \" must be wrapped with its corresponding Provider\" : \"Component must be wrapped with Provider.\"; // eslint-disable-next-line no-console\n\n      console.warn(warnMessage);\n    }\n\n    return value;\n  };\n}\n\nfunction constate(useValue) {\n  for (var _len = arguments.length, selectors = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    selectors[_key - 1] = arguments[_key];\n  }\n\n  var contexts = [];\n  var hooks = [];\n\n  var createContext$1 = function createContext$1(displayName) {\n    var context = /*#__PURE__*/createContext(NO_PROVIDER);\n\n    if (isDev && displayName) {\n      context.displayName = displayName;\n    }\n\n    contexts.push(context);\n    hooks.push(createUseContext(context));\n  };\n\n  if (selectors.length) {\n    selectors.forEach(function (selector) {\n      return createContext$1(selector.name);\n    });\n  } else {\n    createContext$1(useValue.name);\n  }\n\n  var Provider = function Provider(_ref) {\n    var children = _ref.children,\n        props = _objectWithoutPropertiesLoose(_ref, [\"children\"]);\n\n    var value = useValue(props);\n    var element = children;\n\n    for (var i = 0; i < contexts.length; i += 1) {\n      var context = contexts[i];\n\n      var selector = selectors[i] || function (v) {\n        return v;\n      };\n\n      element = /*#__PURE__*/createElement(context.Provider, {\n        value: selector(value)\n      }, element);\n    }\n\n    return element;\n  };\n\n  if (isDev && useValue.name) {\n    Provider.displayName = \"Constate\";\n  }\n\n  return [Provider].concat(hooks);\n}\n\nexport default constate;\n","import React, { useMemo } from 'react';\nimport { useModel } from '@modern-js/runtime/model';\nimport type { AurorianType } from '@sinsa/schema';\nimport clsx from 'clsx';\nimport type { MenuProps } from 'antd';\nimport { ConfigProvider, Flex, Rate, Tag, Dropdown } from 'antd';\nimport { useBreakpoint } from '@ant-design/pro-components';\nimport { m } from 'framer-motion';\nimport type { IgnoreMessage } from '../types';\nimport styles from './styles.module.less';\nimport { useLazyImage } from './hooks/use-lazy-image';\nimport { ClassURLMapper, ElementURLMapper, RarityMapper } from './constants';\nimport { AuroriansModel } from '@/models/aurorians';\nimport { getNormalizeBreakthroughByRarity } from '@/views/SolutionView/utils/without-exclude';\n\ninterface AdaptiveArurorianCardProps {\n  name: string;\n  breakthrough?: number;\n  isReplaceable?: boolean;\n  onIgnore?: (msg: IgnoreMessage) => void;\n  disable?: boolean;\n}\n\nexport const AdaptiveAurorianCard = React.memo<AdaptiveArurorianCardProps>(\n  ({ name, breakthrough, isReplaceable, onIgnore, disable }) => {\n    const [{ auroriansMap }] = useModel(AuroriansModel);\n    const aurorian = useMemo(\n      () => auroriansMap[name] as AurorianType | undefined,\n      [auroriansMap, name],\n    );\n    const { containerRef } = useLazyImage(aurorian?.aurorian_name);\n\n    const screen = useBreakpoint();\n    const rateTheme = useMemo(() => {\n      let starSize = 10;\n      switch (screen) {\n        case 'xs':\n          starSize = 10;\n          break;\n        case 'sm':\n          starSize = 12;\n          break;\n        default:\n          starSize = 13;\n          break;\n      }\n      return {\n        components: {\n          Rate: {\n            starBg: 'white',\n            starSize,\n          },\n        },\n      };\n    }, [screen]);\n\n    const items: MenuProps['items'] = [\n      {\n        label: `排除${aurorian?.aurorian_cn_name}`,\n        key: 'ignore',\n      },\n      {\n        label: `仅排除此突破数的${aurorian?.aurorian_cn_name}`,\n        key: 'ignore-breakthrough',\n      },\n    ];\n\n    return (\n      <Dropdown\n        disabled={disable}\n        trigger={['click']}\n        getPopupContainer={() => document.body}\n        menu={{\n          items,\n          onClick: ({ key }) => {\n            console.log('key', key);\n            if (!aurorian?.aurorian_name) {\n              return;\n            }\n            switch (key) {\n              case 'ignore-breakthrough':\n                onIgnore?.({\n                  type: 'aurorian',\n                  aurorianName: aurorian.aurorian_name,\n                  breakthrough: getNormalizeBreakthroughByRarity(\n                    breakthrough ?? 0,\n                    aurorian.rarity,\n                  ),\n                });\n                break;\n              case 'ignore':\n                onIgnore?.({\n                  type: 'aurorian',\n                  aurorianName: aurorian.aurorian_name,\n                });\n                break;\n              default:\n                break;\n            }\n          },\n        }}\n      >\n        <m.div\n          ref={containerRef}\n          className={clsx(\n            styles.AdaptiveAurorianCard,\n            styles.BackgroundImage,\n            disable && styles.Disabled,\n          )}\n          whileHover={disable ? undefined : { opacity: 0.6 }}\n          whileTap={disable ? undefined : { opacity: 0.2 }}\n        >\n          {aurorian ? (\n            <>\n              <Flex vertical className={styles.NameContainer}>\n                <span>{aurorian?.aurorian_cn_name}</span>\n                {typeof breakthrough === 'number' && aurorian?.rarity ? (\n                  <ConfigProvider theme={rateTheme}>\n                    <Rate\n                      className={styles.BreakThrough}\n                      disabled\n                      value={breakthrough}\n                      count={RarityMapper[aurorian.rarity]}\n                    />\n                  </ConfigProvider>\n                ) : null}\n              </Flex>\n              <Flex className={styles.MetaContainer}>\n                <img\n                  className={styles.MetaClass}\n                  alt={aurorian.class}\n                  src={ClassURLMapper[aurorian.class]}\n                />\n                <Flex align=\"center\">\n                  <img\n                    className={styles.MetaFirstAttribute}\n                    alt={aurorian.attribute}\n                    src={ElementURLMapper[aurorian.attribute]}\n                  />\n                  {aurorian.secondary_attribute ? (\n                    <img\n                      className={styles.MetaSecondAttribute}\n                      alt={aurorian.secondary_attribute}\n                      src={ElementURLMapper[aurorian.secondary_attribute]}\n                    />\n                  ) : null}\n                </Flex>\n              </Flex>\n            </>\n          ) : null}\n          {isReplaceable ? (\n            <Tag className={styles.ReplaceableTag} color={'#dc5950'}>\n              可替\n            </Tag>\n          ) : null}\n        </m.div>\n      </Dropdown>\n    );\n  },\n);\n","import React, { useEffect, useMemo, useRef } from 'react';\nimport { useModel } from '@modern-js/runtime/model';\nimport { type AurorianType } from '@sinsa/schema';\nimport { Badge, ConfigProvider, Rate } from 'antd';\nimport { clsx } from 'clsx';\nimport styles from './styles.module.less';\nimport { ClassURLMapper, ElementURLMapper, RarityMapper } from './constants';\nimport { AuroriansModel } from '@/models/aurorians';\n\ninterface AurorianCardProps {\n  name: string;\n  breakthrough?: number;\n  isReplaceable?: boolean;\n  sameSize?: boolean;\n}\n\nexport const AurorianCard = React.memo<AurorianCardProps>(\n  ({ name, breakthrough, isReplaceable, sameSize }) => {\n    const [{ auroriansMap }] = useModel(AuroriansModel);\n    const aurorian = useMemo(\n      () => auroriansMap[name] as AurorianType | undefined,\n      [auroriansMap, name],\n    );\n\n    const cardRef = useRef<HTMLDivElement>(null);\n\n    useEffect(() => {\n      if (aurorian?.aurorian_name) {\n        import(`@/assets/skins/${aurorian.aurorian_name}.webp`)\n          .then(esm => {\n            if (typeof esm?.default === 'string') {\n              if (cardRef.current) {\n                cardRef.current.style.backgroundImage = `url(${esm.default})`;\n              }\n            }\n          })\n          .catch(() => {\n            // ignore\n          });\n      }\n    }, [aurorian?.aurorian_name]);\n\n    return (\n      <Badge.Ribbon\n        style={{\n          fontSize: '12px',\n          display: isReplaceable ? 'block' : 'none',\n          zIndex: 10000,\n        }}\n        text={isReplaceable ? '可替' : undefined}\n      >\n        <div\n          className={clsx(styles.AurorianCard, sameSize && styles.SameSize)}\n          ref={cardRef}\n        >\n          {aurorian?.class && aurorian?.attribute ? (\n            <div\n              className={clsx(\n                styles.MetaContainer,\n                sameSize && styles.SameSizeMeta,\n              )}\n            >\n              <img\n                className={styles.MetaClass}\n                alt={aurorian.class}\n                src={ClassURLMapper[aurorian.class]}\n              />\n              <div className={styles.MetaAttributeContainer}>\n                <img\n                  className={styles.MetaFirstAttribute}\n                  alt={aurorian.attribute}\n                  src={ElementURLMapper[aurorian.attribute]}\n                />\n                {aurorian.secondary_attribute ? (\n                  <img\n                    className={styles.MetaSecondAttribute}\n                    alt={aurorian.secondary_attribute}\n                    src={ElementURLMapper[aurorian.secondary_attribute]}\n                  />\n                ) : null}\n              </div>\n            </div>\n          ) : null}\n          <div className={styles.NameContainer}>\n            <div title={aurorian?.aurorian_name}>\n              {aurorian?.aurorian_cn_name}\n            </div>\n\n            {typeof breakthrough === 'number' && aurorian?.rarity ? (\n              <ConfigProvider\n                theme={{\n                  components: {\n                    Rate: {\n                      starBg: 'white',\n                      starSize: 8,\n                    },\n                  },\n                }}\n              >\n                <Rate\n                  className={styles.BreakThrough}\n                  disabled\n                  value={breakthrough}\n                  count={RarityMapper[aurorian.rarity]}\n                />\n              </ConfigProvider>\n            ) : null}\n          </div>\n        </div>\n      </Badge.Ribbon>\n    );\n  },\n);\n","import type { CopilotType } from '@sinsa/schema';\nimport type React from 'react';\nimport { AurorianCard } from '../AurorianCard';\nimport styles from './styles.module.less';\n\ninterface AuroriansTeamProps {\n  aurorianSummaries: CopilotType['aurorian_summaries'];\n}\n\nexport const AuroriansTeam: React.FC<AuroriansTeamProps> = ({\n  aurorianSummaries,\n}) => {\n  return (\n    <div className={styles.AuroriansTeam}>\n      {aurorianSummaries.map(\n        ({ aurorian_name, breakthrough, is_replaceable }) => {\n          return (\n            <AurorianCard\n              key={aurorian_name}\n              name={aurorian_name}\n              breakthrough={breakthrough}\n              isReplaceable={is_replaceable}\n            />\n          );\n        },\n      )}\n    </div>\n  );\n};\n","import type { ProColumns } from '@ant-design/pro-components';\nimport type { CopilotType, TermType } from '@sinsa/schema';\nimport { Tag, Tooltip, Typography } from 'antd';\nimport { MessageOne } from '@icon-park/react';\nimport { AuroriansTeam } from '../AuroriansTeam';\nimport { RelativeTimeText } from '../RelativeTimeText';\nimport styles from './styles.module.less';\n\nexport interface TableParams {\n  title?: CopilotType['title'];\n  author?: CopilotType['author'];\n  term?: number;\n  dataSource?: CopilotType[];\n  score?: [number, undefined] | [number, number] | [undefined, number];\n  bv?: string;\n}\n\nexport interface GetColumnsContext {\n  currentTerm?: TermType;\n  showScoreSorter?: boolean;\n}\n\nexport function getCopilotsColumns({\n  currentTerm,\n  showScoreSorter,\n}: GetColumnsContext): ProColumns<CopilotType>[] {\n  return [\n    {\n      title: '光灵配置',\n      dataIndex: 'aurorian_summaries',\n      hideInSearch: true,\n      render(_, entity) {\n        return <AuroriansTeam aurorianSummaries={entity.aurorian_summaries} />;\n      },\n      width: 80 * 5 + 24,\n    },\n    {\n      title: '分数',\n      dataIndex: 'score',\n      valueType: 'digit',\n      hideInSearch: true,\n      width: 100,\n      sorter: showScoreSorter,\n      align: 'right',\n    },\n    {\n      title: '作者',\n      dataIndex: 'author',\n      valueType: 'select',\n      hideInSearch: true,\n      ellipsis: true,\n      width: 160,\n      renderText(dom, entity) {\n        return (\n          <div className={styles.AuthorContainer}>\n            <span>{dom}</span>\n            <Tooltip title={entity.description}>\n              {entity.description ? <MessageOne /> : null}\n            </Tooltip>\n          </div>\n        );\n      },\n    },\n    {\n      title: '标题',\n      dataIndex: 'title',\n      ellipsis: true,\n      render(_, entity) {\n        return (\n          <Typography.Link\n            href={`https://www.bilibili.com/video/${entity.bv}`}\n            target=\"_blank\"\n            title={entity.title}\n          >\n            {currentTerm?.term &&\n            entity.rerun_terms?.includes(currentTerm.term) ? (\n              <Tooltip title={`复刻第 ${entity.term} 期荒典作业`}>\n                <Tag color=\"red\">复刻</Tag>\n              </Tooltip>\n            ) : null}\n            {entity.title}\n          </Typography.Link>\n        );\n      },\n    },\n    {\n      title: '上传时间',\n      dataIndex: 'upload_time',\n      valueType: 'dateTime',\n      width: 160,\n      hideInSearch: true,\n      render(_, entity) {\n        return <RelativeTimeText time={entity.upload_time} />;\n      },\n    },\n    {\n      title: 'BV 号',\n      dataIndex: 'bv',\n      hideInTable: true,\n      fieldProps: { placeholder: 'BVXXXXXXXXXX' },\n    },\n  ];\n}\n","import { useCallback, useMemo, useRef } from 'react';\nimport type { ActionType } from '@ant-design/pro-components';\nimport { ProTable } from '@ant-design/pro-components';\nimport type { CopilotType, TermType } from '@sinsa/schema';\nimport type { SortOrder } from 'antd/es/table/interface';\nimport { Card } from 'antd';\nimport { type TableParams, getCopilotsColumns } from './columns';\n\ninterface CopilotsTableProps {\n  dataSource: CopilotType[];\n  currentTerm?: TermType;\n}\n\nexport function copilotRowKey(c: CopilotType) {\n  return c.bv;\n}\n\nconst TABLE_CONST_PROPS = {\n  pagination: {\n    pageSize: 5,\n    size: 'default',\n    position: ['bottomCenter'] as any,\n    showTotal(total: number): string {\n      return `总共 ${total} 条作业`;\n    },\n  },\n  scroll: { x: 'max-content', scrollToFirstRowOnChange: true },\n} as const;\n\nexport const CopilotsTable: React.FC<CopilotsTableProps> = ({\n  dataSource,\n  currentTerm: term,\n}) => {\n  const actionRef = useRef<ActionType>();\n\n  const deps = useMemo(\n    (): TableParams => ({\n      term: term?.term,\n      dataSource: dataSource?.filter(c => !c.title?.includes('[hidden]')),\n    }),\n    [term?.term, dataSource],\n  );\n\n  const request = useCallback(\n    async (params: TableParams, sort: Record<string, SortOrder>) => {\n      const base =\n        params.dataSource?.filter(item => {\n          let ok = true;\n\n          if (params.title) {\n            ok = item.title.includes(params.title);\n          }\n          // min\n          if (typeof params.score?.[0] === 'number') {\n            ok = params.score[0] <= item.score;\n          }\n\n          // max\n          if (typeof params.score?.[1] === 'number') {\n            ok = item.score <= params.score[1];\n          }\n\n          // bv\n          if (typeof params.bv === 'string' && params.bv.startsWith('BV')) {\n            ok = item.bv === params.bv;\n          }\n          return ok;\n        }) ?? [];\n      return {\n        data: sort.score\n          ? base.sort((a, b) =>\n              sort.score === 'ascend' ? a.score - b.score : b.score - a.score,\n            )\n          : base,\n        success: true,\n      };\n    },\n    [],\n  );\n\n  const columns = useMemo(\n    () => getCopilotsColumns({ currentTerm: term, showScoreSorter: true }),\n    [term?.term],\n  );\n\n  return (\n    <Card>\n      <ProTable<CopilotType, TableParams>\n        rowKey={copilotRowKey}\n        actionRef={actionRef}\n        columns={columns}\n        params={deps}\n        request={request}\n        search={false}\n        toolBarRender={false}\n        ghost\n        {...TABLE_CONST_PROPS}\n      />\n    </Card>\n  );\n};\n","import {\n  ProForm,\n  ProFormDependency,\n  ProFormList,\n  ProFormRate,\n  ProFormSwitch,\n} from '@ant-design/pro-components';\nimport { useModel } from '@modern-js/runtime/model';\nimport { Button, Select, Tooltip } from 'antd';\nimport { Delete } from '@icon-park/react';\nimport { RarityMapper } from '../AurorianCard/constants';\nimport { AurorianCard } from '../AurorianCard';\nimport { AuroriansModel, filterAuroriansOption } from '@/models/aurorians';\n\ninterface ExcludeFormListProps {\n  name: string;\n}\n\nexport const ExcludeAurorianFormList: React.FC<ExcludeFormListProps> = ({\n  name,\n  ...props\n}) => {\n  const [{ auroriansOptions, auroriansMap }] = useModel(AuroriansModel);\n\n  return (\n    <ProFormList\n      {...props}\n      creatorButtonProps={{\n        creatorButtonText: '添加排除的光灵',\n      }}\n      name={name}\n      alwaysShowItemLabel\n      actionRender={(field, action) => [\n        <Tooltip key=\"delete\" title=\"删除此光灵\">\n          <Button\n            style={{ marginLeft: '.5rem' }}\n            icon={<Delete />}\n            onClick={e => {\n              e.stopPropagation();\n              action.remove(field.name);\n            }}\n          />\n        </Tooltip>,\n      ]}\n    >\n      {() => {\n        return (\n          <ProForm.Group>\n            <ProForm.Item\n              label=\"排除的光灵\"\n              name={'aurorianName'}\n              rules={[{ required: true }]}\n            >\n              <Select\n                options={auroriansOptions}\n                showSearch\n                allowClear={false}\n                placeholder={'支持按拼音搜索光灵, 比如 ad 可以搜到 安顿'}\n                filterOption={filterAuroriansOption}\n              />\n            </ProForm.Item>\n            <ProFormDependency\n              key=\"excludeBreakthroughOnly\"\n              name={['aurorianName']}\n            >\n              {({ aurorianName }) => {\n                if (aurorianName) {\n                  return <AurorianCard sameSize name={aurorianName} />;\n                }\n                return null;\n              }}\n            </ProFormDependency>\n            <ProFormDependency\n              key=\"excludeBreakthroughOnly\"\n              name={['aurorianName']}\n            >\n              {({ aurorianName }) => {\n                if (aurorianName) {\n                  return (\n                    <ProFormSwitch\n                      label=\"仅排除突破\"\n                      name=\"excludeBreakthroughOnly\"\n                    />\n                  );\n                }\n                return null;\n              }}\n            </ProFormDependency>\n\n            <ProFormDependency\n              key=\"excludeBreakthrough\"\n              name={['aurorianName', 'excludeBreakthroughOnly']}\n            >\n              {({ aurorianName, excludeBreakthroughOnly }) => {\n                const targetAurorian = auroriansMap[aurorianName];\n                if (excludeBreakthroughOnly && targetAurorian) {\n                  return (\n                    <ProFormRate\n                      name=\"excludeBreakthrough\"\n                      label=\"排除突破数\"\n                      fieldProps={{\n                        count: RarityMapper[targetAurorian.rarity],\n                        allowHalf: false,\n                      }}\n                      tooltip=\"大于等于此突破数的光灵会被排除，但不会排除零破的此光灵\"\n                      rules={[{ required: true }]}\n                    />\n                  );\n                }\n                return null;\n              }}\n            </ProFormDependency>\n          </ProForm.Group>\n        );\n      }}\n    </ProFormList>\n  );\n};\n","import { Tooltip } from 'antd';\nimport dayjs from 'dayjs';\nimport React from 'react';\nimport styles from './styles.module.less';\n\ninterface RelativeTimeTextProps {\n  time: Date;\n}\n\nexport const RelativeTimeText = React.memo<RelativeTimeTextProps>(\n  ({ time }) => {\n    return (\n      <Tooltip title={dayjs(time).format('YYYY-MM-DD HH:mm:ss')}>\n        <span className={styles.RelativeTimeText}>{dayjs(time).fromNow()}</span>\n      </Tooltip>\n    );\n  },\n  (prev, cur) => prev.time.valueOf() === cur.time.valueOf(),\n);\n","import type { CopilotType } from '@sinsa/schema';\nimport type React from 'react';\nimport { Flex } from 'antd';\nimport type { IgnoreMessage } from '../../../types';\nimport styles from './styles.module.less';\nimport { AdaptiveAurorianCard } from '@/components/AdaptiveAurorianCard';\n\ninterface AdaptiveAuroriansTeamProps {\n  aurorianSummaries: CopilotType['aurorian_summaries'];\n  onIgnore?: (msg: IgnoreMessage) => void;\n}\n\nexport const AdaptiveAuroriansTeam: React.FC<AdaptiveAuroriansTeamProps> = ({\n  aurorianSummaries,\n  onIgnore,\n}) => {\n  return (\n    <Flex className={styles.AuroriansTeam}>\n      {aurorianSummaries.map(\n        ({ aurorian_name, breakthrough, is_replaceable }) => {\n          return (\n            <AdaptiveAurorianCard\n              key={aurorian_name}\n              name={aurorian_name}\n              breakthrough={breakthrough}\n              isReplaceable={is_replaceable}\n              onIgnore={onIgnore}\n            />\n          );\n        },\n      )}\n    </Flex>\n  );\n};\n","import type { CopilotType, TermType } from '@sinsa/schema';\nimport { clsx } from 'clsx';\nimport {\n  Button,\n  Dropdown,\n  Flex,\n  Popconfirm,\n  Tag,\n  Tooltip,\n  Typography,\n} from 'antd';\nimport React, { useMemo } from 'react';\nimport numeral from 'numeral';\nimport { useBreakpoint } from '@ant-design/pro-components';\nimport { MessageOne, More, Paperclip, PreviewCloseOne } from '@icon-park/react';\nimport type { IgnoreMessage } from '../../types';\nimport { AdaptiveAuroriansTeam } from './AdaptiveAuroriansTeam';\nimport styles from './styles.module.less';\nimport { AssetTypeTextMapper } from './constants';\nimport { RelativeTimeText } from '@/components/RelativeTimeText';\nimport { trimTitle } from '@/components/utils';\n\ninterface CopilotBlockProps {\n  copilot: CopilotType;\n  currentTerm: TermType;\n  className?: string;\n  onIgnore?: (msg: IgnoreMessage) => void;\n}\n\nexport const CopilotBlock = React.memo<CopilotBlockProps>(\n  ({ copilot, currentTerm, className, onIgnore }) => {\n    const screen = useBreakpoint();\n    const isLarge = useMemo(\n      () => screen === 'lg' || screen === 'xl' || screen === 'xxl',\n      [screen],\n    );\n    const hasAsset = useMemo(() => {\n      return Boolean(copilot.asset_link && copilot.asset_type);\n    }, [copilot.asset_link, copilot.asset_type]);\n    const isHidden = useMemo(\n      () => copilot.title.includes('[hidden]'),\n      [copilot.title],\n    );\n    const displayTitle = useMemo(\n      () => trimTitle(copilot.title),\n      [copilot.title],\n    );\n    return (\n      <div className={clsx(styles.CopilotBlock, className)}>\n        <AdaptiveAuroriansTeam\n          onIgnore={onIgnore}\n          aurorianSummaries={copilot.aurorian_summaries}\n        />\n        <div className={styles.PaddingContainer}>\n          <Flex className={styles.Header}>\n            <span className={styles.Score}>\n              {numeral(copilot.score).format('0,0')}\n            </span>\n            <Flex className={styles.Author} align=\"center\">\n              <Typography.Text strong>{copilot.author}</Typography.Text>\n              {copilot.description && !isLarge ? (\n                <Typography.Text className={styles.Dot} type=\"secondary\">\n                  ·\n                </Typography.Text>\n              ) : null}\n              {copilot.description && !isLarge ? (\n                <Tooltip title={copilot.description}>\n                  {copilot.description ? <MessageOne size={18} /> : null}\n                </Tooltip>\n              ) : null}\n              <Typography.Text className={styles.Dot} type=\"secondary\">\n                ·\n              </Typography.Text>\n              <RelativeTimeText time={copilot.upload_time} />\n              <Typography.Text className={styles.Dot} type=\"secondary\" />\n              <Dropdown\n                menu={{\n                  items: [\n                    {\n                      key: 'ignore',\n                      label: (\n                        <span>\n                          <PreviewCloseOne /> 排除此作业\n                        </span>\n                      ),\n                    },\n                  ],\n                  onClick(info) {\n                    if (info.key === 'ignore') {\n                      onIgnore?.({\n                        type: 'copilot',\n                        bv: copilot.bv,\n                      });\n                    }\n                  },\n                }}\n              >\n                <Button size=\"small\" icon={<More />} />\n              </Dropdown>\n            </Flex>\n          </Flex>\n          <div className={styles.Title}>\n            <Typography.Link\n              disabled={isHidden}\n              href={`https://www.bilibili.com/video/${copilot.bv}`}\n              target=\"_blank\"\n              title={copilot.title}\n              ellipsis={true}\n            >\n              {currentTerm?.term &&\n              copilot.rerun_terms?.includes(currentTerm.term) ? (\n                <Tooltip title={`复刻第 ${copilot.term} 期荒典作业`}>\n                  <Tag color=\"red\">复刻</Tag>\n                </Tooltip>\n              ) : null}\n              {displayTitle}\n            </Typography.Link>\n          </div>\n          {copilot.description && isLarge ? (\n            <Typography.Paragraph type=\"secondary\">\n              {copilot.description}\n            </Typography.Paragraph>\n          ) : null}\n          {hasAsset && isLarge ? (\n            <Popconfirm\n              okText=\"确认\"\n              title=\"此资源仅为临时存档。是否开始下载？\"\n              onConfirm={() => {\n                const el = document.createElement('a');\n                el.href = copilot.asset_link!;\n                el.click();\n              }}\n            >\n              <Typography.Link>\n                <Paperclip /> {AssetTypeTextMapper[copilot.asset_type!]}\n                存档\n              </Typography.Link>\n            </Popconfirm>\n          ) : null}\n        </div>\n      </div>\n    );\n  },\n  (prev, next) =>\n    prev.className === next.className &&\n    prev.copilot.bv === next.copilot.bv &&\n    prev.currentTerm.term === next.currentTerm.term,\n);\n","import type { TermType } from '@sinsa/schema';\nimport type { Solution } from '@sinsa/solution-calculator/dist/types/types';\nimport { Card, Typography } from 'antd';\nimport React, { useMemo } from 'react';\nimport { isEqual } from 'lodash-es';\nimport numeral from 'numeral';\nimport { copilotRowKey } from '../CopilotsTable';\nimport type { IgnoreMessage } from '../types';\nimport { CopilotBlock } from './CopilotBlock';\nimport styles from './styles.module.less';\n\nexport interface SolutionCardProps {\n  solution: Solution;\n  currentTerm: TermType;\n  index: number;\n  onIgnore?: (msg: IgnoreMessage) => void;\n}\n\nexport const SolutionCard = React.memo<SolutionCardProps>(\n  ({ solution, currentTerm, index, onIgnore }) => {\n    const sorted = useMemo(() => {\n      return [...solution.copilots].sort((a, b) => b.score - a.score);\n    }, [solution]);\n    return (\n      <Card className={styles.SolutionCard} bodyStyle={{ paddingBottom: 16 }}>\n        <div className={styles.TotalScore}>\n          <Typography.Text strong>{`#${index + 1} 匹配方案 ${numeral(\n            solution.totalScore,\n          ).format('0,0')}`}</Typography.Text>\n        </div>\n\n        {sorted.map(copilot => {\n          return (\n            <CopilotBlock\n              className={styles.ControlledCopilotBlock}\n              key={copilotRowKey(copilot)}\n              copilot={copilot}\n              currentTerm={currentTerm}\n              onIgnore={onIgnore}\n            />\n          );\n        })}\n      </Card>\n    );\n  },\n  (prev, next) =>\n    isEqual(\n      prev.solution.copilots.map(c => c.bv),\n      next.solution.copilots.map(c => c.bv),\n    ) &&\n    prev.currentTerm.term === next.currentTerm.term &&\n    prev.index === next.index,\n);\n","import { useModel } from '@modern-js/runtime/model';\nimport { Select } from 'antd';\nimport { useNavigate, useParams } from '@modern-js/runtime/router';\nimport { TermsModel } from '@/models/terms';\nimport type { RoutePath } from '@/views/GlobalLayout/constants';\n\nexport const TermChanger: React.FC<{\n  pathFn: typeof RoutePath.Copilots | typeof RoutePath.Solutions;\n}> = ({ pathFn }) => {\n  const params = useParams<{ term: `${number}` }>();\n  const [terms] = useModel(TermsModel);\n  const navigate = useNavigate();\n\n  return (\n    <Select\n      value={params.term && Number.parseInt(params.term, 10)}\n      options={terms.termsOptions}\n      placeholder=\"荒典期数\"\n      onChange={(nextTerm: number) => {\n        navigate(pathFn(nextTerm));\n      }}\n    />\n  );\n};\n","import { useModel } from '@modern-js/runtime/model';\nimport { Button, Result } from 'antd';\nimport { Link } from '@modern-js/runtime/router';\nimport { TermsModel } from '@/models/terms';\nimport { RoutePath } from '@/views/GlobalLayout/constants';\n\nexport const TermNotFound: React.FC = () => {\n  const [{ latestTerm: currentTerm }] = useModel(TermsModel);\n\n  return (\n    <Result\n      status=\"404\"\n      title=\"暂时没有这期荒典作业\"\n      subTitle=\"检查链接是否正确或返回最近荒典作业\"\n      extra={\n        currentTerm ? (\n          <Link to={RoutePath.Copilots(currentTerm.term)}>\n            <Button type=\"primary\">返回最近作业</Button>\n          </Link>\n        ) : (\n          <Link to={RoutePath.Home}>\n            <Button type=\"primary\">返回首页</Button>\n          </Link>\n        )\n      }\n    />\n  );\n};\n","/* eslint-disable no-nested-ternary */\nimport { useParams } from '@modern-js/runtime/router';\nimport { PageContainer } from '@ant-design/pro-components';\nimport { useMemo } from 'react';\nimport { useRequest } from 'ahooks';\nimport { useModel } from '@modern-js/runtime/model';\nimport { Space, Typography } from 'antd';\nimport { TermNotFound } from '@/components/TermNotFound';\nimport { TermChanger } from '@/components/TermChanger';\nimport { TermsModel } from '@/models/terms';\nimport { getCopilots } from '@/services/http';\nimport { RoutePath } from '@/views/GlobalLayout/constants';\nimport { RelativeTimeText } from '@/components/RelativeTimeText';\nimport { SolutionView } from '@/views/SolutionView';\n\nconst SolutionsPage: React.FC = () => {\n  const params = useParams<{ term: `${number}` }>();\n  const [{ termsMap }] = useModel(TermsModel);\n  const currentTerm = useMemo(\n    () => params.term && termsMap[params.term],\n    [params.term],\n  );\n  const { data, error, loading } = useRequest(\n    () =>\n      currentTerm?.term\n        ? getCopilots(currentTerm.term)\n        : (Promise.resolve({}) as ReturnType<typeof getCopilots>),\n    { ready: Boolean(currentTerm?.term), refreshDeps: [currentTerm?.term] },\n  );\n\n  const copilots = useMemo(() => Object.values(data ?? []), [data]);\n\n  return (\n    <PageContainer\n      content={\n        <Space wrap>\n          <TermChanger pathFn={RoutePath.Solutions} />\n          {copilots[0] ? (\n            <Typography.Text>\n              上次作业更新 <RelativeTimeText time={copilots[0].upload_time} />\n            </Typography.Text>\n          ) : null}\n          <Typography.Text type=\"secondary\">\n            Tips: 点击匹配作业中光灵头像可唤出菜单一键排除光灵或仅排除突破 ❤\n          </Typography.Text>\n        </Space>\n      }\n      title=\"作业匹配\"\n      loading={loading}\n    >\n      {error ? (\n        <TermNotFound />\n      ) : currentTerm ? (\n        <SolutionView copilots={copilots} currentTerm={currentTerm} />\n      ) : null}\n    </PageContainer>\n  );\n};\n\nexport default SolutionsPage;\n","import type { SubmitterProps } from '@ant-design/pro-components';\nimport {\n  ProFormSelect,\n  ProFormDependency,\n  ProFormSwitch,\n  ProFormRadio,\n  ProForm,\n} from '@ant-design/pro-components';\nimport { useCallback, useMemo } from 'react';\nimport { Typography } from 'antd';\nimport type { CopilotType } from '@sinsa/schema';\nimport type { QueryParamsType } from '../schemas/query-params';\nimport { useSolutionResultContext } from '../context';\nimport { useInitialValues } from './hooks/use-initial-values';\nimport { EXTENDED_TEAM_COUNT } from './constants';\nimport { ExcludeAurorianFormList } from '@/components/ExcludeAurorianFormList';\n\ninterface QueryFormProps {\n  term: number;\n  copilots: CopilotType[];\n}\n\nexport const QueryForm: React.FC<QueryFormProps> = ({ term, copilots }) => {\n  const { initialValues, setLocalInitialValues } = useInitialValues({ term });\n\n  const { loadingSolutionResult, solutionResult, form, requestSolution } =\n    useSolutionResultContext();\n\n  const submitter = useMemo<SubmitterProps>(() => {\n    return {\n      searchConfig: { submitText: '寻找匹配方案' },\n      render(_, dom) {\n        const display = [...dom];\n        if (typeof solutionResult?.allSolutions.solutions.length === 'number') {\n          display.push(\n            <Typography.Text key=\"count\">\n              已为您找到{' '}\n              <Typography.Text strong>\n                {solutionResult.allSolutions.solutions.length}\n              </Typography.Text>{' '}\n              个匹配方案\n            </Typography.Text>,\n          );\n        }\n        return display;\n      },\n    };\n  }, [solutionResult?.allSolutions.solutions.length]);\n\n  const handleValuesChange = useCallback(\n    (_: unknown, allValues: QueryParamsType) => {\n      if (allValues.enableSaveLocalStorage) {\n        setLocalInitialValues(allValues);\n      } else {\n        setLocalInitialValues(undefined);\n      }\n      setLocalInitialValues(\n        allValues.enableSaveLocalStorage ? allValues : undefined,\n      );\n    },\n    [],\n  );\n\n  const ignoreOptions = useMemo(() => {\n    return copilots.map(c => {\n      return {\n        label: `${c.author} ${Math.floor(c.score / 10000)}W`,\n        value: c.bv,\n      };\n    });\n  }, [copilots]);\n\n  const handleOnFinish = useCallback(\n    async (params: QueryParamsType) => {\n      await requestSolution(copilots, params);\n    },\n    [copilots],\n  );\n\n  return (\n    <ProForm<QueryParamsType>\n      onFinish={handleOnFinish}\n      layout=\"vertical\"\n      initialValues={initialValues}\n      submitter={submitter}\n      loading={loadingSolutionResult}\n      onValuesChange={handleValuesChange}\n      form={form}\n    >\n      <ProForm.Group>\n        <ProFormRadio.Group\n          name={'k'}\n          label=\"队伍数量\"\n          rules={[{ required: true }]}\n          options={EXTENDED_TEAM_COUNT}\n          allowClear={false}\n          radioType=\"button\"\n        />\n        <ProFormSwitch\n          name={'disableAlternative'}\n          label=\"不考虑可替自由位\"\n          tooltip=\"开启后，计算的队伍方案中绝对不会出现重复光灵，满足图鉴大佬的强迫症\"\n        />\n        <ProForm.Group>\n          <ProFormSwitch\n            name=\"enableExclude\"\n            label=\"额外排除光灵\"\n            tooltip=\"排除光灵会忽略可替自由位\"\n          />\n          <ProFormDependency name={['enableExclude']}>\n            {({ enableExclude }: Pick<QueryParamsType, 'enableExclude'>) => {\n              return enableExclude ? (\n                <ExcludeAurorianFormList name={'exclude'} />\n              ) : null;\n            }}\n          </ProFormDependency>\n        </ProForm.Group>\n        <ProFormSwitch\n          name={'enableSaveLocalStorage'}\n          label=\"记住我的设置\"\n          tooltip=\"开启后，这一期荒典筛选的设置将会储存在您的浏览器本地，避免繁琐重复筛选\"\n        />\n      </ProForm.Group>\n      <ProFormDependency name={['copilotsIgnore']}>\n        {({ copilotsIgnore }: Pick<QueryParamsType, 'copilotsIgnore'>) => {\n          return copilotsIgnore?.length ? (\n            <ProFormSelect\n              mode=\"multiple\"\n              name={'copilotsIgnore'}\n              label=\"已额外排除的作业\"\n              options={ignoreOptions}\n            />\n          ) : null;\n        }}\n      </ProFormDependency>\n    </ProForm>\n  );\n};\n","import { ConfigProvider, Empty, List, Result, notification } from 'antd';\nimport { useEffect, useMemo, useRef, useState } from 'react';\nimport type { Solution } from '@sinsa/solution-calculator/dist/types/types';\nimport type { TermType } from '@sinsa/schema';\nimport { useMemoizedFn } from 'ahooks';\nimport { isEmpty } from 'lodash-es';\nimport { useSolutionResultContext } from '../context';\nimport type { QueryParamsType } from '../schemas/query-params';\nimport SINSA_SORRY_URL from './assets/sorry.png';\nimport styles from './styles.module.less';\nimport { SolutionCard } from '@/components/SolutionCard';\nimport type { IgnoreMessage } from '@/components/types';\n\nconst getRowKey = (sc: Solution) => sc.copilots.map(c => c.bv).join('');\n\nexport interface SolutionListViewProps {\n  currentTerm: TermType;\n}\n\nexport const SolutionListView: React.FC<SolutionListViewProps> = ({\n  currentTerm,\n}) => {\n  const inViewRef = useRef<HTMLDivElement>(null);\n\n  const { loadingSolutionResult, solutionResult, form } =\n    useSolutionResultContext();\n\n  const [current, setCurrent] = useState(1);\n\n  useEffect(() => {\n    if (solutionResult && current !== 1) {\n      setCurrent(1);\n    }\n  }, [solutionResult]);\n\n  const pagination = useMemo(() => {\n    return {\n      align: 'center' as const,\n      defaultPageSize: 5,\n      current,\n      onChange(page: number) {\n        setCurrent(page);\n        window.scrollTo({\n          top: inViewRef.current!.offsetTop,\n          behavior: 'smooth',\n        });\n      },\n      showSizeChanger: false,\n    };\n  }, [current]);\n\n  const handleIgnore = useMemoizedFn((msg: IgnoreMessage) => {\n    if (msg.type === 'aurorian' && msg.aurorianName) {\n      form.setFieldValue('enableExclude', true);\n      const prevExcludeArray = form.getFieldValue(\n        'exclude',\n      ) as QueryParamsType['exclude'];\n      if (Array.isArray(prevExcludeArray)) {\n        const target = prevExcludeArray.find(\n          t => t.aurorianName === msg.aurorianName,\n        );\n        if (!target) {\n          if (prevExcludeArray.length === 1 && isEmpty(prevExcludeArray[0])) {\n            prevExcludeArray.pop();\n          }\n          if (msg.breakthrough) {\n            form.setFieldValue('exclude', [\n              ...prevExcludeArray,\n              {\n                aurorianName: msg.aurorianName,\n                excludeBreakthroughOnly: true,\n                excludeBreakthrough: msg.breakthrough,\n              },\n            ]);\n          } else {\n            form.setFieldValue('exclude', [\n              ...prevExcludeArray,\n              { aurorianName: msg.aurorianName },\n            ]);\n          }\n          form.submit();\n        } else {\n          notification.error({\n            message: `这个光灵已经在排除列表中了 ❤`,\n          });\n        }\n      }\n    } else if (msg.type === 'copilot') {\n      const copilotsIgnoreArray = form.getFieldValue('copilotsIgnore');\n      if (Array.isArray(copilotsIgnoreArray)) {\n        form.setFieldValue('copilotsIgnore', [...copilotsIgnoreArray, msg.bv]);\n      } else {\n        form.setFieldValue('copilotsIgnore', [msg.bv]);\n      }\n      form.submit();\n    }\n  });\n\n  return (\n    <>\n      <div className={styles.Mount} ref={inViewRef} />\n      <ConfigProvider\n        renderEmpty={name => {\n          if (name === 'List') {\n            return solutionResult?.allSolutions.solutions.length === 0 ? (\n              <Result\n                icon={\n                  <img\n                    width={100}\n                    src={SINSA_SORRY_URL}\n                    alt=\"醒山daddy: 很抱歉\"\n                  />\n                }\n                title=\"没能找到匹配的作业\"\n                subTitle={\n                  <div>\n                    1. 可以适当降低搜索的队伍数量。例如搜索两队 + 自己自动一队\n                    <br />\n                    2. 当前作业数量较少。可等待作业站更新后再次搜索\n                  </div>\n                }\n              />\n            ) : (\n              <Empty\n                image={Empty.PRESENTED_IMAGE_SIMPLE}\n                description=\"准备好寻找作业了！\"\n              />\n            );\n          }\n          return <Empty image={Empty.PRESENTED_IMAGE_SIMPLE} />;\n        }}\n      >\n        <List\n          loading={loadingSolutionResult}\n          dataSource={solutionResult?.allSolutions.solutions}\n          pagination={pagination}\n          rowKey={getRowKey}\n          renderItem={item => (\n            <SolutionCard\n              index={solutionResult?.rankSet.get(item) ?? 0}\n              solution={item}\n              currentTerm={currentTerm}\n              onIgnore={handleIgnore}\n            />\n          )}\n        />\n      </ConfigProvider>\n    </>\n  );\n};\n","import type { CopilotType, TermType } from '@sinsa/schema';\nimport { Alert, Card, Flex, Typography } from 'antd';\nimport { SolutionResultProvider } from './context';\nimport { QueryForm } from './QueryForm';\nimport { SolutionListView } from './SolutionListView';\n\ninterface SolutionViewProps {\n  copilots: CopilotType[];\n  currentTerm: TermType;\n}\n\nexport const SolutionView: React.FC<SolutionViewProps> = ({\n  copilots,\n  currentTerm,\n}) => {\n  return (\n    <SolutionResultProvider>\n      <Flex vertical gap=\"middle\">\n        {currentTerm.term === 26 ? (\n          <Alert\n            type=\"error\"\n            showIcon={false}\n            banner\n            message=\"光灵黑潮目前装备技能存在 Bug 使得荒典分数可能存在虚高问题。官方将于 1 月 10 日更新后修复。本期黑潮队伍分数仅供参考。\"\n            action={\n              <Typography.Link\n                href={`https://www.bilibili.com/read/cv29262782/`}\n                target=\"_blank\"\n              >\n                查看官方公告\n              </Typography.Link>\n            }\n          />\n        ) : null}\n        <Card>\n          <QueryForm copilots={copilots} term={currentTerm.term} />\n        </Card>\n        <SolutionListView currentTerm={currentTerm} />\n      </Flex>\n    </SolutionResultProvider>\n  );\n};\n","import {\n  AurorianAttributeType,\n  AurorianClassType,\n  AurorianRarityType,\n} from '@sinsa/schema';\nimport E1 from '@/assets/elements/1.webp';\nimport E2 from '@/assets/elements/2.webp';\nimport E3 from '@/assets/elements/3.webp';\nimport E4 from '@/assets/elements/4.webp';\nimport C1 from '@/assets/classes/2001.webp';\nimport C2 from '@/assets/classes/2002.webp';\nimport C3 from '@/assets/classes/2003.webp';\nimport C4 from '@/assets/classes/2004.webp';\n\nexport const RarityMapper = {\n  [AurorianRarityType.Star6]: 6,\n  [AurorianRarityType.Star5]: 5,\n  [AurorianRarityType.Star4]: 4,\n  [AurorianRarityType.Star3]: 3,\n  [AurorianRarityType.Star2]: 2,\n  [AurorianRarityType.Star1]: 1,\n};\n\nexport const ElementURLMapper = {\n  [AurorianAttributeType.Water]: E1,\n  [AurorianAttributeType.Fire]: E2,\n  [AurorianAttributeType.Forest]: E3,\n  [AurorianAttributeType.Thunder]: E4,\n};\n\nexport const ElementTextMapper = {\n  [AurorianAttributeType.Water]: '水',\n  [AurorianAttributeType.Fire]: '火',\n  [AurorianAttributeType.Forest]: '森',\n  [AurorianAttributeType.Thunder]: '雷',\n};\n\nexport const ClassURLMapper = {\n  [AurorianClassType.Converter]: C1,\n  [AurorianClassType.Sniper]: C2,\n  [AurorianClassType.Detonator]: C3,\n  [AurorianClassType.Supporter]: C4,\n};\n","import { useEffect, useRef } from 'react';\n\nexport function useLazyImage(aurorian_name?: string) {\n  const containerRef = useRef<HTMLDivElement>(null);\n  useEffect(() => {\n    const loadImage = async () => {\n      if (aurorian_name) {\n        const module = await import(`@/assets/skins/${aurorian_name}.webp`);\n        if (typeof module?.default === 'string') {\n          if (containerRef.current) {\n            containerRef.current.style.backgroundImage = `url(${module.default})`;\n          }\n        }\n      }\n    };\n    loadImage();\n  }, [aurorian_name]);\n\n  return {\n    containerRef,\n  };\n}\n","import { AssetType } from '@sinsa/schema';\n\nexport const AssetTypeTextMapper: Record<AssetType, string> = {\n  [AssetType.No33Scripts]: '三十三号脚本',\n};\n","export function trimTitle(title: string): string {\n  return title\n    .replace('[白夜极光]', '')\n    .replace('【白夜极光】', '')\n    .replace('白夜极光', '')\n    .replace('荒典', '')\n    .replace('[hidden]', '');\n}\n","import type {\n  CalcOptions,\n  SolutionContext,\n  AllSolutions,\n} from '@sinsa/solution-calculator/dist/types/types';\n\nexport class SolutionAlgorithmService {\n  private static instance: SolutionAlgorithmService | null = null;\n\n  public static getInstance(): SolutionAlgorithmService {\n    if (SolutionAlgorithmService.instance === null) {\n      SolutionAlgorithmService.instance = new SolutionAlgorithmService();\n    }\n    return SolutionAlgorithmService.instance;\n  }\n\n  protected constructor() {\n    // noop\n  }\n\n  calculateAllSolutions(\n    context: SolutionContext,\n    k: number,\n    options: CalcOptions,\n  ): Promise<AllSolutions> {\n    return new Promise((resolve, reject) => {\n      const worker = new Worker(\n        new URL('@sinsa/solution-calculator', import.meta.url),\n      );\n\n      worker.addEventListener('message', event => {\n        const result = event.data;\n        resolve(result);\n        worker.terminate();\n      });\n\n      worker.addEventListener('error', error => {\n        reject(error);\n        worker.terminate();\n      });\n\n      worker.postMessage({ context, k, options });\n    });\n  }\n}\n\nexport const solutionAlgorithm = SolutionAlgorithmService.getInstance();\n","export const LOCAL_STORAGE_SETTING_KEY_PREFIX =\n  'SINSA_DADDY_SOLUTIONS_FILTER_KEY_V1';\n\nexport const EXTENDED_TEAM_COUNT = [\n  { label: '一队', value: 1 },\n  { label: '两队', value: 2 },\n  { label: '三队', value: 3 },\n  { label: '四队', value: 4 },\n];\n","import { useLocalStorageState } from 'ahooks';\nimport { useMemo } from 'react';\nimport type { QueryParamsType } from '../../schemas/query-params';\n\ninterface UseInitialValuesArgs {\n  term: number;\n}\n\nconst LOCAL_STORAGE_SETTING_KEY_PREFIX = 'SINSA_DADDY_SOLUTIONS_FILTER_KEY_V1';\n\nconst DEFAULT_INITIAL_VALUES: QueryParamsType = {\n  k: 3,\n  exclude: [{}] as any[],\n};\n\nexport function useInitialValues({ term }: UseInitialValuesArgs) {\n  const LOCAL_STORAGE_SETTING_KEY = useMemo(\n    () => `${LOCAL_STORAGE_SETTING_KEY_PREFIX}_${term}` as const,\n    [term],\n  );\n\n  const [loaclInitialValues, setLocalInitialValues] =\n    useLocalStorageState<QueryParamsType>(LOCAL_STORAGE_SETTING_KEY, {\n      defaultValue: undefined,\n    });\n\n  return {\n    initialValues: loaclInitialValues ?? DEFAULT_INITIAL_VALUES,\n    setLocalInitialValues,\n  };\n}\n","import constate from 'constate';\nimport { ProForm } from '@ant-design/pro-components';\nimport { useRequestSolution } from './hooks/use-request-solution';\nimport type { QueryParamsType } from './schemas/query-params';\n\nexport const [SolutionResultProvider, useSolutionResultContext] = constate(\n  () => {\n    const { solutionResult, loadingSolutionResult, requestSolution } =\n      useRequestSolution();\n\n    const [form] = ProForm.useForm<QueryParamsType>();\n\n    return {\n      solutionResult,\n      loadingSolutionResult,\n      requestSolution,\n      form,\n    };\n  },\n);\n","import { useRequest } from 'ahooks';\nimport { useModel } from '@modern-js/runtime/model';\nimport type { CopilotType } from '@sinsa/schema';\nimport type { Solution } from '@sinsa/solution-calculator/dist/types/types';\nimport type { QueryParamsType } from '../schemas/query-params';\nimport { withoutExclude } from '../utils/without-exclude';\nimport { AuroriansModel } from '@/models/aurorians';\nimport { solutionAlgorithm } from '@/services/solution-algorithm';\n\nexport function useRequestSolution() {\n  const [{ WHOLE_BOX, auroriansMap }] = useModel(AuroriansModel);\n  const {\n    data: solutionResult,\n    loading: loadingSolutionResult,\n    runAsync: requestSolution,\n  } = useRequest(\n    async (\n      copilots: CopilotType[],\n      {\n        exclude,\n        k,\n        disableAlternative,\n        copilotsIgnore,\n        enableExclude,\n      }: QueryParamsType,\n    ) => {\n      const availableBox =\n        enableExclude && Array.isArray(exclude)\n          ? withoutExclude(WHOLE_BOX.aurorian_summaries, exclude, auroriansMap)\n          : WHOLE_BOX.aurorian_summaries;\n\n      const allSolutions = await solutionAlgorithm.calculateAllSolutions(\n        {\n          copilots,\n          availableBox,\n        },\n        k,\n        { disableAlternative, copilotsIgnore },\n      );\n\n      const rankSet = new WeakMap<Solution, number>();\n      for (let i = 0; i < allSolutions.solutions.length; i++) {\n        const target = allSolutions.solutions[i];\n        rankSet.set(target, i);\n      }\n\n      // gtag('event', 'get_solution_result', {\n      //   k,\n      //   disableAlternative,\n      //   enableExclude,\n      //   solutions_length: allSolutions.solutions.length,\n      //   exclude: exclude\n      //     ?.map(\n      //       xclude =>\n      //         `${xclude.aurorianName}_${\n      //           (xclude.excludeBreakthroughOnly &&\n      //             xclude.excludeBreakthrough) ||\n      //           ''\n      //         }`,\n      //     )\n      //     .join(','),\n      // });\n\n      return {\n        allSolutions,\n        rankSet,\n      };\n    },\n    {\n      manual: true,\n    },\n  );\n\n  return {\n    solutionResult,\n    loadingSolutionResult,\n    requestSolution,\n  };\n}\n","import type { AurorianType, MyBoxType } from '@sinsa/schema';\nimport { AurorianRarityType } from '@sinsa/schema';\nimport { produce } from 'immer';\nimport type { QueryParamsType } from '../schemas/query-params';\n\nexport function getNormalizeBreakthroughByRarity(\n  currentBreakthrough: number,\n  rarity: AurorianRarityType,\n) {\n  switch (rarity) {\n    case AurorianRarityType.Star6:\n      return [0, 0, 3, 3, 3, 6].at(currentBreakthrough - 1)!;\n    case AurorianRarityType.Star5:\n      return [0, 2, 2, 2, 5].at(currentBreakthrough - 1)!;\n    case AurorianRarityType.Star4:\n      return [0, 0, 0, 4].at(currentBreakthrough - 1)!;\n    case AurorianRarityType.Star3:\n      return [0, 0, 3].at(currentBreakthrough - 1)!;\n    case AurorianRarityType.Star2:\n      return [0, 2].at(currentBreakthrough - 1)!;\n    case AurorianRarityType.Star1:\n      return [1].at(currentBreakthrough - 1)!;\n    default:\n      return 0;\n  }\n}\n\nexport function withoutExclude(\n  summaries: MyBoxType['aurorian_summaries'],\n  exclude: QueryParamsType['exclude'],\n  _: Record<AurorianType['aurorian_name'], AurorianType>,\n) {\n  if (!exclude) {\n    return summaries;\n  }\n  return produce(summaries, draft => {\n    for (const {\n      excludeBreakthroughOnly,\n      excludeBreakthrough,\n      aurorianName,\n    } of exclude) {\n      // 如果是仅仅排除突破\n      if (excludeBreakthroughOnly) {\n        // 如果排除突破的要求 >= 1\n        if (\n          typeof excludeBreakthrough === 'number' &&\n          excludeBreakthrough >= 1\n        ) {\n          // const targetAurorian = auroriansMap[aurorianName];\n          // 那么说明 Box 里的该光灵的突破一定比排除突破小 1\n          draft[aurorianName].breakthrough = Math.max(\n            excludeBreakthrough - 1,\n            0,\n          );\n        }\n      } else {\n        // 否则排除该光灵\n        delete draft[aurorianName];\n      }\n    }\n  });\n}\n"],"names":["NO_PROVIDER","useValue","_len","arguments","length","selectors","Array","_key","contexts","hooks","createContext$1","displayName","context","createContext","push","value","useContext","forEach","selector","name","Provider","_ref","children","_objectWithoutPropertiesLoose","source","excluded","key","i","target","sourceKeys","Object","keys","indexOf","element","v","createElement","concat","AdaptiveAurorianCard","breakthrough","isReplaceable","onIgnore","disable","auroriansMap","useModel","AuroriansModel","aurorian","useMemo","containerRef","useLazyImage","aurorian_name","screen","useBreakpoint","rateTheme","starSize","components","Rate","starBg","items","label","aurorian_cn_name","Dropdown","disabled","trigger","getPopupContainer","document","body","menu","onClick","console","log","type","aurorianName","getNormalizeBreakthroughByRarity","rarity","m","ref","className","whileHover","undefined","opacity","whileTap","Flex","vertical","ConfigProvider","theme","count","RarityMapper","alt","class","src","ClassURLMapper","align","attribute","ElementURLMapper","secondary_attribute","Tag","color","AurorianCard","sameSize","cardRef","useRef","useEffect","then","esm","default","current","style","backgroundImage","catch","Badge","fontSize","display","zIndex","text","clsx","title","AuroriansTeam","aurorianSummaries","map","is_replaceable","getCopilotsColumns","currentTerm","showScoreSorter","dataIndex","hideInSearch","render","_","entity","aurorian_summaries","width","valueType","sorter","ellipsis","renderText","dom","Tooltip","description","MessageOne","Typography","href","bv","term","rerun_terms","includes","RelativeTimeText","time","upload_time","hideInTable","fieldProps","placeholder","copilotRowKey","c","TABLE_CONST_PROPS","pagination","pageSize","size","position","showTotal","total","scroll","x","scrollToFirstRowOnChange","CopilotsTable","dataSource","actionRef","deps","filter","request","useCallback","params","sort","base","item","ok","score","startsWith","data","a","b","success","columns","Card","ProTable","rowKey","search","toolBarRender","ghost","ExcludeAurorianFormList","props","auroriansOptions","ProFormList","creatorButtonProps","creatorButtonText","alwaysShowItemLabel","actionRender","field","action","Button","marginLeft","icon","Delete","e","stopPropagation","remove","ProForm","rules","required","Select","options","showSearch","allowClear","filterOption","filterAuroriansOption","ProFormDependency","ProFormSwitch","excludeBreakthroughOnly","targetAurorian","ProFormRate","allowHalf","tooltip","format","fromNow","prev","cur","valueOf","AdaptiveAuroriansTeam","CopilotBlock","copilot","isLarge","hasAsset","Boolean","asset_link","asset_type","isHidden","displayTitle","trimTitle","strong","author","PreviewCloseOne","info","More","Popconfirm","okText","onConfirm","el","click","Paperclip","AssetTypeTextMapper","next","SolutionCard","solution","index","sorted","copilots","bodyStyle","paddingBottom","totalScore","isEqual","TermChanger","pathFn","useParams","terms","TermsModel","navigate","useNavigate","Number","parseInt","termsOptions","onChange","nextTerm","TermNotFound","latestTerm","Result","status","subTitle","extra","Link","to","RoutePath","termsMap","error","loading","useRequest","getCopilots","Promise","resolve","ready","refreshDeps","values","PageContainer","content","Space","wrap","SolutionView","QueryForm","initialValues","setLocalInitialValues","useInitialValues","loadingSolutionResult","solutionResult","form","requestSolution","useSolutionResultContext","submitter","searchConfig","submitText","allSolutions","solutions","handleValuesChange","allValues","enableSaveLocalStorage","ignoreOptions","Math","floor","handleOnFinish","onFinish","layout","onValuesChange","ProFormRadio","EXTENDED_TEAM_COUNT","radioType","enableExclude","copilotsIgnore","ProFormSelect","mode","getRowKey","sc","join","SolutionListView","inViewRef","setCurrent","useState","defaultPageSize","page","window","scrollTo","top","offsetTop","behavior","showSizeChanger","handleIgnore","useMemoizedFn","msg","setFieldValue","prevExcludeArray","getFieldValue","isArray","find","t","notification","message","isEmpty","pop","excludeBreakthrough","submit","copilotsIgnoreArray","renderEmpty","Empty","image","List","renderItem","rankSet","get","SolutionResultProvider","gap","Alert","showIcon","banner","AurorianRarityType","AurorianAttributeType","AurorianClassType","loadImage","module","AssetType","replace","SolutionAlgorithmService","getInstance","instance","calculateAllSolutions","k","reject","worker","Worker","URL","addEventListener","event","terminate","postMessage","solutionAlgorithm","DEFAULT_INITIAL_VALUES","exclude","LOCAL_STORAGE_SETTING_KEY","loaclInitialValues","useLocalStorageState","defaultValue","useRequestSolution","WHOLE_BOX","runAsync","disableAlternative","availableBox","withoutExclude","WeakMap","set","manual","currentBreakthrough","at","summaries","produce","draft","max"],"mappings":"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"}
/*! For license information please see page.e8cf55af.js.LICENSE.txt */
(globalThis.webpackChunk_sinsa_web=globalThis.webpackChunk_sinsa_web||[]).push([["6453"],{20586:function(e,r,t){"use strict";e.exports={AurorianCard:"AurorianCard-d42393",aurorianCard:"AurorianCard-d42393",BlackContainer:"BlackContainer-e8c720",blackContainer:"BlackContainer-e8c720",BreakThrough:"BreakThrough-ce2a97",breakThrough:"BreakThrough-ce2a97",MetaAttributeContainer:"MetaAttributeContainer-_81be2",metaAttributeContainer:"MetaAttributeContainer-_81be2",MetaClass:"MetaClass-_18f93",metaClass:"MetaClass-_18f93",MetaContainer:"MetaContainer-_9d666",metaContainer:"MetaContainer-_9d666",MetaFirstAttribute:"MetaFirstAttribute-_39683",metaFirstAttribute:"MetaFirstAttribute-_39683",MetaSecondAttribute:"MetaSecondAttribute-b69352",metaSecondAttribute:"MetaSecondAttribute-b69352",NameContainer:"NameContainer-a93283",nameContainer:"NameContainer-a93283",SameSize:"SameSize-_8fcb7",sameSize:"SameSize-_8fcb7",SameSizeMeta:"SameSizeMeta-_798c6",sameSizeMeta:"SameSizeMeta-_798c6",Skin:"Skin-_6e8ba",skin:"Skin-_6e8ba"}},3569:function(e,r,t){"use strict";e.exports={AuroriansTeam:"AuroriansTeam-_162da",auroriansTeam:"AuroriansTeam-_162da"}},37084:function(e,r,t){"use strict";t.r(r),t.d(r,{AurorianCard:function(){return m}});var a=t("66791"),n=t("50348"),o=t.n(n),i=t("67348"),s=t("75748"),l=t("35079"),u=t("20586"),c=t("75122"),d=t("39538");let m=o().memo(e=>{let{name:r,breakthrough:o,isReplaceable:m,sameSize:h}=e,[{auroriansMap:p}]=(0,i.useModel)(d.AuroriansModel),x=(0,n.useMemo)(()=>p[r],[p,r]),b=(0,n.useRef)(null);return(0,n.useEffect)(()=>{x?.aurorian_name&&t("32662")(`@/assets/skins/${x.aurorian_name}.webp`.replace("@/assets/skins/","./")).then(e=>{"string"==typeof e?.default&&b.current&&(b.current.style.backgroundImage=`url(${e.default})`)}).catch(()=>{})},[x?.aurorian_name]),(0,a.jsx)(s.Badge.Ribbon,{style:{fontSize:"12px",display:m?"block":"none",zIndex:1e4},text:m?"\u53EF\u66FF":void 0,children:(0,a.jsxs)("div",{className:(0,l.clsx)(u.AurorianCard,h&&u.SameSize),ref:b,children:[x?.class&&x?.attribute?(0,a.jsxs)("div",{className:(0,l.clsx)(u.MetaContainer,h&&u.SameSizeMeta),children:[(0,a.jsx)("img",{className:u.MetaClass,alt:x.class,src:c.ClassURLMapper[x.class]}),(0,a.jsxs)("div",{className:u.MetaAttributeContainer,children:[(0,a.jsx)("img",{className:u.MetaFirstAttribute,alt:x.attribute,src:c.ElementURLMapper[x.attribute]}),x.secondary_attribute?(0,a.jsx)("img",{className:u.MetaSecondAttribute,alt:x.secondary_attribute,src:c.ElementURLMapper[x.secondary_attribute]}):null]})]}):null,(0,a.jsxs)("div",{className:u.NameContainer,children:[(0,a.jsx)("div",{title:x?.aurorian_name,children:x?.aurorian_cn_name}),"number"==typeof o&&x?.rarity?(0,a.jsx)(s.ConfigProvider,{theme:{components:{Rate:{starBg:"white",starSize:8}}},children:(0,a.jsx)(s.Rate,{className:u.BreakThrough,disabled:!0,value:o,count:c.RarityMapper[x.rarity]})}):null]})]})})})},92079:function(e,r,t){"use strict";t.r(r),t.d(r,{AuroriansTeam:function(){return i}});var a=t("66791");t("50348");var n=t("37084"),o=t("3569");let i=e=>{let{aurorianSummaries:r}=e;return(0,a.jsx)("div",{className:o.AuroriansTeam,children:r.map(e=>{let{aurorian_name:r,breakthrough:t,is_replaceable:o}=e;return(0,a.jsx)(n.AurorianCard,{name:r,breakthrough:t,isReplaceable:o},r)})})}},84157:function(e,r,t){"use strict";t.r(r),t.d(r,{copilotsColumns:function(){return i}});var a=t("66791"),n=t("75748"),o=t("92079");let i=[{title:"\u5149\u7075\u914D\u7F6E",dataIndex:"aurorian_summaries",hideInSearch:!0,render:(e,r)=>(0,a.jsx)(o.AuroriansTeam,{aurorianSummaries:r.aurorian_summaries}),width:424},{title:"\u7ED3\u7B97\u5206\u6570",dataIndex:"score",valueType:"digit",hideInSearch:!0,width:130},{title:"\u4F5C\u8005",dataIndex:"author",valueType:"select",hideInSearch:!0,ellipsis:!0,width:160,renderText:(e,r)=>(0,a.jsxs)(a.Fragment,{children:[e,(0,a.jsx)(n.Tooltip,{title:r.description,children:r.description?"\uD83D\uDDD2":null})]})},{title:"\u6807\u9898",dataIndex:"title",ellipsis:!0,render:(e,r)=>(0,a.jsx)(n.Typography.Link,{href:`https://b23.tv/${r.bv}`,target:"_blank",title:r.title,children:r.title})},{title:"\u4E0A\u4F20\u65F6\u95F4",dataIndex:"upload_time",valueType:"dateTime",width:160,hideInSearch:!0}]},64204:function(e,r,t){"use strict";t.r(r),t.d(r,{copilotRowKey:function(){return s},CopilotsTable:function(){return u}});var a=t("66791"),n=t("50348"),o=t("88858"),i=t("84157");function s(e){return e.bv}let l={pagination:{pageSize:5,size:"default",position:["bottomCenter"]},scroll:{x:"max-content",scrollToFirstRowOnChange:!0}},u=e=>{let{dataSource:r,term:t}=e,u=(0,n.useRef)(),c=(0,n.useMemo)(()=>({term:t,dataSource:r}),[t,r]),d=(0,n.useCallback)(async e=>({data:e.dataSource?.filter(r=>{let t=!0;return e.title&&(t=r.title.includes(e.title)),"number"==typeof e.score?.[0]&&(t=e.score[0]<=r.score),"number"==typeof e.score?.[1]&&(t=r.score<=e.score[1]),t})??[],success:!0}),[]);return(0,a.jsx)(o.ProTable,{rowKey:s,actionRef:u,columns:i.copilotsColumns,params:c,request:d,...l})}},14647:function(e,r,t){"use strict";t.r(r),t.d(r,{ExcludeAurorianFormList:function(){return u}});var a=t("66791"),n=t("88858"),o=t("67348"),i=t("75122"),s=t("37084"),l=t("39538");let u=e=>{let{name:r,...t}=e,[{auroriansOptions:u,auroriansMap:c}]=(0,o.useModel)(l.AuroriansModel);return(0,a.jsx)(n.ProFormList,{...t,creatorButtonProps:{creatorButtonText:"\u6DFB\u52A0\u6392\u9664\u7684\u5149\u7075"},name:r,alwaysShowItemLabel:!0,min:1,children:()=>(0,a.jsxs)(n.ProForm.Group,{children:[(0,a.jsx)(n.ProFormSelect,{label:"\u6392\u9664\u7684\u5149\u7075",name:"aurorianName",options:u,allowClear:!0,width:"sm",rules:[{required:!0}]}),(0,a.jsx)(n.ProFormDependency,{name:["aurorianName"],children:e=>{let{aurorianName:r}=e;return r?(0,a.jsx)(s.AurorianCard,{sameSize:!0,name:r}):null}},"excludeBreakthroughOnly"),(0,a.jsx)(n.ProFormDependency,{name:["aurorianName"],children:e=>{let{aurorianName:r}=e;return r?(0,a.jsx)(n.ProFormSwitch,{label:"\u4EC5\u6392\u9664\u7A81\u7834",name:"excludeBreakthroughOnly"}):null}},"excludeBreakthroughOnly"),(0,a.jsx)(n.ProFormDependency,{name:["aurorianName","excludeBreakthroughOnly"],children:e=>{let{aurorianName:r,excludeBreakthroughOnly:t}=e,o=c[r];return t&&o?(0,a.jsx)(n.ProFormRate,{name:"excludeBreakthrough",label:"\u6392\u9664\u7A81\u7834\u6570",fieldProps:{count:i.RarityMapper[o.rarity],allowHalf:!1},tooltip:"\u5927\u4E8E\u7B49\u4E8E\u6B64\u7A81\u7834\u6570\u7684\u5149\u7075\u4F1A\u88AB\u6392\u9664\uFF0C\u4F46\u4E0D\u4F1A\u6392\u9664\u96F6\u7834\u7684\u6B64\u5149\u7075"}):null}},"excludeBreakthrough")]})})}},71240:function(e,r,t){"use strict";t.r(r),t.d(r,{SolutionScenarioCard:function(){return u}});var a=t("66791"),n=t("88858"),o=t("50348"),i=t("26424"),s=t("64204"),l=t("84157");let u=e=>{let{solution:r,title:t}=e,u=(0,o.useCallback)(async()=>({data:(0,i.produce)(r.copilots,e=>{e.sort((e,r)=>Number(r.score-e.score))}),success:!0}),[]),c=(0,o.useMemo)(()=>({title:t,settings:[]}),[t]),d=(0,o.useMemo)(()=>({x:"max-content"}),[]);return(0,a.jsx)(n.ProTable,{showHeader:!0,toolbar:c,rowKey:s.copilotRowKey,columns:l.copilotsColumns,request:u,search:!1,pagination:!1,scroll:d,ghost:!0})}},17266:function(e,r,t){"use strict";t.r(r),t.d(r,{CopilotSolution:function(){return f}});var a=t("66791"),n=t("88858"),o=t("75748"),i=t("67348"),s=t("32802"),l=t.n(s),u=t("26424"),c=t("60740"),d=t("50348"),m=t("51436"),h=t("39538"),p=t("71240"),x=t("14647");let b={k:3,box:"whole",exclude:[{}]},f=e=>{let{dataSource:r}=e,[{WHOLE_BOX:t}]=(0,i.useModel)(h.AuroriansModel),s=(0,d.useRef)(),[f,g]=(0,d.useState)(1),C=(0,d.useRef)(null),{data:S,loading:j,runAsync:y}=(0,c.useRequest)(async e=>{let a=t.aurorian_summaries;e.exclude&&(a=(0,u.produce)(t.aurorian_summaries,r=>{for(let t of e.exclude)t.excludeBreakthroughOnly?"number"==typeof t.excludeBreakthrough&&t.excludeBreakthrough>=1&&(r[t.aurorianName].breakthrough=t.excludeBreakthrough-1):delete r[t.aurorianName]}));let[n]=await Promise.all([Promise.resolve((0,m.calculateAllScenariosAndScores)({copilots:r,availableBox:a},e.k,{disalbeAlternative:e.disalbeAlternative})),new Promise(e=>window.setTimeout(e,100))]),o=new WeakMap;for(let e=0;e<n.scenarios.length;e++){let r=n.scenarios[e];o.set(r,e)}return{solutionResult:n,rankSet:o}},{manual:!0,defaultParams:[b]});return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.Card,{style:{marginBottom:"1rem"},children:(0,a.jsx)(n.ProForm,{formRef:s,onFinish:async e=>{await y(e),g(1)},initialValues:b,layout:"vertical",submitter:{searchConfig:{submitText:"\u5BFB\u627E\u5339\u914D\u65B9\u6848"},render:(e,r)=>(0,a.jsxs)(o.Space,{wrap:!0,children:[r,S?.solutionResult?(0,a.jsxs)(o.Typography.Text,{children:["\u5DF2\u4E3A\u60A8\u627E\u5230"," ",(0,a.jsx)(o.Typography.Text,{strong:!0,children:S?.solutionResult.scenarios.length})," ","\u4E2A\u5339\u914D\u65B9\u6848"]}):null]})},loading:j,children:(0,a.jsxs)(n.ProForm.Group,{children:[(0,a.jsx)(n.ProFormRadio.Group,{name:"k",label:"\u961F\u4F0D\u6570\u91CF",rules:[{required:!0}],options:[{label:"\u4E24\u652F\u961F\u4F0D",value:2},{label:"\u4E09\u652F\u961F\u4F0D",value:3},{label:"\u56DB\u652F\u961F\u4F0D",value:4}],allowClear:!1,radioType:"button"}),(0,a.jsx)(n.ProFormRadio.Group,{name:"box",label:"Box \u5339\u914D",options:[{label:"\u5168\u56FE\u9274\u6EE1\u7A81\u7834 Box",value:"whole"},{label:"\u6211\u7684\u81EA\u5B9A\u4E49 Box",value:"my-box",disabled:!0}],allowClear:!1,radioType:"button",rules:[{required:!0}],extra:"\u81EA\u5B9A\u4E49 Box \u5339\u914D\u6682\u4E0D\u652F\u6301\uFF0C\u65E0\u6CD5\u9009\u4E2D\uFF0C\u656C\u8BF7\u671F\u5F85w"}),(0,a.jsx)(n.ProFormSwitch,{name:"disalbeAlternative",label:"\u4E0D\u8003\u8651\u53EF\u66FF\u81EA\u7531\u4F4D",tooltip:"\u5F00\u542F\u540E\uFF0C\u8BA1\u7B97\u7684\u961F\u4F0D\u65B9\u6848\u4E2D\u7EDD\u5BF9\u4E0D\u4F1A\u51FA\u73B0\u91CD\u590D\u5149\u7075\uFF0C\u6EE1\u8DB3\u56FE\u9274\u5927\u4F6C\u7684\u5F3A\u8FEB\u75C7"}),(0,a.jsxs)(n.ProForm.Group,{children:[(0,a.jsx)(n.ProFormSwitch,{name:"enableExclude",label:"\u989D\u5916\u6392\u9664\u5149\u7075",tooltip:"\u6392\u9664\u5149\u7075\u4F1A\u5FFD\u7565\u53EF\u66FF\u81EA\u7531\u4F4D"}),(0,a.jsx)(n.ProFormDependency,{name:["enableExclude"],children:e=>{let{enableExclude:r}=e;return r?(0,a.jsx)(x.ExcludeAurorianFormList,{name:"exclude"}):null}})]})]})})}),(0,a.jsx)("div",{ref:C}),(0,a.jsx)(o.List,{loading:j,dataSource:S?.solutionResult?.scenarios,pagination:{align:"center",defaultPageSize:5,current:f,onChange(e){g(e),window.scrollTo({top:C.current.offsetTop,behavior:"smooth"})},showSizeChanger:!1},rowKey:e=>e.copilots.map(e=>e.bv).join(""),renderItem:e=>(0,a.jsx)(o.Card,{title:(0,a.jsxs)(a.Fragment,{children:[S?.rankSet?`#${(S.rankSet.get(e)??0)+1} \u{5339}\u{914D}\u{65B9}\u{6848} `:null,l()(e.totalScore).format("0,0")]}),style:{marginBottom:"1rem"},children:(0,a.jsx)(p.SolutionScenarioCard,{solution:e})},e.copilots.map(e=>e.bv).join(""))})]})}},51937:function(e,r,t){"use strict";t.r(r),t.d(r,{TermChanger:function(){return l}});var a=t("66791"),n=t("67348"),o=t("75748"),i=t("51895"),s=t("9596");let l=e=>{let{pathFn:r}=e,t=(0,i.useParams)(),[l]=(0,n.useModel)(s.TermsModel),u=(0,i.useNavigate)();return(0,a.jsx)(o.Select,{value:t.term&&Number.parseInt(t.term,10),options:l.termsOptions,placeholder:"\u8352\u5178\u671F\u6570",onChange:e=>{u(r(e))}})}},1860:function(e,r,t){"use strict";t.r(r),t.d(r,{TermNotFound:function(){return u}});var a=t("66791"),n=t("67348"),o=t("75748"),i=t("51895"),s=t("9596"),l=t("28445");let u=()=>{let[{firstTerm:e}]=(0,n.useModel)(s.TermsModel);return(0,a.jsx)(o.Result,{status:"404",title:"\u8352\u5178\u4F5C\u4E1A\u4E0D\u89C1\u4E86",subTitle:"\u68C0\u67E5\u94FE\u63A5\u662F\u5426\u6B63\u786E\u6216\u8FD4\u56DE\u6700\u8FD1\u8352\u5178\u4F5C\u4E1A",extra:e?(0,a.jsx)(i.Link,{to:l.RoutePath.Copilots(e.term),children:(0,a.jsx)(o.Button,{type:"primary",children:"\u8FD4\u56DE\u6700\u8FD1\u4F5C\u4E1A"})}):(0,a.jsx)(i.Link,{to:l.RoutePath.Home,children:(0,a.jsx)(o.Button,{type:"primary",children:"\u8FD4\u56DE\u9996\u9875"})})})}},4308:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return m}});var a=t("66791"),n=t("51895"),o=t("88858"),i=t("50348"),s=t("60740"),l=t("1860"),u=t("51937"),c=t("17266"),d=t("28445"),m=()=>{let e=(0,n.useParams)(),{data:r,error:t,loading:m}=(0,s.useRequest)(()=>fetch(`/api/copilots/${e.term}.json`).then(e=>e.json()),{refreshDeps:[e.term]}),h=(0,i.useMemo)(()=>Object.values(r??[]),[r]);return t?(0,a.jsx)(l.TermNotFound,{}):(0,a.jsx)(o.PageContainer,{content:(0,a.jsx)(u.TermChanger,{pathFn:d.RoutePath.Solutions}),title:"\u4F5C\u4E1A\u5339\u914D",loading:m,children:(0,a.jsx)(c.CopilotSolution,{dataSource:h})})}},51436:function(e,r,t){"use strict";t.r(r),t.d(r,{calculateAllScenariosAndScores:function(){return o}});var a=t("80620"),n=t("47621");function o(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,{disalbeAlternative:t}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o={scenarios:[]},i=[{currentCopilotIndex:0,currentScenario:[],remainingBox:e.availableBox,count:r}];for(;i.length>0;){let{currentCopilotIndex:s,currentScenario:l,remainingBox:u,count:c}=i.pop();if(0===c||s===e.copilots.length)l.length>=r&&o.scenarios.push({copilots:[...l],totalScore:l.reduce((e,r)=>e+BigInt(r.score),BigInt(0))});else{let r=e.copilots[s];if((0,n.canUseCopilot)(u,r,{disalbeAlternative:t})){let e=(0,a.boxWithoutAuroriansInCopilot)(u,r,{disalbeAlternative:t});i.push({currentCopilotIndex:s+1,currentScenario:[...l,r],remainingBox:e,count:c-1})}i.push({currentCopilotIndex:s+1,currentScenario:l,remainingBox:u,count:c})}}return o.scenarios.sort((e,r)=>Number(r.totalScore-e.totalScore)),o}},80620:function(e,r,t){"use strict";t.r(r),t.d(r,{boxWithoutAuroriansInCopilot:function(){return n}});var a=t("26424");function n(e,r,t){let{disalbeAlternative:n}=t;return(0,a.produce)(e,e=>{for(let t of r.aurorian_summaries)(n||!t.is_replaceable)&&delete e[t.aurorian_name]})}},47621:function(e,r,t){"use strict";function a(e,r,t){let{disalbeAlternative:a}=t;for(let t of r.aurorian_summaries){if(!a&&t.is_replaceable)continue;let r=e[t.aurorian_name];if(!r||r.breakthrough<t.breakthrough)return!1}return!0}t.r(r),t.d(r,{canUseCopilot:function(){return a}})}}]);
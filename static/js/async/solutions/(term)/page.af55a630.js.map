{"version":3,"file":"static/js/async/solutions/(term)/page.af55a630.js","sources":["../../node_modules/.pnpm/constate@3.3.2_react@18.2.0/node_modules/constate/dist/constate.es.js","./src/components/AurorianCard/index.tsx","./src/components/ExcludeAurorianFormList/index.tsx","./src/components/SolutionCard/index.tsx","./src/routes/solutions/[term]/page.tsx","./src/views/SolutionView/QueryForm/index.tsx","./src/views/SolutionView/SolutionListView/index.tsx","./src/views/SolutionView/index.tsx","./src/services/solution-algorithm.ts","./src/views/SolutionView/QueryForm/constants.ts","./src/views/SolutionView/QueryForm/hooks/use-initial-values.ts","./src/views/SolutionView/context.ts","./src/views/SolutionView/hooks/use-request-solution.ts"],"sourcesContent":["import { useContext, createElement, createContext } from 'react';\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\n//                      ^^^^^^^^^^^^^^^^^^^^\n\nvar isDev = process.env.NODE_ENV !== \"production\";\nvar NO_PROVIDER = {};\n\nfunction createUseContext(context) {\n  return function () {\n    var value = useContext(context);\n\n    if (isDev && value === NO_PROVIDER) {\n      var warnMessage = context.displayName ? \"The context consumer of \" + context.displayName + \" must be wrapped with its corresponding Provider\" : \"Component must be wrapped with Provider.\"; // eslint-disable-next-line no-console\n\n      console.warn(warnMessage);\n    }\n\n    return value;\n  };\n}\n\nfunction constate(useValue) {\n  for (var _len = arguments.length, selectors = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    selectors[_key - 1] = arguments[_key];\n  }\n\n  var contexts = [];\n  var hooks = [];\n\n  var createContext$1 = function createContext$1(displayName) {\n    var context = /*#__PURE__*/createContext(NO_PROVIDER);\n\n    if (isDev && displayName) {\n      context.displayName = displayName;\n    }\n\n    contexts.push(context);\n    hooks.push(createUseContext(context));\n  };\n\n  if (selectors.length) {\n    selectors.forEach(function (selector) {\n      return createContext$1(selector.name);\n    });\n  } else {\n    createContext$1(useValue.name);\n  }\n\n  var Provider = function Provider(_ref) {\n    var children = _ref.children,\n        props = _objectWithoutPropertiesLoose(_ref, [\"children\"]);\n\n    var value = useValue(props);\n    var element = children;\n\n    for (var i = 0; i < contexts.length; i += 1) {\n      var context = contexts[i];\n\n      var selector = selectors[i] || function (v) {\n        return v;\n      };\n\n      element = /*#__PURE__*/createElement(context.Provider, {\n        value: selector(value)\n      }, element);\n    }\n\n    return element;\n  };\n\n  if (isDev && useValue.name) {\n    Provider.displayName = \"Constate\";\n  }\n\n  return [Provider].concat(hooks);\n}\n\nexport default constate;\n","import React, { useEffect, useMemo, useRef } from 'react';\nimport { useModel } from '@modern-js/runtime/model';\nimport { type AurorianType } from '@sinsa/schema';\nimport { Badge, ConfigProvider, Rate } from 'antd';\nimport { clsx } from 'clsx';\nimport styles from './styles.module.less';\nimport { ClassURLMapper, ElementURLMapper, RarityMapper } from './constants';\nimport { AuroriansModel } from '@/models/aurorians';\n\ninterface AurorianCardProps {\n  name: string;\n  breakthrough?: number;\n  isReplaceable?: boolean;\n  sameSize?: boolean;\n}\n\nexport const AurorianCard = React.memo<AurorianCardProps>(\n  ({ name, breakthrough, isReplaceable, sameSize }) => {\n    const [{ auroriansMap }] = useModel(AuroriansModel);\n    const aurorian = useMemo(\n      () => auroriansMap[name] as AurorianType | undefined,\n      [auroriansMap, name],\n    );\n\n    const cardRef = useRef<HTMLDivElement>(null);\n\n    useEffect(() => {\n      if (aurorian?.aurorian_name) {\n        import(`@/assets/skins/${aurorian.aurorian_name}.webp`)\n          .then(esm => {\n            if (typeof esm?.default === 'string') {\n              if (cardRef.current) {\n                cardRef.current.style.backgroundImage = `url(${esm.default})`;\n              }\n            }\n          })\n          .catch(() => {\n            // ignore\n          });\n      }\n    }, [aurorian?.aurorian_name]);\n\n    return (\n      <Badge.Ribbon\n        style={{\n          fontSize: '12px',\n          display: isReplaceable ? 'block' : 'none',\n          zIndex: 10000,\n        }}\n        text={isReplaceable ? '可替' : undefined}\n      >\n        <div\n          className={clsx(styles.AurorianCard, sameSize && styles.SameSize)}\n          ref={cardRef}\n        >\n          {aurorian?.class && aurorian?.attribute ? (\n            <div\n              className={clsx(\n                styles.MetaContainer,\n                sameSize && styles.SameSizeMeta,\n              )}\n            >\n              <img\n                className={styles.MetaClass}\n                alt={aurorian.class}\n                src={ClassURLMapper[aurorian.class]}\n              />\n              <div className={styles.MetaAttributeContainer}>\n                <img\n                  className={styles.MetaFirstAttribute}\n                  alt={aurorian.attribute}\n                  src={ElementURLMapper[aurorian.attribute]}\n                />\n                {aurorian.secondary_attribute ? (\n                  <img\n                    className={styles.MetaSecondAttribute}\n                    alt={aurorian.secondary_attribute}\n                    src={ElementURLMapper[aurorian.secondary_attribute]}\n                  />\n                ) : null}\n              </div>\n            </div>\n          ) : null}\n          <div className={styles.NameContainer}>\n            <div title={aurorian?.aurorian_name}>\n              {aurorian?.aurorian_cn_name}\n            </div>\n\n            {typeof breakthrough === 'number' && aurorian?.rarity ? (\n              <ConfigProvider\n                theme={{\n                  components: {\n                    Rate: {\n                      starBg: 'white',\n                      starSize: 8,\n                    },\n                  },\n                }}\n              >\n                <Rate\n                  className={styles.BreakThrough}\n                  disabled\n                  value={breakthrough}\n                  count={RarityMapper[aurorian.rarity]}\n                />\n              </ConfigProvider>\n            ) : null}\n          </div>\n        </div>\n      </Badge.Ribbon>\n    );\n  },\n);\n","import {\n  ProForm,\n  ProFormDependency,\n  ProFormList,\n  ProFormRate,\n  ProFormSwitch,\n} from '@ant-design/pro-components';\nimport { useModel } from '@modern-js/runtime/model';\nimport { Button, Select, Tooltip } from 'antd';\nimport { Delete } from '@icon-park/react';\nimport { RarityMapper } from '../AurorianCard/constants';\nimport { AurorianCard } from '../AurorianCard';\nimport { AuroriansModel, filterAuroriansOption } from '@/models/aurorians';\n\ninterface ExcludeFormListProps {\n  name: string;\n}\n\nexport const ExcludeAurorianFormList: React.FC<ExcludeFormListProps> = ({\n  name,\n  ...props\n}) => {\n  const [{ auroriansOptions, auroriansMap }] = useModel(AuroriansModel);\n\n  return (\n    <ProFormList\n      {...props}\n      creatorButtonProps={{\n        creatorButtonText: '添加排除的光灵',\n      }}\n      name={name}\n      alwaysShowItemLabel\n      actionRender={(field, action) => [\n        <Tooltip key=\"delete\" title=\"删除此光灵\">\n          <Button\n            style={{ marginLeft: '.5rem' }}\n            icon={<Delete />}\n            onClick={e => {\n              e.stopPropagation();\n              action.remove(field.name);\n            }}\n          />\n        </Tooltip>,\n      ]}\n    >\n      {() => {\n        return (\n          <ProForm.Group>\n            <ProForm.Item\n              label=\"排除的光灵\"\n              name={'aurorianName'}\n              rules={[{ required: true }]}\n            >\n              <Select\n                options={auroriansOptions}\n                showSearch\n                allowClear={false}\n                placeholder={'支持按拼音搜索光灵, 比如 ad 可以搜到 安顿'}\n                filterOption={filterAuroriansOption}\n              />\n            </ProForm.Item>\n            <ProFormDependency\n              key=\"excludeBreakthroughOnly\"\n              name={['aurorianName']}\n            >\n              {({ aurorianName }) => {\n                if (aurorianName) {\n                  return <AurorianCard sameSize name={aurorianName} />;\n                }\n                return null;\n              }}\n            </ProFormDependency>\n            <ProFormDependency\n              key=\"excludeBreakthroughOnly\"\n              name={['aurorianName']}\n            >\n              {({ aurorianName }) => {\n                if (aurorianName) {\n                  return (\n                    <ProFormSwitch\n                      label=\"仅排除突破\"\n                      name=\"excludeBreakthroughOnly\"\n                    />\n                  );\n                }\n                return null;\n              }}\n            </ProFormDependency>\n\n            <ProFormDependency\n              key=\"excludeBreakthrough\"\n              name={['aurorianName', 'excludeBreakthroughOnly']}\n            >\n              {({ aurorianName, excludeBreakthroughOnly }) => {\n                const targetAurorian = auroriansMap[aurorianName];\n                if (excludeBreakthroughOnly && targetAurorian) {\n                  return (\n                    <ProFormRate\n                      name=\"excludeBreakthrough\"\n                      label=\"排除突破数\"\n                      fieldProps={{\n                        count: RarityMapper[targetAurorian.rarity],\n                        allowHalf: false,\n                      }}\n                      tooltip=\"大于等于此突破数的光灵会被排除，但不会排除零破的此光灵\"\n                      rules={[{ required: true }]}\n                    />\n                  );\n                }\n                return null;\n              }}\n            </ProFormDependency>\n          </ProForm.Group>\n        );\n      }}\n    </ProFormList>\n  );\n};\n","import type { CopilotType, TermType } from '@sinsa/schema';\nimport type { Solution } from '@sinsa/solution-calculator/dist/types/types';\nimport { Card, Typography } from 'antd';\nimport React, { useMemo } from 'react';\nimport { isEqual } from 'lodash-es';\nimport numeral from 'numeral';\nimport type { IgnoreMessage } from '../types';\nimport { CopilotBlock } from './CopilotBlock';\nimport styles from './styles.module.less';\n\nconst copilotRowKey = (c: CopilotType) => c.bv;\n\nexport interface SolutionCardProps {\n  solution: Solution;\n  currentTerm: TermType;\n  index: number;\n  onIgnore?: (msg: IgnoreMessage) => void;\n}\n\nexport const SolutionCard = React.memo<SolutionCardProps>(\n  ({ solution, currentTerm, index, onIgnore }) => {\n    const sorted = useMemo(() => {\n      return [...solution.copilots].sort((a, b) => b.score - a.score);\n    }, [solution]);\n    return (\n      <Card className={styles.SolutionCard} bodyStyle={{ paddingBottom: 16 }}>\n        <div className={styles.TotalScore}>\n          <Typography.Text strong>{`#${index + 1} 匹配方案 ${numeral(\n            solution.totalScore,\n          ).format('0,0')}`}</Typography.Text>\n        </div>\n\n        {sorted.map(copilot => {\n          return (\n            <CopilotBlock\n              className={styles.ControlledCopilotBlock}\n              key={copilotRowKey(copilot)}\n              copilot={copilot}\n              currentTerm={currentTerm}\n              onIgnore={onIgnore}\n            />\n          );\n        })}\n      </Card>\n    );\n  },\n  (prev, next) =>\n    isEqual(\n      prev.solution.copilots.map(c => c.bv),\n      next.solution.copilots.map(c => c.bv),\n    ) &&\n    prev.currentTerm.term === next.currentTerm.term &&\n    prev.index === next.index,\n);\n","/* eslint-disable no-nested-ternary */\nimport { PageContainer } from '@ant-design/pro-components';\nimport { useMemo } from 'react';\nimport { useRequest } from 'ahooks';\nimport { Space, Typography } from 'antd';\nimport { TermNotFound } from '@/components/TermNotFound';\nimport { TermChanger, useTargetTermFromParams } from '@/components/TermChanger';\nimport { getCopilots } from '@/services/http';\nimport { RoutePath } from '@/views/GlobalLayout/constants';\nimport { RelativeTimeText } from '@/components/RelativeTimeText';\nimport { SolutionView } from '@/views/SolutionView';\n\nconst SolutionsPage: React.FC = () => {\n  const { targetTerm: currentTerm } = useTargetTermFromParams();\n  const { data, error, loading } = useRequest(\n    () =>\n      currentTerm?.term\n        ? getCopilots(currentTerm.term)\n        : (Promise.resolve({}) as ReturnType<typeof getCopilots>),\n    { ready: Boolean(currentTerm?.term), refreshDeps: [currentTerm?.term] },\n  );\n\n  const copilots = useMemo(() => Object.values(data ?? []), [data]);\n\n  return (\n    <PageContainer\n      content={\n        <Space wrap>\n          <TermChanger pathFn={RoutePath.Solutions} />\n          {copilots[0] ? (\n            <Typography.Text>\n              上次作业更新 <RelativeTimeText time={copilots[0].upload_time} />\n            </Typography.Text>\n          ) : null}\n          <Typography.Text type=\"secondary\">\n            Tips: 点击匹配作业中光灵头像可唤出菜单一键排除光灵或仅排除突破 ❤\n          </Typography.Text>\n        </Space>\n      }\n      title=\"作业匹配\"\n      loading={loading}\n    >\n      {error ? (\n        <TermNotFound />\n      ) : currentTerm ? (\n        <SolutionView copilots={copilots} currentTerm={currentTerm} />\n      ) : null}\n    </PageContainer>\n  );\n};\n\nexport default SolutionsPage;\n","import type { SubmitterProps } from '@ant-design/pro-components';\nimport {\n  ProFormSelect,\n  ProFormDependency,\n  ProFormSwitch,\n  ProFormRadio,\n  ProForm,\n} from '@ant-design/pro-components';\nimport { useCallback, useMemo } from 'react';\nimport { Space, Typography } from 'antd';\nimport type { CopilotType } from '@sinsa/schema';\nimport { Search } from '@icon-park/react';\nimport type { QueryParamsType } from '../schemas/query-params';\nimport { useSolutionResultContext } from '../context';\nimport { useInitialValues } from './hooks/use-initial-values';\nimport { EXTENDED_TEAM_COUNT } from './constants';\nimport { ExcludeAurorianFormList } from '@/components/ExcludeAurorianFormList';\n\ninterface QueryFormProps {\n  term: number;\n  copilots: CopilotType[];\n}\n\nexport const QueryForm: React.FC<QueryFormProps> = ({ term, copilots }) => {\n  const { initialValues, setLocalInitialValues } = useInitialValues({ term });\n\n  const { loadingSolutionResult, solutionResult, form, requestSolution } =\n    useSolutionResultContext();\n\n  const submitter = useMemo<SubmitterProps>(() => {\n    return {\n      searchConfig: { submitText: '寻找方案' },\n      submitButtonProps: {\n        icon: <Search theme=\"outline\" />,\n      },\n      render(_, dom) {\n        const display = [...dom];\n        if (typeof solutionResult?.allSolutions.solutions.length === 'number') {\n          display.push(\n            <Typography.Text key=\"count\">\n              已为您找到{' '}\n              <Typography.Text strong>\n                {solutionResult.allSolutions.solutions.length}\n              </Typography.Text>{' '}\n              个作业匹配方案\n            </Typography.Text>,\n          );\n        }\n        return <Space wrap>{display}</Space>;\n      },\n    };\n  }, [solutionResult?.allSolutions.solutions.length]);\n\n  const handleValuesChange = useCallback(\n    (_: unknown, allValues: QueryParamsType) => {\n      if (allValues.enableSaveLocalStorage) {\n        setLocalInitialValues(allValues);\n      } else {\n        setLocalInitialValues(undefined);\n      }\n      setLocalInitialValues(\n        allValues.enableSaveLocalStorage ? allValues : undefined,\n      );\n    },\n    [],\n  );\n\n  const ignoreOptions = useMemo(() => {\n    return copilots.map(c => {\n      return {\n        label: `${c.author} ${Math.floor(c.score / 10000)}W`,\n        value: c.bv,\n      };\n    });\n  }, [copilots]);\n\n  const handleOnFinish = useCallback(\n    async (params: QueryParamsType) => {\n      await requestSolution(copilots, params);\n    },\n    [copilots],\n  );\n\n  return (\n    <ProForm<QueryParamsType>\n      onFinish={handleOnFinish}\n      layout=\"vertical\"\n      initialValues={initialValues}\n      submitter={submitter}\n      loading={loadingSolutionResult}\n      onValuesChange={handleValuesChange}\n      form={form}\n    >\n      <ProForm.Group>\n        <ProFormRadio.Group\n          name={'k'}\n          label=\"队伍数量\"\n          rules={[{ required: true }]}\n          options={EXTENDED_TEAM_COUNT}\n          allowClear={false}\n          radioType=\"button\"\n        />\n        <ProFormSwitch\n          name={'disableAlternative'}\n          label=\"不考虑可替自由位\"\n          tooltip=\"开启后，计算的队伍方案中绝对不会出现重复光灵，满足图鉴大佬的强迫症\"\n        />\n        <ProForm.Group>\n          <ProFormSwitch\n            name=\"enableExclude\"\n            label=\"额外排除光灵\"\n            tooltip=\"排除光灵会忽略可替自由位\"\n          />\n          <ProFormDependency name={['enableExclude']}>\n            {({ enableExclude }: Pick<QueryParamsType, 'enableExclude'>) => {\n              return enableExclude ? (\n                <ExcludeAurorianFormList name={'exclude'} />\n              ) : null;\n            }}\n          </ProFormDependency>\n        </ProForm.Group>\n        <ProFormSwitch\n          name={'enableSaveLocalStorage'}\n          label=\"记住我的设置\"\n          tooltip=\"开启后，这一期荒典筛选的设置将会储存在您的浏览器本地，避免繁琐重复筛选\"\n        />\n      </ProForm.Group>\n      <ProFormDependency name={['copilotsIgnore']}>\n        {({ copilotsIgnore }: Pick<QueryParamsType, 'copilotsIgnore'>) => {\n          return copilotsIgnore?.length ? (\n            <ProFormSelect\n              mode=\"multiple\"\n              name={'copilotsIgnore'}\n              label=\"已额外排除的作业\"\n              options={ignoreOptions}\n            />\n          ) : null;\n        }}\n      </ProFormDependency>\n    </ProForm>\n  );\n};\n","import { ConfigProvider, Empty, List, Result, notification } from 'antd';\nimport { useEffect, useMemo, useRef, useState } from 'react';\nimport type { Solution } from '@sinsa/solution-calculator/dist/types/types';\nimport type { TermType } from '@sinsa/schema';\nimport { useMemoizedFn } from 'ahooks';\nimport { isEmpty } from 'lodash-es';\nimport { useSolutionResultContext } from '../context';\nimport type { QueryParamsType } from '../schemas/query-params';\nimport SINSA_SORRY_URL from './assets/sorry.png';\nimport styles from './styles.module.less';\nimport { SolutionCard } from '@/components/SolutionCard';\nimport type { IgnoreMessage } from '@/components/types';\n\nconst getRowKey = (sc: Solution) => sc.copilots.map(c => c.bv).join('');\n\nexport interface SolutionListViewProps {\n  currentTerm: TermType;\n}\n\nexport const SolutionListView: React.FC<SolutionListViewProps> = ({\n  currentTerm,\n}) => {\n  const inViewRef = useRef<HTMLDivElement>(null);\n\n  const { loadingSolutionResult, solutionResult, form } =\n    useSolutionResultContext();\n\n  const [current, setCurrent] = useState(1);\n\n  useEffect(() => {\n    if (solutionResult && current !== 1) {\n      setCurrent(1);\n    }\n  }, [solutionResult]);\n\n  const pagination = useMemo(() => {\n    return {\n      align: 'center' as const,\n      defaultPageSize: 5,\n      current,\n      onChange(page: number) {\n        setCurrent(page);\n        window.scrollTo({\n          top: inViewRef.current!.offsetTop,\n          behavior: 'smooth',\n        });\n      },\n      showSizeChanger: false,\n    };\n  }, [current]);\n\n  const handleIgnore = useMemoizedFn((msg: IgnoreMessage) => {\n    if (msg.type === 'aurorian' && msg.aurorianName) {\n      form.setFieldValue('enableExclude', true);\n      const prevExcludeArray = form.getFieldValue(\n        'exclude',\n      ) as QueryParamsType['exclude'];\n      if (Array.isArray(prevExcludeArray)) {\n        const target = prevExcludeArray.find(\n          t => t.aurorianName === msg.aurorianName,\n        );\n        if (!target) {\n          if (prevExcludeArray.length === 1 && isEmpty(prevExcludeArray[0])) {\n            prevExcludeArray.pop();\n          }\n          if (msg.breakthrough) {\n            form.setFieldValue('exclude', [\n              ...prevExcludeArray,\n              {\n                aurorianName: msg.aurorianName,\n                excludeBreakthroughOnly: true,\n                excludeBreakthrough: msg.breakthrough,\n              },\n            ]);\n          } else {\n            form.setFieldValue('exclude', [\n              ...prevExcludeArray,\n              { aurorianName: msg.aurorianName },\n            ]);\n          }\n          form.submit();\n        } else {\n          notification.error({\n            message: `这个光灵已经在排除列表中了 ❤`,\n          });\n        }\n      }\n    } else if (msg.type === 'copilot') {\n      const copilotsIgnoreArray = form.getFieldValue('copilotsIgnore');\n      if (Array.isArray(copilotsIgnoreArray)) {\n        form.setFieldValue('copilotsIgnore', [...copilotsIgnoreArray, msg.bv]);\n      } else {\n        form.setFieldValue('copilotsIgnore', [msg.bv]);\n      }\n      form.submit();\n    }\n  });\n\n  return (\n    <>\n      <div className={styles.Mount} ref={inViewRef} />\n      <ConfigProvider\n        renderEmpty={name => {\n          if (name === 'List') {\n            return solutionResult?.allSolutions.solutions.length === 0 ? (\n              <Result\n                icon={\n                  <img\n                    width={100}\n                    src={SINSA_SORRY_URL}\n                    alt=\"醒山daddy: 很抱歉\"\n                  />\n                }\n                title=\"没能找到匹配的作业\"\n                subTitle={\n                  <div>\n                    1. 可以适当降低搜索的队伍数量。例如搜索两队 + 自己自动一队\n                    <br />\n                    2. 当前作业数量较少。可等待作业站更新后再次搜索\n                  </div>\n                }\n              />\n            ) : (\n              <Empty\n                image={Empty.PRESENTED_IMAGE_SIMPLE}\n                description=\"准备好寻找作业了！\"\n              />\n            );\n          }\n          return <Empty image={Empty.PRESENTED_IMAGE_SIMPLE} />;\n        }}\n      >\n        <List<Solution>\n          loading={loadingSolutionResult}\n          dataSource={solutionResult?.allSolutions.solutions}\n          pagination={pagination}\n          rowKey={getRowKey}\n          renderItem={item => (\n            <SolutionCard\n              index={solutionResult?.rankSet.get(item) ?? 0}\n              solution={item}\n              currentTerm={currentTerm}\n              onIgnore={handleIgnore}\n            />\n          )}\n        />\n      </ConfigProvider>\n    </>\n  );\n};\n","import type { CopilotType, TermType } from '@sinsa/schema';\nimport { Alert, Card, Flex, Typography } from 'antd';\nimport { SolutionResultProvider } from './context';\nimport { QueryForm } from './QueryForm';\nimport { SolutionListView } from './SolutionListView';\n\ninterface SolutionViewProps {\n  copilots: CopilotType[];\n  currentTerm: TermType;\n}\n\nexport const SolutionView: React.FC<SolutionViewProps> = ({\n  copilots,\n  currentTerm,\n}) => {\n  return (\n    <SolutionResultProvider>\n      <Flex vertical gap=\"middle\">\n        {currentTerm.term === 26 ? (\n          <Alert\n            type=\"error\"\n            showIcon={false}\n            banner\n            message=\"光灵黑潮目前装备技能存在 Bug 使得荒典分数可能存在虚高问题。官方将于 1 月 10 日更新后修复。本期黑潮队伍分数仅供参考。\"\n            action={\n              <Typography.Link\n                href={`https://www.bilibili.com/read/cv29262782/`}\n                target=\"_blank\"\n              >\n                查看官方公告\n              </Typography.Link>\n            }\n          />\n        ) : null}\n        <Card>\n          <QueryForm copilots={copilots} term={currentTerm.term} />\n        </Card>\n        <SolutionListView currentTerm={currentTerm} />\n      </Flex>\n    </SolutionResultProvider>\n  );\n};\n","import type {\n  CalcOptions,\n  SolutionContext,\n  AllSolutions,\n} from '@sinsa/solution-calculator/dist/types/types';\n\nexport class SolutionAlgorithmService {\n  private static instance: SolutionAlgorithmService | null = null;\n\n  public static getInstance(): SolutionAlgorithmService {\n    if (SolutionAlgorithmService.instance === null) {\n      SolutionAlgorithmService.instance = new SolutionAlgorithmService();\n    }\n    return SolutionAlgorithmService.instance;\n  }\n\n  protected constructor() {\n    // noop\n  }\n\n  calculateAllSolutions(\n    context: SolutionContext,\n    k: number,\n    options: CalcOptions,\n  ): Promise<AllSolutions> {\n    return new Promise((resolve, reject) => {\n      const worker = new Worker(\n        new URL('@sinsa/solution-calculator', import.meta.url),\n      );\n\n      worker.addEventListener('message', event => {\n        const result = event.data;\n        resolve(result);\n        worker.terminate();\n      });\n\n      worker.addEventListener('error', error => {\n        reject(error);\n        worker.terminate();\n      });\n\n      worker.postMessage({ context, k, options });\n    });\n  }\n}\n\nexport const solutionAlgorithm = SolutionAlgorithmService.getInstance();\n","export const LOCAL_STORAGE_SETTING_KEY_PREFIX =\n  'SINSA_DADDY_SOLUTIONS_FILTER_KEY_V1';\n\nexport const EXTENDED_TEAM_COUNT = [\n  { label: '一队', value: 1 },\n  { label: '两队', value: 2 },\n  { label: '三队', value: 3 },\n  { label: '四队', value: 4 },\n];\n","import { useLocalStorageState } from 'ahooks';\nimport { useMemo } from 'react';\nimport type { QueryParamsType } from '../../schemas/query-params';\n\ninterface UseInitialValuesArgs {\n  term: number;\n}\n\nconst LOCAL_STORAGE_SETTING_KEY_PREFIX = 'SINSA_DADDY_SOLUTIONS_FILTER_KEY_V1';\n\nconst DEFAULT_INITIAL_VALUES: QueryParamsType = {\n  k: 3,\n  exclude: [{}] as any[],\n};\n\nexport function useInitialValues({ term }: UseInitialValuesArgs) {\n  const LOCAL_STORAGE_SETTING_KEY = useMemo(\n    () => `${LOCAL_STORAGE_SETTING_KEY_PREFIX}_${term}` as const,\n    [term],\n  );\n\n  const [loaclInitialValues, setLocalInitialValues] =\n    useLocalStorageState<QueryParamsType>(LOCAL_STORAGE_SETTING_KEY, {\n      defaultValue: undefined,\n    });\n\n  return {\n    initialValues: loaclInitialValues ?? DEFAULT_INITIAL_VALUES,\n    setLocalInitialValues,\n  };\n}\n","import constate from 'constate';\nimport { ProForm } from '@ant-design/pro-components';\nimport { useRequestSolution } from './hooks/use-request-solution';\nimport type { QueryParamsType } from './schemas/query-params';\n\nexport const [SolutionResultProvider, useSolutionResultContext] = constate(\n  () => {\n    const { solutionResult, loadingSolutionResult, requestSolution } =\n      useRequestSolution();\n\n    const [form] = ProForm.useForm<QueryParamsType>();\n\n    return {\n      solutionResult,\n      loadingSolutionResult,\n      requestSolution,\n      form,\n    };\n  },\n);\n","import { useRequest } from 'ahooks';\nimport { useModel } from '@modern-js/runtime/model';\nimport type { CopilotType } from '@sinsa/schema';\nimport type { Solution } from '@sinsa/solution-calculator/dist/types/types';\nimport type { QueryParamsType } from '../schemas/query-params';\nimport { withoutExclude } from '../utils/without-exclude';\nimport { AuroriansModel } from '@/models/aurorians';\nimport { solutionAlgorithm } from '@/services/solution-algorithm';\n\nexport function useRequestSolution() {\n  const [{ WHOLE_BOX, auroriansMap }] = useModel(AuroriansModel);\n  const {\n    data: solutionResult,\n    loading: loadingSolutionResult,\n    runAsync: requestSolution,\n  } = useRequest(\n    async (\n      copilots: CopilotType[],\n      {\n        exclude,\n        k,\n        disableAlternative,\n        copilotsIgnore,\n        enableExclude,\n      }: QueryParamsType,\n    ) => {\n      const availableBox =\n        enableExclude && Array.isArray(exclude)\n          ? withoutExclude(WHOLE_BOX.aurorian_summaries, exclude, auroriansMap)\n          : WHOLE_BOX.aurorian_summaries;\n\n      const allSolutions = await solutionAlgorithm.calculateAllSolutions(\n        {\n          copilots,\n          availableBox,\n        },\n        k,\n        { disableAlternative, copilotsIgnore },\n      );\n\n      const rankSet = new WeakMap<Solution, number>();\n      for (let i = 0; i < allSolutions.solutions.length; i++) {\n        const target = allSolutions.solutions[i];\n        rankSet.set(target, i);\n      }\n\n      // gtag('event', 'get_solution_result', {\n      //   k,\n      //   disableAlternative,\n      //   enableExclude,\n      //   solutions_length: allSolutions.solutions.length,\n      //   exclude: exclude\n      //     ?.map(\n      //       xclude =>\n      //         `${xclude.aurorianName}_${\n      //           (xclude.excludeBreakthroughOnly &&\n      //             xclude.excludeBreakthrough) ||\n      //           ''\n      //         }`,\n      //     )\n      //     .join(','),\n      // });\n\n      return {\n        allSolutions,\n        rankSet,\n      };\n    },\n    {\n      manual: true,\n    },\n  );\n\n  return {\n    solutionResult,\n    loadingSolutionResult,\n    requestSolution,\n  };\n}\n"],"names":["NO_PROVIDER","useValue","_len","arguments","length","selectors","Array","_key","contexts","hooks","createContext$1","displayName","context","createContext","push","value","useContext","forEach","selector","name","Provider","_ref","children","_objectWithoutPropertiesLoose","source","excluded","key","i","target","sourceKeys","Object","keys","indexOf","element","v","createElement","concat","AurorianCard","breakthrough","isReplaceable","sameSize","auroriansMap","useModel","AuroriansModel","aurorian","useMemo","cardRef","useRef","useEffect","aurorian_name","then","esm","default","current","style","backgroundImage","catch","Badge","fontSize","display","zIndex","text","undefined","className","clsx","ref","class","attribute","alt","src","ClassURLMapper","ElementURLMapper","secondary_attribute","title","aurorian_cn_name","rarity","ConfigProvider","theme","components","Rate","starBg","starSize","disabled","count","RarityMapper","ExcludeAurorianFormList","props","auroriansOptions","ProFormList","creatorButtonProps","creatorButtonText","alwaysShowItemLabel","actionRender","field","action","Tooltip","Button","marginLeft","icon","Delete","onClick","e","stopPropagation","remove","ProForm","label","rules","required","Select","options","showSearch","allowClear","placeholder","filterOption","filterAuroriansOption","ProFormDependency","aurorianName","ProFormSwitch","excludeBreakthroughOnly","targetAurorian","ProFormRate","fieldProps","allowHalf","tooltip","copilotRowKey","c","bv","SolutionCard","solution","currentTerm","index","onIgnore","sorted","copilots","sort","a","b","score","Card","bodyStyle","paddingBottom","Typography","strong","totalScore","format","map","copilot","CopilotBlock","prev","next","isEqual","term","targetTerm","useTargetTermFromParams","data","error","loading","useRequest","getCopilots","Promise","resolve","ready","Boolean","refreshDeps","values","PageContainer","content","Space","wrap","TermChanger","pathFn","RoutePath","RelativeTimeText","time","upload_time","type","TermNotFound","SolutionView","QueryForm","initialValues","setLocalInitialValues","useInitialValues","loadingSolutionResult","solutionResult","form","requestSolution","useSolutionResultContext","submitter","searchConfig","submitText","submitButtonProps","Search","render","_","dom","allSolutions","solutions","handleValuesChange","useCallback","allValues","enableSaveLocalStorage","ignoreOptions","author","Math","floor","handleOnFinish","params","onFinish","layout","onValuesChange","ProFormRadio","EXTENDED_TEAM_COUNT","radioType","enableExclude","copilotsIgnore","ProFormSelect","mode","getRowKey","sc","join","SolutionListView","inViewRef","setCurrent","useState","pagination","align","defaultPageSize","onChange","page","window","scrollTo","top","offsetTop","behavior","showSizeChanger","handleIgnore","useMemoizedFn","msg","setFieldValue","prevExcludeArray","getFieldValue","isArray","find","t","notification","message","isEmpty","pop","excludeBreakthrough","submit","copilotsIgnoreArray","renderEmpty","Result","width","subTitle","Empty","image","description","List","dataSource","rowKey","renderItem","item","rankSet","get","SolutionResultProvider","Flex","vertical","gap","Alert","showIcon","banner","href","SolutionAlgorithmService","getInstance","instance","calculateAllSolutions","k","reject","worker","Worker","URL","addEventListener","event","terminate","postMessage","solutionAlgorithm","DEFAULT_INITIAL_VALUES","exclude","LOCAL_STORAGE_SETTING_KEY","loaclInitialValues","useLocalStorageState","defaultValue","useRequestSolution","WHOLE_BOX","runAsync","disableAlternative","availableBox","withoutExclude","aurorian_summaries","WeakMap","set","manual"],"mappings":"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"}
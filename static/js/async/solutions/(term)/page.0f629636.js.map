{"version":3,"file":"static/js/async/solutions/(term)/page.0f629636.js","sources":["./src/components/AurorianCard/index.tsx","./src/components/AuroriansTeam/index.tsx","./src/components/CopilotsTable/columns.tsx","./src/components/CopilotsTable/index.tsx","./src/components/ExcludeAurorianFormList/index.tsx","./src/components/SolutionScenarioCard/index.tsx","./src/containers/CopilotSolution.tsx","./src/containers/TermChanger.tsx","./src/containers/TermNotFound.tsx","./src/routes/solutions/[term]/page.tsx","./src/features/backtrack/calculate-all-scenarios-and-scores.ts","./src/features/backtrack/helpers/box-without-aurorians-in-copilot.ts","./src/features/backtrack/helpers/can-use-copilot.ts"],"sourcesContent":["import React, { useEffect, useMemo, useRef } from 'react';\nimport { useModel } from '@modern-js/runtime/model';\nimport { type AurorianType } from '@sinsa/schema';\nimport { Badge, ConfigProvider, Rate } from 'antd';\nimport { clsx } from 'clsx';\nimport styles from './styles.module.less';\nimport { ClassURLMapper, ElementURLMapper, RarityMapper } from './constants';\nimport { AuroriansModel } from '@/models/aurorians';\n\ninterface AurorianCardProps {\n  name: string;\n  breakthrough?: number;\n  isReplaceable?: boolean;\n  sameSize?: boolean;\n}\n\nexport const AurorianCard = React.memo<AurorianCardProps>(\n  ({ name, breakthrough, isReplaceable, sameSize }) => {\n    const [{ auroriansMap }] = useModel(AuroriansModel);\n    const aurorian = useMemo(\n      () => auroriansMap[name] as AurorianType | undefined,\n      [auroriansMap, name],\n    );\n\n    const cardRef = useRef<HTMLDivElement>(null);\n\n    useEffect(() => {\n      if (aurorian?.aurorian_name) {\n        import(`@/assets/skins/${aurorian.aurorian_name}.webp`)\n          .then(esm => {\n            if (typeof esm?.default === 'string') {\n              if (cardRef.current) {\n                cardRef.current.style.backgroundImage = `url(${esm.default})`;\n              }\n            }\n          })\n          .catch(() => {\n            // ignore\n          });\n      }\n    }, [aurorian?.aurorian_name]);\n\n    return (\n      <Badge.Ribbon\n        style={{\n          fontSize: '12px',\n          display: isReplaceable ? 'block' : 'none',\n          zIndex: 10000,\n        }}\n        text={isReplaceable ? 'å¯æ›¿' : undefined}\n      >\n        <div\n          className={clsx(styles.AurorianCard, sameSize && styles.SameSize)}\n          ref={cardRef}\n        >\n          {aurorian?.class && aurorian?.attribute ? (\n            <div\n              className={clsx(\n                styles.MetaContainer,\n                sameSize && styles.SameSizeMeta,\n              )}\n            >\n              <img\n                className={styles.MetaClass}\n                alt={aurorian.class}\n                src={ClassURLMapper[aurorian.class]}\n              />\n              <div className={styles.MetaAttributeContainer}>\n                <img\n                  className={styles.MetaFirstAttribute}\n                  alt={aurorian.attribute}\n                  src={ElementURLMapper[aurorian.attribute]}\n                />\n                {aurorian.secondary_attribute ? (\n                  <img\n                    className={styles.MetaSecondAttribute}\n                    alt={aurorian.secondary_attribute}\n                    src={ElementURLMapper[aurorian.secondary_attribute]}\n                  />\n                ) : null}\n              </div>\n            </div>\n          ) : null}\n          <div className={styles.NameContainer}>\n            <div title={aurorian?.aurorian_name}>\n              {aurorian?.aurorian_cn_name}\n            </div>\n\n            {typeof breakthrough === 'number' && aurorian?.rarity ? (\n              <ConfigProvider\n                theme={{\n                  components: {\n                    Rate: {\n                      starBg: 'white',\n                      starSize: 8,\n                    },\n                  },\n                }}\n              >\n                <Rate\n                  className={styles.BreakThrough}\n                  disabled\n                  value={breakthrough}\n                  count={RarityMapper[aurorian.rarity]}\n                />\n              </ConfigProvider>\n            ) : null}\n          </div>\n        </div>\n      </Badge.Ribbon>\n    );\n  },\n);\n","import type { CopilotType } from '@sinsa/schema';\nimport React from 'react';\nimport { AurorianCard } from '../AurorianCard';\nimport styles from './styles.module.less';\n\ninterface AuroriansTeamProps {\n  aurorianSummaries: CopilotType['aurorian_summaries'];\n}\n\nexport const AuroriansTeam: React.FC<AuroriansTeamProps> = ({\n  aurorianSummaries,\n}) => {\n  return (\n    <div className={styles.AuroriansTeam}>\n      {aurorianSummaries.map(\n        ({ aurorian_name, breakthrough, is_replaceable }) => {\n          return (\n            <AurorianCard\n              key={aurorian_name}\n              name={aurorian_name}\n              breakthrough={breakthrough}\n              isReplaceable={is_replaceable}\n            />\n          );\n        },\n      )}\n    </div>\n  );\n};\n","import type { ProColumns } from '@ant-design/pro-components';\nimport type { CopilotType } from '@sinsa/schema';\nimport { Tooltip, Typography } from 'antd';\nimport { AuroriansTeam } from '../AuroriansTeam';\n\nexport interface TableParams {\n  title?: CopilotType['title'];\n  author?: CopilotType['author'];\n  term?: `${number}`;\n  dataSource?: CopilotType[];\n  score?: [number, undefined] | [number, number] | [undefined, number];\n}\n\nexport const copilotsColumns: ProColumns<CopilotType>[] = [\n  {\n    title: 'å…‰çµé…ç½®',\n    dataIndex: 'aurorian_summaries',\n    hideInSearch: true,\n    render(_, entity) {\n      return <AuroriansTeam aurorianSummaries={entity.aurorian_summaries} />;\n    },\n    width: 80 * 5 + 24,\n  },\n  {\n    title: 'ç»“ç®—åˆ†æ•°',\n    dataIndex: 'score',\n    valueType: 'digit',\n    hideInSearch: true,\n    width: 130,\n    sorter: true,\n  },\n  {\n    title: 'ä½œè€…',\n    dataIndex: 'author',\n    valueType: 'select',\n    hideInSearch: true,\n    ellipsis: true,\n    width: 160,\n    renderText(dom, entity) {\n      return (\n        <>\n          {dom}\n          <Tooltip title={entity.description}>\n            {entity.description ? 'ğŸ—’' : null}\n          </Tooltip>\n        </>\n      );\n    },\n  },\n  {\n    title: 'æ ‡é¢˜',\n    dataIndex: 'title',\n    ellipsis: true,\n    render(dom, entity) {\n      return (\n        <Typography.Link\n          href={`https://www.bilibili.com/video/${entity.bv}`}\n          target=\"_blank\"\n          title={entity.title}\n        >\n          {entity.title}\n        </Typography.Link>\n      );\n    },\n  },\n  {\n    title: 'ä¸Šä¼ æ—¶é—´',\n    dataIndex: 'upload_time',\n    valueType: 'dateTime',\n    width: 160,\n    hideInSearch: true,\n  },\n];\n","import { useCallback, useMemo, useRef } from 'react';\nimport type { ActionType } from '@ant-design/pro-components';\nimport { ProTable } from '@ant-design/pro-components';\nimport type { CopilotType } from '@sinsa/schema';\nimport { SortOrder } from 'antd/es/table/interface';\nimport { type TableParams, copilotsColumns } from './columns';\n\ninterface CopilotsTableProps {\n  dataSource: CopilotType[];\n  term?: `${number}`;\n}\n\nexport function copilotRowKey(c: CopilotType) {\n  return c.bv;\n}\n\nconst TABLE_CONST_PROPS = {\n  pagination: {\n    pageSize: 5,\n    size: 'default',\n    position: ['bottomCenter'] as any,\n  },\n  scroll: { x: 'max-content', scrollToFirstRowOnChange: true },\n} as const;\n\nexport const CopilotsTable: React.FC<CopilotsTableProps> = ({\n  dataSource,\n  term,\n}) => {\n  const actionRef = useRef<ActionType>();\n\n  const deps = useMemo(\n    (): TableParams => ({ term, dataSource }),\n    [term, dataSource],\n  );\n\n  const request = useCallback(\n    async (params: TableParams, sort: Record<string, SortOrder>) => {\n      const base =\n        params.dataSource?.filter(item => {\n          let ok = true;\n          if (params.title) {\n            ok = item.title.includes(params.title);\n          }\n          // min\n          if (typeof params.score?.[0] === 'number') {\n            ok = params.score[0] <= item.score;\n          }\n\n          // max\n          if (typeof params.score?.[1] === 'number') {\n            ok = item.score <= params.score[1];\n          }\n          return ok;\n        }) ?? [];\n      return {\n        data: sort.score\n          ? base.sort((a, b) =>\n              sort.score === 'ascend' ? a.score - b.score : b.score - a.score,\n            )\n          : base,\n        success: true,\n      };\n    },\n    [],\n  );\n\n  return (\n    <ProTable<CopilotType, TableParams>\n      rowKey={copilotRowKey}\n      actionRef={actionRef}\n      columns={copilotsColumns}\n      params={deps}\n      request={request}\n      {...TABLE_CONST_PROPS}\n    />\n  );\n};\n","import {\n  ProForm,\n  ProFormDependency,\n  ProFormList,\n  ProFormRate,\n  ProFormSwitch,\n} from '@ant-design/pro-components';\nimport { useModel } from '@modern-js/runtime/model';\nimport { Select } from 'antd';\nimport { RarityMapper } from '../AurorianCard/constants';\nimport { AurorianCard } from '../AurorianCard';\nimport { AuroriansModel, filterAuroriansOption } from '@/models/aurorians';\n\ninterface ExcludeFormListProps {\n  name: string;\n}\n\nexport const ExcludeAurorianFormList: React.FC<ExcludeFormListProps> = ({\n  name,\n  ...props\n}) => {\n  const [{ auroriansOptions, auroriansMap }] = useModel(AuroriansModel);\n  console.log('auroriansOptions', auroriansOptions);\n  return (\n    <ProFormList\n      {...props}\n      creatorButtonProps={{\n        creatorButtonText: 'æ·»åŠ æ’é™¤çš„å…‰çµ',\n      }}\n      name={name}\n      alwaysShowItemLabel\n      min={1}\n    >\n      {() => {\n        return (\n          <ProForm.Group>\n            <ProForm.Item\n              label=\"æ’é™¤çš„å…‰çµ\"\n              name={'aurorianName'}\n              rules={[{ required: true }]}\n            >\n              <Select\n                options={auroriansOptions}\n                showSearch\n                allowClear={false}\n                placeholder={'æ”¯æŒæŒ‰æ‹¼éŸ³æœç´¢å…‰çµ, æ¯”å¦‚ ad å¯ä»¥æœåˆ° å®‰é¡¿'}\n                filterOption={filterAuroriansOption}\n              />\n            </ProForm.Item>\n            <ProFormDependency\n              key=\"excludeBreakthroughOnly\"\n              name={['aurorianName']}\n            >\n              {({ aurorianName }) => {\n                if (aurorianName) {\n                  return <AurorianCard sameSize name={aurorianName} />;\n                }\n                return null;\n              }}\n            </ProFormDependency>\n            <ProFormDependency\n              key=\"excludeBreakthroughOnly\"\n              name={['aurorianName']}\n            >\n              {({ aurorianName }) => {\n                if (aurorianName) {\n                  return (\n                    <ProFormSwitch\n                      label=\"ä»…æ’é™¤çªç ´\"\n                      name=\"excludeBreakthroughOnly\"\n                    />\n                  );\n                }\n                return null;\n              }}\n            </ProFormDependency>\n\n            <ProFormDependency\n              key=\"excludeBreakthrough\"\n              name={['aurorianName', 'excludeBreakthroughOnly']}\n            >\n              {({ aurorianName, excludeBreakthroughOnly }) => {\n                const targetAurorian = auroriansMap[aurorianName];\n                if (excludeBreakthroughOnly && targetAurorian) {\n                  return (\n                    <ProFormRate\n                      name=\"excludeBreakthrough\"\n                      label=\"æ’é™¤çªç ´æ•°\"\n                      fieldProps={{\n                        count: RarityMapper[targetAurorian.rarity],\n                        allowHalf: false,\n                      }}\n                      tooltip=\"å¤§äºç­‰äºæ­¤çªç ´æ•°çš„å…‰çµä¼šè¢«æ’é™¤ï¼Œä½†ä¸ä¼šæ’é™¤é›¶ç ´çš„æ­¤å…‰çµ\"\n                      rules={[{ required: true }]}\n                    />\n                  );\n                }\n                return null;\n              }}\n            </ProFormDependency>\n          </ProForm.Group>\n        );\n      }}\n    </ProFormList>\n  );\n};\n","import { ProTable } from '@ant-design/pro-components';\nimport { CopilotType } from '@sinsa/schema';\nimport { useCallback, useMemo } from 'react';\nimport { produce } from 'immer';\nimport { copilotRowKey } from '../CopilotsTable';\nimport { copilotsColumns } from '../CopilotsTable/columns';\nimport type { SolutionScenario } from '@/features/backtrack/types';\n\ninterface SolutionScenarioCardProps {\n  solution: SolutionScenario;\n  title?: string;\n}\n\nexport const SolutionScenarioCard: React.FC<SolutionScenarioCardProps> = ({\n  solution,\n  title,\n}) => {\n  const request = useCallback(async () => {\n    return {\n      data: produce(solution.copilots, draft => {\n        draft.sort((a, b) => Number(b.score - a.score));\n      }),\n      success: true,\n    };\n  }, []);\n\n  const toolbar = useMemo(() => ({ title, settings: [] }), [title]);\n\n  const scroll = useMemo(() => ({ x: 'max-content' }), []);\n\n  return (\n    <ProTable<CopilotType>\n      showHeader={true}\n      toolbar={toolbar}\n      rowKey={copilotRowKey}\n      columns={copilotsColumns}\n      request={request}\n      search={false}\n      pagination={false}\n      scroll={scroll}\n      ghost\n    />\n  );\n};\n","import {\n  ProForm,\n  ProFormDependency,\n  ProFormInstance,\n  ProFormRadio,\n  ProFormSwitch,\n} from '@ant-design/pro-components';\nimport { CopilotType } from '@sinsa/schema';\nimport { Card, List, Space, Typography } from 'antd';\nimport { useModel } from '@modern-js/runtime/model';\nimport numeral from 'numeral';\nimport { produce } from 'immer';\nimport { useLocalStorageState, useRequest } from 'ahooks';\nimport { useMemo, useRef, useState } from 'react';\nimport { useLocation } from '@modern-js/runtime/router';\nimport { calculateAllScenariosAndScores } from '@/features/backtrack/calculate-all-scenarios-and-scores';\nimport { AuroriansModel } from '@/models/aurorians';\nimport { SolutionScenarioCard } from '@/components/SolutionScenarioCard';\nimport { ExcludeAurorianFormList } from '@/components/ExcludeAurorianFormList';\nimport type { SolutionScenario } from '@/features/backtrack/types';\n\ninterface CopilotSolutionProps {\n  dataSource: CopilotType[];\n  term: `${number}`;\n}\n\ninterface QueryParams {\n  k: number;\n  box: 'whole' | 'my-box';\n  disalbeAlternative?: boolean;\n  enableExclude?: boolean;\n  exclude?: {\n    aurorianName: string;\n    excludeBreakthrough?: number;\n    excludeBreakthroughOnly?: boolean;\n  }[];\n  enableSaveLocalStorage?: boolean;\n}\n\nconst initialValues = { k: 3, box: 'whole', exclude: [{}] as any[] } as const;\n\nconst BASE_TEAM_COUNT = [\n  { label: 'ä¸¤é˜Ÿ', value: 2 },\n  { label: 'ä¸‰é˜Ÿ', value: 3 },\n  { label: 'å››é˜Ÿ', value: 4 },\n];\n\nconst EXTENDED_TEAM_COUNT = [{ label: 'ä¸€é˜Ÿ', value: 1 }, ...BASE_TEAM_COUNT];\n\nexport const CopilotSolution: React.FC<CopilotSolutionProps> = ({\n  dataSource,\n  term,\n}) => {\n  const [{ WHOLE_BOX }] = useModel(AuroriansModel);\n\n  const formRef = useRef<ProFormInstance>();\n  const [current, setCurrent] = useState(1);\n  const inViewRef = useRef<HTMLDivElement>(null);\n  const LOCAL_STORAGE_SETTING_KEY = useMemo(\n    () => `SINSA_DADDY_SOLUTIONS_FILTER_KEY_V1_${term}` as const,\n    [term],\n  );\n\n  const [localSetting, setLocalSetting] = useLocalStorageState(\n    LOCAL_STORAGE_SETTING_KEY,\n    {\n      defaultValue: undefined,\n    },\n  );\n\n  const { data, loading, runAsync } = useRequest(\n    async (params: QueryParams) => {\n      let filterBox = WHOLE_BOX.aurorian_summaries;\n      if (params.exclude) {\n        filterBox = produce(WHOLE_BOX.aurorian_summaries, draft => {\n          for (const aurorianInExclude of params.exclude!) {\n            if (!aurorianInExclude.excludeBreakthroughOnly) {\n              delete draft[aurorianInExclude.aurorianName];\n            } else if (\n              typeof aurorianInExclude.excludeBreakthrough === 'number' &&\n              aurorianInExclude.excludeBreakthrough >= 1\n            ) {\n              draft[aurorianInExclude.aurorianName].breakthrough =\n                aurorianInExclude.excludeBreakthrough - 1;\n            }\n          }\n        });\n      }\n\n      const [solutionResult] = await Promise.all([\n        Promise.resolve(\n          calculateAllScenariosAndScores(\n            {\n              copilots: dataSource,\n              availableBox: filterBox,\n            },\n            params.k,\n            { disalbeAlternative: params.disalbeAlternative },\n          ),\n        ),\n        new Promise<void>(resolve => window.setTimeout(resolve, 100)),\n      ]);\n\n      const rankSet = new WeakMap<SolutionScenario, number>();\n      for (let i = 0; i < solutionResult.scenarios.length; i++) {\n        const target = solutionResult.scenarios[i];\n        rankSet.set(target, i);\n      }\n\n      gtag('event', 'get_solution_result', {\n        k: params.k,\n        box: params.box,\n        disalbeAlternative: params.disalbeAlternative,\n        enableExclude: params.enableExclude,\n        solutions_length: solutionResult.scenarios.length,\n        exclude: params.exclude\n          ?.map(\n            xclude =>\n              `${xclude.aurorianName}_${\n                (xclude.excludeBreakthroughOnly &&\n                  xclude.excludeBreakthrough) ||\n                ''\n              }`,\n          )\n          .join(','),\n      });\n\n      return {\n        solutionResult,\n        rankSet,\n      };\n    },\n    {\n      manual: true,\n      defaultParams: [initialValues],\n    },\n  );\n\n  const location = useLocation();\n  const COUNT = location.search.includes('k1')\n    ? EXTENDED_TEAM_COUNT\n    : BASE_TEAM_COUNT;\n\n  return (\n    <>\n      <Card style={{ marginBottom: '1rem' }}>\n        <ProForm<QueryParams>\n          formRef={formRef}\n          onFinish={async params => {\n            await runAsync(params);\n            setCurrent(1);\n          }}\n          // sub=\"å¯»æ‰¾é˜Ÿä¼æ–¹æ¡ˆ\"\n          initialValues={localSetting ?? initialValues}\n          layout=\"vertical\"\n          submitter={{\n            // render: (_, dom) => <FooterToolbar>{dom}</FooterToolbar>,\n            searchConfig: { submitText: 'å¯»æ‰¾åŒ¹é…æ–¹æ¡ˆ' },\n            render(_, dom) {\n              return (\n                <Space wrap>\n                  {dom}\n                  {data?.solutionResult ? (\n                    <Typography.Text>\n                      å·²ä¸ºæ‚¨æ‰¾åˆ°{' '}\n                      <Typography.Text strong>\n                        {data?.solutionResult.scenarios.length}\n                      </Typography.Text>{' '}\n                      ä¸ªåŒ¹é…æ–¹æ¡ˆ\n                    </Typography.Text>\n                  ) : null}\n                </Space>\n              );\n            },\n          }}\n          loading={loading}\n          onValuesChange={(_, allValues) => {\n            if (allValues.enableSaveLocalStorage) {\n              const currentFormValues = formRef.current?.getFieldsValue();\n              if (currentFormValues) {\n                setLocalSetting(currentFormValues);\n              }\n            } else {\n              setLocalSetting(undefined);\n            }\n          }}\n        >\n          <ProForm.Group>\n            <ProFormRadio.Group\n              name=\"k\"\n              label=\"é˜Ÿä¼æ•°é‡\"\n              rules={[{ required: true }]}\n              options={COUNT}\n              allowClear={false}\n              radioType=\"button\"\n            />\n\n            <ProFormRadio.Group\n              name=\"box\"\n              label=\"Box åŒ¹é…\"\n              options={[\n                { label: 'å…¨å›¾é‰´æ»¡çªç ´ Box', value: 'whole' },\n                { label: 'è‡ªå®šä¹‰ Box', value: 'my-box', disabled: true },\n              ]}\n              allowClear={false}\n              radioType=\"button\"\n              rules={[{ required: true }]}\n              extra=\"è‡ªå®šä¹‰ Box åŒ¹é…æš‚ä¸æ”¯æŒï¼Œæ— æ³•é€‰ä¸­ï¼Œæ•¬è¯·æœŸå¾…w\"\n            />\n            <ProFormSwitch\n              name={'disalbeAlternative'}\n              label=\"ä¸è€ƒè™‘å¯æ›¿è‡ªç”±ä½\"\n              tooltip=\"å¼€å¯åï¼Œè®¡ç®—çš„é˜Ÿä¼æ–¹æ¡ˆä¸­ç»å¯¹ä¸ä¼šå‡ºç°é‡å¤å…‰çµï¼Œæ»¡è¶³å›¾é‰´å¤§ä½¬çš„å¼ºè¿«ç—‡\"\n            />\n            <ProForm.Group>\n              <ProFormSwitch\n                name=\"enableExclude\"\n                label=\"é¢å¤–æ’é™¤å…‰çµ\"\n                tooltip=\"æ’é™¤å…‰çµä¼šå¿½ç•¥å¯æ›¿è‡ªç”±ä½\"\n              />\n              <ProFormDependency name={['enableExclude']}>\n                {({ enableExclude }) => {\n                  if (enableExclude) {\n                    return <ExcludeAurorianFormList name={'exclude'} />;\n                  }\n                  return null;\n                }}\n              </ProFormDependency>\n            </ProForm.Group>\n            <ProFormSwitch\n              name={'enableSaveLocalStorage'}\n              label=\"è®°ä½æˆ‘çš„è®¾ç½®\"\n              tooltip=\"å¼€å¯åï¼Œå½“å‰ç­›é€‰çš„è®¾ç½®å°†ä¼šå‚¨å­˜åœ¨æ‚¨çš„æµè§ˆå™¨æœ¬åœ°ï¼Œé¿å…ç¹çé‡å¤ç­›é€‰\"\n            />\n          </ProForm.Group>\n        </ProForm>\n      </Card>\n      <div ref={inViewRef} />\n      <List\n        loading={loading}\n        dataSource={data?.solutionResult?.scenarios}\n        pagination={{\n          align: 'center',\n          defaultPageSize: 5,\n          current,\n          onChange(page) {\n            setCurrent(page);\n            window.scrollTo({\n              top: inViewRef.current!.offsetTop,\n              behavior: 'smooth',\n            });\n          },\n          showSizeChanger: false,\n        }}\n        rowKey={sc => sc.copilots.map(c => c.bv).join('')}\n        renderItem={item => {\n          return (\n            <Card\n              title={\n                <>\n                  {data?.rankSet\n                    ? `#${(data.rankSet.get(item) ?? 0) + 1} åŒ¹é…æ–¹æ¡ˆ `\n                    : null}\n                  {numeral(item.totalScore).format('0,0')}\n                </>\n              }\n              key={item.copilots.map(c => c.bv).join('')}\n              style={{ marginBottom: '1rem' }}\n            >\n              <SolutionScenarioCard solution={item} />\n            </Card>\n          );\n        }}\n      />\n    </>\n  );\n};\n","import { useModel } from '@modern-js/runtime/model';\nimport { Select } from 'antd';\nimport { useNavigate, useParams } from '@modern-js/runtime/router';\nimport { TermsModel } from '@/models/terms';\nimport { RoutePath } from '@/components/MyLayout/constants';\n\nexport const TermChanger: React.FC<{\n  pathFn: typeof RoutePath.Copilots | typeof RoutePath.Solutions;\n}> = ({ pathFn }) => {\n  const params = useParams<{ term: `${number}` }>();\n  const [terms] = useModel(TermsModel);\n  const navigate = useNavigate();\n\n  return (\n    <Select\n      value={params.term && Number.parseInt(params.term, 10)}\n      options={terms.termsOptions}\n      placeholder=\"è’å…¸æœŸæ•°\"\n      onChange={(nextTerm: number) => {\n        navigate(pathFn(nextTerm));\n      }}\n    />\n  );\n};\n","import { useModel } from '@modern-js/runtime/model';\nimport { Button, Result } from 'antd';\nimport { Link } from '@modern-js/runtime/router';\nimport { TermsModel } from '@/models/terms';\nimport { RoutePath } from '@/components/MyLayout/constants';\n\nexport const TermNotFound: React.FC = () => {\n  const [{ firstTerm }] = useModel(TermsModel);\n\n  return (\n    <Result\n      status=\"404\"\n      title=\"è’å…¸ä½œä¸šä¸è§äº†\"\n      subTitle=\"æ£€æŸ¥é“¾æ¥æ˜¯å¦æ­£ç¡®æˆ–è¿”å›æœ€è¿‘è’å…¸ä½œä¸š\"\n      extra={\n        firstTerm ? (\n          <Link to={RoutePath.Copilots(firstTerm.term)}>\n            <Button type=\"primary\">è¿”å›æœ€è¿‘ä½œä¸š</Button>\n          </Link>\n        ) : (\n          <Link to={RoutePath.Home}>\n            <Button type=\"primary\">è¿”å›é¦–é¡µ</Button>\n          </Link>\n        )\n      }\n    />\n  );\n};\n","import { useParams } from '@modern-js/runtime/router';\nimport { PageContainer } from '@ant-design/pro-components';\nimport type { CopilotType } from '@sinsa/schema';\nimport { useMemo } from 'react';\nimport { useRequest } from 'ahooks';\nimport { TermNotFound } from '@/containers/TermNotFound';\nimport { TermChanger } from '@/containers/TermChanger';\nimport { CopilotSolution } from '@/containers/CopilotSolution';\nimport { RoutePath } from '@/components/MyLayout/constants';\n\nconst SolutionsPage: React.FC = () => {\n  const params = useParams<{ term: `${number}` }>();\n\n  const { data, error, loading } = useRequest(\n    () =>\n      fetch(`/api/copilots/${params.term}.json`).then(\n        response =>\n          response.json() as Promise<Record<CopilotType['bv'], CopilotType>>,\n      ),\n    { refreshDeps: [params.term] },\n  );\n\n  const copilots = useMemo(() => Object.values(data ?? []), [data]);\n\n  if (error) {\n    return <TermNotFound />;\n  }\n\n  return (\n    <PageContainer\n      content={<TermChanger pathFn={RoutePath.Solutions} />}\n      title=\"ä½œä¸šåŒ¹é…\"\n      loading={loading}\n    >\n      {params.term ? (\n        <CopilotSolution dataSource={copilots} term={params.term} />\n      ) : null}\n    </PageContainer>\n  );\n};\n\nexport default SolutionsPage;\n","import type { CopilotType } from '@sinsa/schema';\nimport { boxWithoutAuroriansInCopilot } from './helpers/box-without-aurorians-in-copilot';\nimport { canUseCopilot } from './helpers/can-use-copilot';\nimport type { CalcOptions, SolutionContext, SolutionResult } from './types';\n\ninterface StackContext {\n  currentCopilotIndex: number;\n  currentScenario: CopilotType[];\n  remainingBox: SolutionContext['availableBox'];\n  count: number;\n}\n\n/**\n * è®¡ç®—æ‰€æœ‰çš„é˜Ÿä¼æ–¹æ¡ˆå’Œå…·ä½“åˆ†æ•°\n * @param context è§£å†³æ–¹æ¡ˆä¸Šä¸‹æ–‡\n * @param k é˜Ÿä¼æ•°é‡\n */\nexport function calculateAllScenariosAndScores(\n  context: SolutionContext,\n  k = 3,\n  { disalbeAlternative }: CalcOptions = {},\n): SolutionResult {\n  const result: SolutionResult = {\n    scenarios: [],\n  };\n\n  const stack: StackContext[] = [\n    {\n      currentCopilotIndex: 0,\n      currentScenario: [],\n      remainingBox: context.availableBox,\n      count: k,\n    },\n  ];\n\n  while (stack.length > 0) {\n    const { currentCopilotIndex, currentScenario, remainingBox, count } =\n      stack.pop()!;\n\n    if (count === 0 || currentCopilotIndex === context.copilots.length) {\n      if (currentScenario.length >= k) {\n        result.scenarios.push({\n          copilots: [...currentScenario],\n          totalScore: currentScenario.reduce(\n            (score, next) => score + BigInt(next.score),\n            BigInt(0),\n          ),\n        });\n      }\n    } else {\n      const currentCopilot = context.copilots[currentCopilotIndex];\n      if (canUseCopilot(remainingBox, currentCopilot, { disalbeAlternative })) {\n        const newRemainingBox = boxWithoutAuroriansInCopilot(\n          remainingBox,\n          currentCopilot,\n          { disalbeAlternative },\n        );\n        stack.push({\n          currentCopilotIndex: currentCopilotIndex + 1,\n          currentScenario: [...currentScenario, currentCopilot],\n          remainingBox: newRemainingBox,\n          count: count - 1,\n        });\n      }\n\n      stack.push({\n        currentCopilotIndex: currentCopilotIndex + 1,\n        currentScenario,\n        remainingBox,\n        count,\n      });\n    }\n  }\n\n  result.scenarios.sort((a, b) => Number(b.totalScore - a.totalScore));\n\n  return result;\n}\n","import type { CopilotType, MyBoxType } from '@sinsa/schema';\nimport { produce } from 'immer';\nimport { CalcOptions } from '../types';\n\nexport function boxWithoutAuroriansInCopilot(\n  myBox: MyBoxType['aurorian_summaries'],\n  copilot: CopilotType,\n  { disalbeAlternative }: CalcOptions,\n) {\n  return produce(myBox, draft => {\n    for (const aurorianInCopilot of copilot.aurorian_summaries) {\n      // 0. å¦‚æœä½œä¸šä¸­çš„å…‰çµæœ¬èº«æ˜¯å¯æ›¿æ¢çš„ï¼Œåˆ™è·³è¿‡æ­¤å…‰çµåˆ¤æ–­\n      if (!disalbeAlternative && aurorianInCopilot.is_replaceable) {\n        continue;\n      }\n\n      delete draft[aurorianInCopilot.aurorian_name];\n    }\n  });\n}\n","import type {\n  CopilotType,\n  MyBoxType,\n  AurorianSummaryType,\n} from '@sinsa/schema';\nimport { CalcOptions } from '../types';\n\n/**\n * æˆ‘çš„ Box èƒ½å¦æŠ„è¿™ä¸ªä½œä¸š\n * @param copilot ä½œä¸š\n * @param myBox æˆ‘çš„ Box\n * @returns æˆ‘çš„ Box èƒ½å¦æŠ„è¿™ä¸ªä½œä¸š\n */\nexport function canUseCopilot(\n  myBox: MyBoxType['aurorian_summaries'],\n  copilot: CopilotType,\n  { disalbeAlternative }: CalcOptions,\n): boolean {\n  for (const aurorianInCopilot of copilot.aurorian_summaries) {\n    // 0. å¦‚æœä½œä¸šä¸­çš„å…‰çµæœ¬èº«æ˜¯å¯æ›¿æ¢çš„ï¼Œåˆ™è·³è¿‡æ­¤å…‰çµåˆ¤æ–­\n    if (!disalbeAlternative && aurorianInCopilot.is_replaceable) {\n      continue;\n    }\n\n    const aurorianInMyBox = myBox[aurorianInCopilot.aurorian_name] as\n      | AurorianSummaryType\n      | undefined;\n\n    // 1. å…‰çµæœ¬èº«ä¸å­˜åœ¨äºæˆ‘çš„ box\n    if (!aurorianInMyBox) {\n      return false;\n    }\n\n    // 2. å¦‚æœæˆ‘çš„ box å…‰çµçªç ´ä½äºä½œä¸šè¦æ±‚çªç ´\n    if (aurorianInMyBox.breakthrough < aurorianInCopilot.breakthrough) {\n      return false;\n    }\n  }\n\n  return true;\n}\n"],"names":["AurorianCard","name","breakthrough","isReplaceable","sameSize","auroriansMap","useModel","AuroriansModel","aurorian","useMemo","cardRef","useRef","useEffect","aurorian_name","then","esm","default","current","style","backgroundImage","catch","Badge","fontSize","display","zIndex","text","undefined","className","clsx","ref","class","attribute","alt","src","ClassURLMapper","ElementURLMapper","secondary_attribute","title","aurorian_cn_name","rarity","ConfigProvider","theme","components","Rate","starBg","starSize","disabled","value","count","RarityMapper","AuroriansTeam","aurorianSummaries","map","is_replaceable","copilotsColumns","dataIndex","hideInSearch","render","_","entity","aurorian_summaries","width","valueType","sorter","ellipsis","renderText","dom","Tooltip","description","Typography","href","bv","target","copilotRowKey","c","TABLE_CONST_PROPS","pagination","pageSize","size","position","scroll","x","scrollToFirstRowOnChange","CopilotsTable","dataSource","term","actionRef","deps","request","useCallback","params","sort","base","filter","item","ok","includes","score","data","a","b","success","ProTable","rowKey","columns","ExcludeAurorianFormList","props","auroriansOptions","console","log","ProFormList","creatorButtonProps","creatorButtonText","alwaysShowItemLabel","min","ProForm","label","rules","required","Select","options","showSearch","allowClear","placeholder","filterOption","filterAuroriansOption","ProFormDependency","aurorianName","ProFormSwitch","excludeBreakthroughOnly","targetAurorian","ProFormRate","fieldProps","allowHalf","tooltip","SolutionScenarioCard","solution","produce","copilots","draft","Number","toolbar","settings","showHeader","search","ghost","initialValues","k","box","exclude","BASE_TEAM_COUNT","EXTENDED_TEAM_COUNT","CopilotSolution","WHOLE_BOX","formRef","setCurrent","useState","inViewRef","LOCAL_STORAGE_SETTING_KEY","localSetting","setLocalSetting","useLocalStorageState","defaultValue","loading","runAsync","useRequest","filterBox","aurorianInExclude","excludeBreakthrough","solutionResult","Promise","all","resolve","calculateAllScenariosAndScores","availableBox","disalbeAlternative","window","setTimeout","rankSet","WeakMap","i","scenarios","length","set","gtag","enableExclude","solutions_length","xclude","join","manual","defaultParams","COUNT","location","useLocation","Card","marginBottom","onFinish","layout","submitter","searchConfig","submitText","Space","wrap","strong","onValuesChange","allValues","enableSaveLocalStorage","currentFormValues","getFieldsValue","ProFormRadio","radioType","extra","List","align","defaultPageSize","onChange","page","scrollTo","top","offsetTop","behavior","showSizeChanger","sc","renderItem","get","totalScore","format","TermChanger","pathFn","useParams","terms","TermsModel","navigate","useNavigate","parseInt","termsOptions","nextTerm","TermNotFound","firstTerm","Result","status","subTitle","Link","to","RoutePath","Button","type","error","fetch","response","json","refreshDeps","Object","values","PageContainer","content","context","result","stack","currentCopilotIndex","currentScenario","remainingBox","pop","push","reduce","next","BigInt","currentCopilot","canUseCopilot","newRemainingBox","boxWithoutAuroriansInCopilot","myBox","copilot","aurorianInCopilot","aurorianInMyBox"],"mappings":"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"}
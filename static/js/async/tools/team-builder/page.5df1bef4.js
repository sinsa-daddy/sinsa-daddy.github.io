/*! For license information please see page.5df1bef4.js.LICENSE.txt */
(self.webpackChunk_sinsa_web=self.webpackChunk_sinsa_web||[]).push([["683"],{268763:function(e,r,t){"use strict";t.r(r),t.d(r,{AurorianSelectorBox:function(){return f}});var n=t("397458"),l=t("189976"),i=t("167471"),a=t("673148"),o=t("333906"),u=t("126736"),s=t("11561"),c=t("286982"),d=t("157064"),m=t("792421");let A=[1,2,3,4,5],p=[1],x=e=>{let{columnIndex:r,rowIndex:t,style:l,data:i}=e,o=i.dataSource?.[t]?.[r];if(o){let e=(0,a.findKey)(i.selected,e=>e===o.aurorian_id);return(0,n.jsx)("div",{style:l,className:c.CellContainer,children:(0,n.jsxs)("div",{className:c.CardContainer,onClick:r=>{if(r.stopPropagation(),"string"==typeof e){i.setSelected(r=>(0,s.produce)(r,r=>{delete r[e]})),i.setActiveArurorianId(null);return}let t=i.getNextLabel();"number"==typeof t&&(i.setSelected(e=>({...e,[t]:o.aurorian_id})),i.setActiveArurorianId(o.aurorian_id))},children:[(0,n.jsx)(m.AdaptiveAurorianCard,{readOnly:!0,aurorianId:o.aurorian_id}),"string"==typeof e?(0,n.jsx)("div",{className:c.SelectedSingle,children:e}):null]})})}return null},f=e=>{let{filter:r,column:t=3,selected:s,setSelected:m,activeArurorianId:f,setActiveArurorianId:h,multi:C}=e,[{auroriansMap:g}]=(0,l.useModel)(d.AuroriansModel),v=(0,o.useMemo)(()=>{let e="all"===r.element?(0,a.toArray)(g):(0,a.filter)(g,e=>e.primary_element===r.element||"string"==typeof(0,a.find)(s,r=>r===e.aurorian_id)),n=(0,a.sortBy)(e,e=>-e.rarity-("string"==typeof(0,a.find)(s,r=>r===e.aurorian_id)&&"all"!==r.element&&e.primary_element!==r.element?100:0));return(0,a.chunk)(n,t)},[g,r.element,t,s]),S=(0,o.useCallback)(()=>{for(let e of C?A:p){if("string"!=typeof s[e])return e;if(!C)return e}return null},[s,C]),j=(0,o.useMemo)(()=>({selected:s,dataSource:v,setSelected:m,getNextLabel:S,activeArurorianId:f,setActiveArurorianId:h}),[v,s,S,f]);return(0,n.jsx)("div",{className:c.BoxContainer,children:(0,n.jsx)(u.default,{children:e=>{let{height:r,width:l}=e;return(0,n.jsx)(i.FixedSizeGrid,{columnCount:t,columnWidth:(t>=4?l-16:l)/t,height:r,rowCount:v.length,rowHeight:138,width:l,itemData:j,children:x})}})})}},276829:function(e,r,t){"use strict";t.r(r),t.d(r,{AurorianSelectorDetail:function(){return l}});var n=t("397458");let l=()=>(0,n.jsx)("div",{children:"detail"})},917495:function(e,r,t){"use strict";t.r(r),t.d(r,{InnerAurorianSelectorFilter:function(){return c}});var n=t("397458"),l=t("280550"),i=t("250877"),a=t("11561"),o=t("679626"),u=t("717747");let s=[{label:"\u5168\u90E8",value:"all"},{label:"\u6C34",value:i.AurorianAttributeType.Water,icon:(0,n.jsx)("img",{className:o.FilterElementIcon,alt:i.AurorianAttributeType.Water,src:u.ElementURLMapper[i.AurorianAttributeType.Water]})},{label:"\u706B",value:i.AurorianAttributeType.Fire,icon:(0,n.jsx)("img",{className:o.FilterElementIcon,alt:i.AurorianAttributeType.Fire,src:u.ElementURLMapper[i.AurorianAttributeType.Fire]})},{label:"\u68EE",value:i.AurorianAttributeType.Forest,icon:(0,n.jsx)("img",{className:o.FilterElementIcon,alt:i.AurorianAttributeType.Forest,src:u.ElementURLMapper[i.AurorianAttributeType.Forest]})},{label:"\u96F7",value:i.AurorianAttributeType.Thunder,icon:(0,n.jsx)("img",{className:o.FilterElementIcon,alt:i.AurorianAttributeType.Thunder,src:u.ElementURLMapper[i.AurorianAttributeType.Thunder]})}],c=e=>{let{value:r,onChange:t}=e;return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(l.Segmented,{size:"large",value:r.element,options:s,onChange:e=>{t((0,a.produce)(r,r=>{r.element=e}))}})})}},961442:function(e,r,t){"use strict";t.r(r),t.d(r,{InnerAurorianSelector:function(){return s}});var n=t("397458"),l=t("280550"),i=t("333906"),a=t("917495"),o=t("268763"),u=t("276829");let s=e=>{let{multi:r}=e,t=l.Grid.useBreakpoint(),[s,c]=(0,i.useState)(()=>({element:"all"})),[d,m]=(0,i.useState)(()=>({})),[A,p]=(0,i.useState)(null);return console.log("selected",d,A,r?"multi":void 0),t.md?(0,n.jsxs)(l.Flex,{wrap:"nowrap",gap:8,children:[(0,n.jsxs)(l.Flex,{vertical:!0,gap:8,style:{flexBasis:0,flexGrow:1},children:[(0,n.jsx)(a.InnerAurorianSelectorFilter,{value:s,onChange:c}),(0,n.jsx)(o.AurorianSelectorBox,{selected:d,setSelected:m,column:t.lg?6:4,filter:s,activeArurorianId:A,setActiveArurorianId:p,multi:r})]}),(0,n.jsx)("div",{style:{width:"320px"},children:(0,n.jsx)(u.AurorianSelectorDetail,{})})]}):(0,n.jsxs)(l.Flex,{vertical:!0,gap:8,children:[(0,n.jsx)(a.InnerAurorianSelectorFilter,{value:s,onChange:c}),(0,n.jsx)(o.AurorianSelectorBox,{selected:d,setSelected:m,filter:s,activeArurorianId:A,setActiveArurorianId:p,multi:r}),(0,n.jsx)(u.AurorianSelectorDetail,{})]})}},141035:function(e,r,t){"use strict";t.r(r),t.d(r,{AurorianSelector:function(){return o}});var n=t("397458"),l=t("439958"),i=t("280550"),a=t("961442");let o=(0,l.create)(e=>{let{multi:r}=e,t=(0,l.useModal)();return(0,n.jsx)(i.Modal,{...(0,l.antdModalV5)(t),title:r?"\u5FEB\u901F\u7F16\u961F":"\u9009\u62E9\u5149\u7075",onOk:e=>{e.stopPropagation(),t.resolve("hello"),t.hide()},width:"1000px",children:(0,n.jsx)(a.InnerAurorianSelector,{multi:r})})})},792496:function(e,r,t){"use strict";t.r(r);var n=t("397458"),l=t("444189"),i=t("439958"),a=t("280550"),o=t("141035");r.default=()=>{let e=(0,i.useModal)(o.AurorianSelector);return(0,n.jsx)(l.PageContainer,{title:"\u7F16\u961F\u5206\u4EAB",children:(0,n.jsxs)("div",{children:[(0,n.jsx)(a.Button,{onClick:()=>{e.show({multi:!0}).then(e=>{console.log("resolved",e)})},children:"\u5FEB\u901F\u7F16\u961F"}),(0,n.jsx)(a.Button,{onClick:()=>{e.show({}).then(e=>{console.log("resolved",e)})},children:"\u66FF\u6362\u5149\u7075"})]})})}},286982:function(e){"use strict";e.exports={BoxContainer:"BoxContainer-_03a30",boxContainer:"BoxContainer-_03a30",CardContainer:"CardContainer-e57d98",cardContainer:"CardContainer-e57d98",CellContainer:"CellContainer-_9517f",cellContainer:"CellContainer-_9517f",SelectedSingle:"SelectedSingle-_23e2f",selectedSingle:"SelectedSingle-_23e2f"}},679626:function(e){"use strict";e.exports={FilterElementIcon:"FilterElementIcon-af80d4",filterElementIcon:"FilterElementIcon-af80d4"}}}]);
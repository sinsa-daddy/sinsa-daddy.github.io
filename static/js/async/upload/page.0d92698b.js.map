{"version":3,"file":"static/js/async/upload/page.0d92698b.js","sources":["./src/components/AdaptiveAurorianCard/index.tsx","./src/components/UploadForm/AurorianTallCard/index.tsx","./src/components/UploadForm/CopilotSelector/index.tsx","./src/components/UploadForm/index.tsx","./src/routes/upload/page.tsx","./src/views/UploadView/LarkLoginCard/index.tsx","./src/components/AdaptiveAurorianCard/constants.ts","./src/components/AdaptiveAurorianCard/hooks/use-lazy-image.ts","./src/components/UploadForm/AurorianTallCard/utils/getDefaultBreakthrough.ts","./src/components/UploadForm/CopilotSelector/utils/getDefaultBreakthrough.ts","./src/components/UploadForm/utils/toInputRemoteCopilot.ts","./src/models/feishu.ts","./src/views/UploadView/LarkLoginCard/constants.ts"],"sourcesContent":["import React, { useMemo } from 'react';\nimport { useModel } from '@modern-js/runtime/model';\nimport type { AurorianType } from '@sinsa/schema';\nimport clsx from 'clsx';\nimport type { MenuProps } from 'antd';\nimport { ConfigProvider, Flex, Rate, Tag, Dropdown } from 'antd';\nimport { useBreakpoint } from '@ant-design/pro-components';\nimport { m } from 'framer-motion';\nimport type { IgnoreMessage } from '../types';\nimport styles from './styles.module.less';\nimport { useLazyImage } from './hooks/use-lazy-image';\nimport { ClassURLMapper, ElementURLMapper, RarityMapper } from './constants';\nimport { AuroriansModel } from '@/models/aurorians';\n\ninterface AdaptiveArurorianCardProps {\n  name: string;\n  breakthrough?: number;\n  isReplaceable?: boolean;\n  onIgnore?: (msg: IgnoreMessage) => void;\n  disable?: boolean;\n}\n\nexport const AdaptiveAurorianCard = React.memo<AdaptiveArurorianCardProps>(\n  ({ name, breakthrough, isReplaceable, onIgnore, disable }) => {\n    const [{ auroriansMap }] = useModel(AuroriansModel);\n    const aurorian = useMemo(\n      () => auroriansMap[name] as AurorianType | undefined,\n      [auroriansMap, name],\n    );\n    const { containerRef } = useLazyImage(aurorian?.aurorian_name);\n\n    const screen = useBreakpoint();\n    const rateTheme = useMemo(() => {\n      let starSize = 10;\n      switch (screen) {\n        case 'xs':\n          starSize = 10;\n          break;\n        case 'sm':\n          starSize = 12;\n          break;\n        default:\n          starSize = 13;\n          break;\n      }\n      return {\n        components: {\n          Rate: {\n            starBg: 'white',\n            starSize,\n          },\n        },\n      };\n    }, [screen]);\n\n    const items: MenuProps['items'] = [\n      {\n        label: `排除${aurorian?.aurorian_cn_name}`,\n        key: 'ignore',\n      },\n      {\n        label: `仅排除此突破数的${aurorian?.aurorian_cn_name}`,\n        key: 'ignore-breakthrough',\n      },\n    ];\n\n    return (\n      <Dropdown\n        disabled={disable}\n        trigger={['click']}\n        getPopupContainer={() => document.body}\n        menu={{\n          items,\n          onClick: ({ key }) => {\n            console.log('key', key);\n            if (!aurorian?.aurorian_name) {\n              return;\n            }\n            switch (key) {\n              case 'ignore-breakthrough':\n                onIgnore?.({\n                  aurorianName: aurorian.aurorian_name,\n                  breakthrough,\n                });\n                break;\n              case 'ignore':\n                onIgnore?.({\n                  aurorianName: aurorian.aurorian_name,\n                });\n                break;\n              default:\n                break;\n            }\n          },\n        }}\n      >\n        <m.div\n          ref={containerRef}\n          className={clsx(\n            styles.AdaptiveAurorianCard,\n            styles.BackgroundImage,\n            disable && styles.Disabled,\n          )}\n          whileHover={disable ? undefined : { opacity: 0.6 }}\n          whileTap={disable ? undefined : { opacity: 0.2 }}\n        >\n          {aurorian ? (\n            <>\n              <Flex vertical className={styles.NameContainer}>\n                <span>{aurorian?.aurorian_cn_name}</span>\n                {typeof breakthrough === 'number' && aurorian?.rarity ? (\n                  <ConfigProvider theme={rateTheme}>\n                    <Rate\n                      className={styles.BreakThrough}\n                      disabled\n                      value={breakthrough}\n                      count={RarityMapper[aurorian.rarity]}\n                    />\n                  </ConfigProvider>\n                ) : null}\n              </Flex>\n              <Flex className={styles.MetaContainer}>\n                <img\n                  className={styles.MetaClass}\n                  alt={aurorian.class}\n                  src={ClassURLMapper[aurorian.class]}\n                />\n                <Flex align=\"center\">\n                  <img\n                    className={styles.MetaFirstAttribute}\n                    alt={aurorian.attribute}\n                    src={ElementURLMapper[aurorian.attribute]}\n                  />\n                  {aurorian.secondary_attribute ? (\n                    <img\n                      className={styles.MetaSecondAttribute}\n                      alt={aurorian.secondary_attribute}\n                      src={ElementURLMapper[aurorian.secondary_attribute]}\n                    />\n                  ) : null}\n                </Flex>\n              </Flex>\n            </>\n          ) : null}\n          {isReplaceable ? (\n            <Tag className={styles.ReplaceableTag} color={'#dc5950'}>\n              可替\n            </Tag>\n          ) : null}\n        </m.div>\n      </Dropdown>\n    );\n  },\n);\n","import React, { useMemo } from 'react';\nimport { useModel } from '@modern-js/runtime/model';\nimport { type AurorianType } from '@sinsa/schema';\nimport { Flex, Rate, Switch } from 'antd';\nimport { RarityMapper } from '../../AurorianCard/constants';\nimport styles from './styles.module.less';\nimport { getDefaultTooltips } from './utils/getDefaultBreakthrough';\nimport { AuroriansModel } from '@/models/aurorians';\nimport { AdaptiveAurorianCard } from '@/components/AdaptiveAurorianCard';\n\ninterface AurorianTallCardProps {\n  name: string;\n  breakthrough?: number;\n  isReplaceable?: boolean;\n  onBreakthroughChange?: (b: number) => void;\n  onReplaceableChange?: (r: boolean) => void;\n}\n\nexport const AurorianTallCard = React.memo<AurorianTallCardProps>(\n  ({\n    name,\n    breakthrough,\n    isReplaceable,\n    onBreakthroughChange,\n    onReplaceableChange,\n  }) => {\n    const [{ auroriansMap }] = useModel(AuroriansModel);\n    const aurorian = useMemo(\n      () => auroriansMap[name] as AurorianType | undefined,\n      [auroriansMap, name],\n    );\n\n    return (\n      <Flex vertical align=\"center\" gap={8}>\n        <div className={styles.AdaptiveContainer}>\n          <AdaptiveAurorianCard\n            disable\n            name={name}\n            isReplaceable={isReplaceable}\n          />\n        </div>\n\n        {typeof breakthrough === 'number' && aurorian?.rarity ? (\n          <Rate\n            className={styles.BreakThrough}\n            value={breakthrough}\n            count={RarityMapper[aurorian.rarity]}\n            onChange={onBreakthroughChange}\n            tooltips={getDefaultTooltips(aurorian.rarity)}\n          />\n        ) : null}\n        <Switch\n          checkedChildren=\"可替换\"\n          unCheckedChildren=\"不可替换\"\n          onChange={onReplaceableChange}\n        />\n      </Flex>\n    );\n  },\n);\n","import { useModel } from '@modern-js/runtime/model';\nimport type { CopilotAurorianSummaryType } from '@sinsa/schema';\nimport { Flex, Select } from 'antd';\nimport { intersection } from 'lodash-es';\nimport { produce } from 'immer';\nimport styles from './styles.module.less';\nimport { getDefaultBreakthrough } from './utils/getDefaultBreakthrough';\nimport { AuroriansModel, filterAuroriansOption } from '@/models/aurorians';\nimport { AurorianTallCard } from '@/components/UploadForm/AurorianTallCard';\n\ninterface CopilotSelector {\n  value?: CopilotAurorianSummaryType[];\n  onChange?: (val: CopilotAurorianSummaryType[]) => void;\n}\n\nexport const CopilotnSelector: React.FC<CopilotSelector> = ({\n  value,\n  onChange,\n}) => {\n  const [{ auroriansOptions, auroriansMap }] = useModel(AuroriansModel);\n  const multiSelectValue = value?.map(item => item.aurorian_name);\n  return (\n    <Flex vertical gap={8}>\n      <Select\n        mode=\"multiple\"\n        options={auroriansOptions}\n        placeholder=\"支持按拼音搜索, 比如 ad 可以搜到 安顿\"\n        showSearch\n        allowClear={false}\n        value={value?.map(item => item.aurorian_name)}\n        filterOption={filterAuroriansOption}\n        onChange={newVal => {\n          const commonValues = intersection(multiSelectValue, newVal);\n          const remainEntity = value?.filter(item =>\n            commonValues.includes(item.aurorian_name),\n          );\n          onChange?.(\n            newVal.slice(0, 5).map(newName => {\n              const oldEntity = remainEntity?.find(\n                entity => entity.aurorian_name === newName,\n              );\n              if (oldEntity) {\n                return { ...oldEntity };\n              }\n              const targetAurorian = auroriansMap[newName];\n\n              return {\n                aurorian_name: newName,\n                breakthrough: getDefaultBreakthrough(targetAurorian.rarity),\n                is_replaceable: false,\n              };\n            }),\n          );\n        }}\n      />\n\n      <Flex className={styles.AuroriansTeam} wrap=\"wrap\" gap={16}>\n        {value?.map(\n          ({ aurorian_name, breakthrough, is_replaceable }, index) => {\n            return (\n              <AurorianTallCard\n                key={aurorian_name}\n                name={aurorian_name}\n                breakthrough={breakthrough}\n                isReplaceable={is_replaceable}\n                onBreakthroughChange={bt => {\n                  onChange?.(\n                    produce(value, draft => {\n                      if (draft) {\n                        draft[index].breakthrough = bt;\n                      }\n                    }),\n                  );\n                }}\n                onReplaceableChange={r => {\n                  onChange?.(\n                    produce(value, draft => {\n                      if (draft) {\n                        draft[index].is_replaceable = r;\n                      }\n                    }),\n                  );\n                }}\n              />\n            );\n          },\n        )}\n      </Flex>\n    </Flex>\n  );\n};\n","import type { ProFormInstance } from '@ant-design/pro-components';\nimport {\n  FooterToolbar,\n  ProForm,\n  ProFormDateTimePicker,\n  ProFormDependency,\n  ProFormDigit,\n  ProFormSelect,\n  ProFormText,\n  ProFormTextArea,\n} from '@ant-design/pro-components';\nimport { useModel } from '@modern-js/runtime/model';\nimport dayjs from 'dayjs';\nimport { Button, notification } from 'antd';\nimport { useRequest } from 'ahooks';\nimport { useMemo, useRef, useState } from 'react';\nimport type { CopilotType } from '@sinsa/schema';\nimport { CopilotSchema } from '@sinsa/schema';\nimport numeral from 'numeral';\nimport type { FormValues } from './types';\nimport { CopilotnSelector } from './CopilotSelector';\nimport { toInputRemoteCopilot } from './utils/toInputRemoteCopilot';\nimport styles from './styles.module.less';\nimport { TermsModel } from '@/models/terms';\nimport { AuroriansModel } from '@/models/aurorians';\nimport { checkVideoExist, getVideoInfo, postCopilot } from '@/services/http';\nimport { FeishuModel } from '@/models/feishu';\n\nexport const UploadForm: React.FC = () => {\n  const [{ termsOptions, latestTerm: currentTerm, termsMap }] =\n    useModel(TermsModel);\n  const [{ auroriansMap }] = useModel(AuroriansModel);\n  const [{ isLogin }] = useModel(FeishuModel);\n\n  const { data, loading, runAsync, mutate } = useRequest(\n    async bv => {\n      const result = await getVideoInfo(bv);\n\n      return result;\n    },\n    { manual: true },\n  );\n\n  const [loadingValidateBV, setLoadingValidateBV] = useState(false);\n\n  const { loading: loadingSubmit, runAsync: submitAsync } = useRequest(\n    async (submitCopilot: CopilotType) => {\n      const remoteCopilot = toInputRemoteCopilot(submitCopilot, {\n        termsMap,\n        auroriansMap,\n      });\n      const result = await postCopilot(remoteCopilot);\n\n      return result;\n    },\n    { manual: true },\n  );\n\n  const formRef = useRef<ProFormInstance<FormValues>>();\n\n  const initialValues: Partial<FormValues> = useMemo(() => {\n    const result: Partial<FormValues> = {};\n    if (currentTerm?.term) {\n      result.term = currentTerm.term;\n    }\n    return result;\n  }, [currentTerm?.term]);\n\n  return (\n    <ProForm<FormValues>\n      formRef={formRef}\n      initialValues={initialValues}\n      submitter={{\n        submitButtonProps: { loading: loadingValidateBV || loadingSubmit },\n        render: (_, dom) => (\n          <FooterToolbar className={styles.FootBar}>{dom}</FooterToolbar>\n        ),\n        searchConfig: {\n          // eslint-disable-next-line no-nested-ternary\n          submitText: loadingValidateBV\n            ? '校验重复中'\n            : loadingSubmit\n            ? '提交中'\n            : '提交作业',\n        },\n      }}\n      onFinish={async (values: FormValues) => {\n        console.log('开始提交', values);\n\n        try {\n          const submitCopilot = await CopilotSchema.parseAsync(values);\n          const result = await submitAsync(submitCopilot);\n\n          if (result?.record?.record_id) {\n            notification.success({\n              message: `醒山小狗已经成功帮您添加了一份作业，record_id 为 ${result?.record?.record_id}`,\n            });\n            formRef.current?.resetFields();\n            mutate(undefined);\n          } else {\n            notification.error({\n              message: `没有上传成功 ${JSON.stringify(result, null, 2)}`,\n            });\n            console.log('upload failed', result, submitCopilot);\n          }\n        } catch (error) {\n          notification.error({\n            message: `解析表单失败 ${JSON.stringify(error, null, 2)}`,\n          });\n          console.error('解析失败', error);\n        }\n      }}\n    >\n      <ProForm.Group>\n        <ProFormSelect\n          name=\"term\"\n          label=\"荒典期数\"\n          options={termsOptions}\n          rules={[{ required: true }]}\n          width={'sm'}\n          showSearch={false}\n          onChange={nextTerm => {\n            if (nextTerm === 14) {\n              formRef.current?.setFieldValue('rerun_terms', [24]);\n            } else {\n              formRef.current?.setFieldValue('rerun_terms', undefined);\n            }\n          }}\n        />\n        <ProFormSelect\n          name=\"rerun_terms\"\n          label=\"可被复用荒典期数\"\n          options={termsOptions}\n          width={'md'}\n          showSearch={false}\n          fieldProps={{ mode: 'multiple' }}\n          tooltip=\"例如第 14 期荒典作业可被第 24 期荒典复用, 那么上一个选项荒典期数选择 14 期，此选项可被复用荒典期数选择 24 期\"\n        />\n      </ProForm.Group>\n      <ProForm.Group>\n        <ProFormDependency name={['term']}>\n          {({ term }) => (\n            <ProFormText\n              name=\"bv\"\n              label=\"BV号或B站视频链接\"\n              placeholder={\n                'BVxxxxxxxxxx 或 https://www.bilibili.com/video/BVxxxxxxxxxx/'\n              }\n              validateTrigger=\"onBlur\"\n              width={'lg'}\n              fieldProps={{\n                onChange(e) {\n                  const bvOrLink = e.target.value;\n                  if (\n                    typeof bvOrLink === 'string' &&\n                    (bvOrLink.startsWith('https://') ||\n                      bvOrLink.startsWith('http://'))\n                  ) {\n                    const bvResult = /\\/(BV[^/]+)\\/?/.exec(\n                      new URL(bvOrLink).pathname,\n                    )?.[1];\n                    if (\n                      typeof bvResult === 'string' &&\n                      bvResult.startsWith('BV')\n                    ) {\n                      formRef.current?.setFieldValue('bv', bvResult);\n                    }\n                  }\n                  return undefined;\n                },\n              }}\n              rules={[\n                { required: true },\n                { pattern: /^BV.+$/, message: 'BV号格式不正确' },\n                {\n                  async validator(_, bv) {\n                    if (typeof bv === 'string' && bv.startsWith('BV')) {\n                      setLoadingValidateBV(true);\n                      const result = await checkVideoExist({ bv, term });\n                      if (result?.noExist || result?.target) {\n                        if (result?.target) {\n                          const errorMessage = `${\n                            result?.target?.fields?.creator?.name\n                          } 已经在 ${dayjs(\n                            result?.target?.fields?.insert_db_time,\n                          ).format('YYYY-MM-DD HH:mm:ss')} 添加了此作业`;\n                          notification.error({\n                            message: `${errorMessage}. 撞车了~ 请更换作业收录`,\n                          });\n                          throw new Error(errorMessage);\n                        }\n                      }\n                      setLoadingValidateBV(false);\n                    }\n                  },\n                },\n              ]}\n            />\n          )}\n        </ProFormDependency>\n        <ProForm.Item label=\" \">\n          <ProFormDependency name={['bv']}>\n            {({ bv }) => (\n              <Button\n                disabled={\n                  !isLogin || !(typeof bv === 'string' && bv.startsWith('BV'))\n                }\n                type=\"primary\"\n                loading={loading}\n                onClick={async e => {\n                  e.stopPropagation();\n                  const result = await runAsync(bv);\n\n                  if (result) {\n                    const { title, desc, owner, pubdate } = result;\n                    formRef.current?.setFieldsValue({\n                      title,\n                      description: desc === '-' ? undefined : desc,\n                      author: owner.name,\n                      upload_time: pubdate.valueOf(),\n                    });\n                  }\n                }}\n              >\n                读取视频信息\n              </Button>\n            )}\n          </ProFormDependency>\n        </ProForm.Item>\n      </ProForm.Group>\n      {data ? (\n        <>\n          <iframe\n            src={`//player.bilibili.com/player.html?bvid=${data.bvid}`}\n            scrolling=\"no\"\n            frameBorder=\"no\"\n            style={{ border: 0, width: 700, height: 420 }}\n          ></iframe>\n        </>\n      ) : null}\n\n      <ProForm.Item\n        label=\"光灵阵容\"\n        name=\"aurorian_summaries\"\n        rules={[\n          {\n            async validator(_, array) {\n              if (Array.isArray(array) && array.length === 5) {\n                // pass\n              } else {\n                throw new Error('光灵阵容搭配不正确');\n              }\n            },\n          },\n          { required: true },\n        ]}\n      >\n        <CopilotnSelector />\n      </ProForm.Item>\n\n      <ProFormDigit\n        label=\"结算分数\"\n        name=\"score\"\n        validateTrigger=\"onBlur\"\n        rules={[\n          { required: true },\n          {\n            async validator(_, value) {\n              if (\n                typeof value === 'number' &&\n                Number.isInteger(value) &&\n                value > 0\n              ) {\n                // pass\n              } else {\n                throw new Error('分数必须是正整数');\n              }\n\n              if (value >= 1e8) {\n                throw new Error('分数大于一亿分了，你要不再看看有没有填对？');\n              } else if (value <= 1e5) {\n                throw new Error('分数小于十万分，你要不要再看看有没有填对？');\n              }\n            },\n          },\n        ]}\n        min={0}\n        fieldProps={{\n          formatter: value => numeral(value).format('0,0'),\n          parser: str => numeral(str).value() ?? 0,\n          size: 'large',\n        }}\n      />\n\n      <ProFormText label=\"视频标题\" name=\"title\" rules={[{ required: true }]} />\n\n      <ProForm.Group>\n        <ProFormDateTimePicker\n          label=\"视频发布时间\"\n          name={'upload_time'}\n          rules={[{ required: true }]}\n        />\n        <ProFormText\n          label=\"作业作者\"\n          name={'author'}\n          rules={[{ required: true }]}\n        />\n        <ProFormTextArea label=\"视频描述\" name=\"description\" width={'xl'} />\n      </ProForm.Group>\n    </ProForm>\n  );\n};\n","import { PageContainer } from '@ant-design/pro-components';\nimport { Card } from 'antd';\nimport { UploadForm } from '@/components/UploadForm';\nimport { LarkLoginCard } from '@/views/UploadView/LarkLoginCard';\n\nconst UploadPage: React.FC = () => {\n  return (\n    <PageContainer\n      title=\"作业收录（内部版）\"\n      content=\"内部的收录同学可以使用此页面快速上传作业，之后会再提供 Chrome 插件提高效率（比心）\"\n    >\n      <LarkLoginCard />\n      <Card style={{ marginTop: '1rem' }}>\n        <UploadForm />\n      </Card>\n    </PageContainer>\n  );\n};\n\nexport default UploadPage;\n","import { Link, useLocation } from '@modern-js/runtime/router';\nimport { Avatar, Button, Card, Space, Typography } from 'antd';\nimport { useEffect, useMemo, useState } from 'react';\nimport { useRequest } from 'ahooks';\nimport { useModel } from '@modern-js/runtime/model';\nimport { LARK_SCOPE, UPLOAD_APP_ID } from './constants';\nimport { RoutePath } from '@/views/GlobalLayout/constants';\nimport { getFeishuProfile, saveAuthCallback } from '@/services/http';\nimport { FeishuModel } from '@/models/feishu';\n\nexport const LarkLoginCard: React.FC = () => {\n  const REDIRECT_URI = useMemo(() => {\n    return `${window.location.origin}/#${RoutePath.Upload}/`;\n  }, []);\n\n  const [larkpreLoginCode, setLarkpreLoginCode] = useState<string>();\n  const location = useLocation();\n\n  useEffect(() => {\n    const code = location.search\n      .slice(1)\n      .split('&')\n      .find(item => item.startsWith('code='))\n      ?.replace('code=', '');\n\n    if (code) {\n      setLarkpreLoginCode(code);\n    }\n  }, [location.search]);\n\n  const [, { setProfile }] = useModel(FeishuModel);\n\n  const { data, loading } = useRequest(\n    async () => {\n      if (larkpreLoginCode) {\n        await saveAuthCallback({ code: larkpreLoginCode });\n        setLarkpreLoginCode(undefined);\n      }\n\n      return getFeishuProfile();\n    },\n    {\n      refreshDeps: [larkpreLoginCode],\n      onSuccess(_p) {\n        setProfile(_p);\n      },\n    },\n  );\n\n  const FEISHU_AUTH_URL = useMemo(() => {\n    const url = new URL(`https://open.feishu.cn/open-apis/authen/v1/authorize`);\n    url.searchParams.append('app_id', UPLOAD_APP_ID);\n    url.searchParams.append('redirect_uri', REDIRECT_URI);\n    url.searchParams.append('scope', LARK_SCOPE);\n\n    return url.href;\n  }, []);\n  return (\n    <Card loading={loading}>\n      {data ? (\n        <Card.Meta\n          avatar={<Avatar src={data.avatar_url} />}\n          title={data.name}\n          description=\"欢迎回来~ 您已授权，可以开始工作啦\"\n        />\n      ) : (\n        <Space>\n          <Typography.Text>\n            您好，我是作业提交醒山小狗，我需要您飞书授权才能工作\n          </Typography.Text>\n          <Link target=\"_self\" to={FEISHU_AUTH_URL}>\n            <Button type=\"primary\">去飞书授权</Button>\n          </Link>\n        </Space>\n      )}\n    </Card>\n  );\n};\n","import {\n  AurorianAttributeType,\n  AurorianClassType,\n  AurorianRarityType,\n} from '@sinsa/schema';\nimport E1 from '@/assets/elements/1.webp';\nimport E2 from '@/assets/elements/2.webp';\nimport E3 from '@/assets/elements/3.webp';\nimport E4 from '@/assets/elements/4.webp';\nimport C1 from '@/assets/classes/2001.webp';\nimport C2 from '@/assets/classes/2002.webp';\nimport C3 from '@/assets/classes/2003.webp';\nimport C4 from '@/assets/classes/2004.webp';\n\nexport const RarityMapper = {\n  [AurorianRarityType.Star6]: 6,\n  [AurorianRarityType.Star5]: 5,\n  [AurorianRarityType.Star4]: 4,\n  [AurorianRarityType.Star3]: 3,\n  [AurorianRarityType.Star2]: 2,\n  [AurorianRarityType.Star1]: 1,\n};\n\nexport const ElementURLMapper = {\n  [AurorianAttributeType.Water]: E1,\n  [AurorianAttributeType.Fire]: E2,\n  [AurorianAttributeType.Forest]: E3,\n  [AurorianAttributeType.Thunder]: E4,\n};\n\nexport const ElementTextMapper = {\n  [AurorianAttributeType.Water]: '水',\n  [AurorianAttributeType.Fire]: '火',\n  [AurorianAttributeType.Forest]: '森',\n  [AurorianAttributeType.Thunder]: '雷',\n};\n\nexport const ClassURLMapper = {\n  [AurorianClassType.Converter]: C1,\n  [AurorianClassType.Sniper]: C2,\n  [AurorianClassType.Detonator]: C3,\n  [AurorianClassType.Supporter]: C4,\n};\n","import { useEffect, useRef } from 'react';\n\nexport function useLazyImage(aurorian_name?: string) {\n  const containerRef = useRef<HTMLDivElement>(null);\n  useEffect(() => {\n    const loadImage = async () => {\n      if (aurorian_name) {\n        const module = await import(`@/assets/skins/${aurorian_name}.webp`);\n        if (typeof module?.default === 'string') {\n          if (containerRef.current) {\n            containerRef.current.style.backgroundImage = `url(${module.default})`;\n          }\n        }\n      }\n    };\n    loadImage();\n  }, [aurorian_name]);\n\n  return {\n    containerRef,\n  };\n}\n","import { AurorianRarityType } from '@sinsa/schema';\nimport { memoize } from 'lodash-es';\n\nexport const getDefaultTooltips = memoize((rarity: AurorianRarityType) => {\n  switch (rarity) {\n    case AurorianRarityType.Star6:\n      return ['零', '零', '一', '一', '一', '满'].map(txt => `${txt}破`);\n    case AurorianRarityType.Star5:\n      return ['零', '一', '一', '一', '满'].map(txt => `${txt}破`);\n    case AurorianRarityType.Star4:\n      return ['零', '零', '零', '满'].map(txt => `${txt}破`);\n    case AurorianRarityType.Star3:\n      return ['零', '零', '满'].map(txt => `${txt}破`);\n    case AurorianRarityType.Star2:\n      return ['零', '满'].map(txt => `${txt}破`);\n    case AurorianRarityType.Star1:\n      return ['满'].map(txt => `${txt}破`);\n    default:\n      return [];\n  }\n});\n","import { AurorianRarityType } from '@sinsa/schema';\nimport { memoize } from 'lodash-es';\n\nexport const getDefaultBreakthrough = memoize((rarity: AurorianRarityType) => {\n  switch (rarity) {\n    case AurorianRarityType.Star6:\n      return 2;\n    case AurorianRarityType.Star5:\n      return 1;\n    case AurorianRarityType.Star4:\n      return 4;\n    case AurorianRarityType.Star3:\n      return 3;\n    case AurorianRarityType.Star2:\n      return 2;\n    case AurorianRarityType.Star1:\n      return 1;\n    default:\n      return 0;\n  }\n});\n","import type { AurorianType, CopilotType, TermType } from '@sinsa/schema';\n\nexport function toInputRemoteCopilot(\n  c: CopilotType,\n  {\n    termsMap,\n    auroriansMap,\n  }: {\n    termsMap: Record<TermType['term'], TermType>;\n    auroriansMap: Record<AurorianType['aurorian_name'], AurorianType>;\n  },\n) {\n  return {\n    bv: c.bv,\n    title: c.title,\n    description: c.description,\n    author: c.author,\n    insert_db_time: c.insert_db_time?.valueOf(),\n    upload_time: c.upload_time.valueOf(),\n    score: Number(c.score),\n    term: [termsMap[c.term]._record_id],\n    rerun_terms: c.rerun_terms?.map(term => termsMap[term]._record_id),\n    aurorian_1: [\n      auroriansMap[c.aurorian_summaries[0].aurorian_name]._record_id,\n    ],\n    aurorian_1_breakthrough: String(c.aurorian_summaries[0].breakthrough),\n    aurorian_2: [\n      auroriansMap[c.aurorian_summaries[1].aurorian_name]._record_id,\n    ],\n    aurorian_2_breakthrough: String(c.aurorian_summaries[1].breakthrough),\n    aurorian_3: [\n      auroriansMap[c.aurorian_summaries[2].aurorian_name]._record_id,\n    ],\n    aurorian_3_breakthrough: String(c.aurorian_summaries[2].breakthrough),\n    aurorian_4: [\n      auroriansMap[c.aurorian_summaries[3].aurorian_name]._record_id,\n    ],\n    aurorian_4_breakthrough: String(c.aurorian_summaries[3].breakthrough),\n    aurorian_5: [\n      auroriansMap[c.aurorian_summaries[4].aurorian_name]._record_id,\n    ],\n    aurorian_5_breakthrough: String(c.aurorian_summaries[4].breakthrough),\n    replaceable_position: c.aurorian_summaries\n      .map((item, index) => (item.is_replaceable ? `${index + 1}` : null))\n      .filter((n): n is string => typeof n === 'string'),\n  };\n}\n","import { model } from '@modern-js/runtime/model';\nimport type { FeishuProfileType } from '@/schemas/feishu-profile';\n\nexport interface FeishuState {\n  profile?: FeishuProfileType;\n}\n\nexport const FeishuModel = model<FeishuState>('feishu').define({\n  state: {\n    profile: undefined,\n  },\n  computed: {\n    isLogin: state => typeof state.profile?.name === 'string',\n  },\n  actions: {},\n});\n","export const UPLOAD_APP_ID = 'cli_a5fd9725777a100b';\n\nexport const LARK_SCOPE = `bitable:app`;\n"],"names":["AdaptiveAurorianCard","name","breakthrough","isReplaceable","onIgnore","disable","auroriansMap","useModel","AuroriansModel","aurorian","useMemo","containerRef","useLazyImage","aurorian_name","screen","useBreakpoint","rateTheme","starSize","components","Rate","starBg","items","label","aurorian_cn_name","key","Dropdown","disabled","trigger","getPopupContainer","document","body","menu","onClick","console","log","aurorianName","m","ref","className","whileHover","undefined","opacity","whileTap","Flex","vertical","rarity","ConfigProvider","theme","value","count","RarityMapper","alt","class","src","ClassURLMapper","align","attribute","ElementURLMapper","secondary_attribute","Tag","color","AurorianTallCard","onBreakthroughChange","onReplaceableChange","gap","onChange","tooltips","getDefaultTooltips","Switch","checkedChildren","unCheckedChildren","CopilotnSelector","auroriansOptions","multiSelectValue","map","item","Select","mode","options","placeholder","showSearch","allowClear","filterOption","filterAuroriansOption","newVal","commonValues","intersection","remainEntity","filter","includes","slice","newName","oldEntity","find","entity","targetAurorian","getDefaultBreakthrough","is_replaceable","wrap","index","bt","produce","draft","r","UploadForm","termsOptions","latestTerm","currentTerm","termsMap","TermsModel","isLogin","FeishuModel","data","loading","runAsync","mutate","useRequest","bv","getVideoInfo","manual","loadingValidateBV","setLoadingValidateBV","useState","loadingSubmit","submitAsync","submitCopilot","remoteCopilot","toInputRemoteCopilot","postCopilot","formRef","useRef","initialValues","result","term","ProForm","submitter","submitButtonProps","render","_","dom","FooterToolbar","searchConfig","submitText","onFinish","values","CopilotSchema","record","record_id","notification","message","current","resetFields","JSON","stringify","error","ProFormSelect","rules","required","width","nextTerm","setFieldValue","fieldProps","tooltip","ProFormDependency","ProFormText","validateTrigger","e","bvOrLink","target","startsWith","bvResult","exec","URL","pathname","pattern","validator","checkVideoExist","noExist","errorMessage","fields","creator","insert_db_time","format","Error","Button","type","stopPropagation","title","desc","owner","pubdate","setFieldsValue","description","author","upload_time","valueOf","bvid","scrolling","frameBorder","style","border","height","array","Array","isArray","length","ProFormDigit","Number","isInteger","min","formatter","parser","str","size","ProFormDateTimePicker","ProFormTextArea","PageContainer","content","LarkLoginCard","Card","marginTop","REDIRECT_URI","window","location","origin","RoutePath","larkpreLoginCode","setLarkpreLoginCode","useLocation","useEffect","code","search","split","replace","setProfile","saveAuthCallback","getFeishuProfile","refreshDeps","onSuccess","_p","FEISHU_AUTH_URL","url","searchParams","append","UPLOAD_APP_ID","LARK_SCOPE","href","avatar","Avatar","avatar_url","Space","Typography","Link","to","AurorianRarityType","AurorianAttributeType","AurorianClassType","loadImage","module","default","backgroundImage","memoize","txt","c","score","_record_id","rerun_terms","aurorian_1","aurorian_summaries","aurorian_1_breakthrough","String","aurorian_2","aurorian_2_breakthrough","aurorian_3","aurorian_3_breakthrough","aurorian_4","aurorian_4_breakthrough","aurorian_5","aurorian_5_breakthrough","replaceable_position","n","model","define","state","profile","computed","actions"],"mappings":"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"}
/*! For license information please see page.5da1b227.js.LICENSE.txt */
(globalThis.webpackChunk_sinsa_web=globalThis.webpackChunk_sinsa_web||[]).push([["4501"],{877107:function(e,r,a){var t={"./alice.webp":"877107@./alice.webp","./allura.webp":"877107@./allura.webp","./amy.webp":"877107@./amy.webp","./angel.webp":"877107@./angel.webp","./ansia.webp":"877107@./ansia.webp","./antony.webp":"877107@./antony.webp","./areia.webp":"877107@./areia.webp","./barbara.webp":"877107@./barbara.webp","./barton.webp":"877107@./barton.webp","./benny-and-curo.webp":"877107@./benny-and-curo.webp","./beryl.webp":"877107@./beryl.webp","./bethel.webp":"877107@./bethel.webp","./bethlehem.webp":"877107@./bethlehem.webp","./beverly.webp":"877107@./beverly.webp","./bonacie.webp":"877107@./bonacie.webp","./brock.webp":"877107@./brock.webp","./carleen.webp":"877107@./carleen.webp","./chainsaw-rick.webp":"877107@./chainsaw-rick.webp","./chandra.webp":"877107@./chandra.webp","./charon.webp":"877107@./charon.webp","./chenni.webp":"877107@./chenni.webp","./chloe.webp":"877107@./chloe.webp","./clover.webp":"877107@./clover.webp","./connolly.webp":"877107@./connolly.webp","./constantine.webp":"877107@./constantine.webp","./corax.webp":"877107@./corax.webp","./cuscuta.webp":"877107@./cuscuta.webp","./dantang.webp":"877107@./dantang.webp","./dawn.webp":"877107@./dawn.webp","./dayna.webp":"877107@./dayna.webp","./dove.webp":"877107@./dove.webp","./eho.webp":"877107@./eho.webp","./eicy.webp":"877107@./eicy.webp","./elma.webp":"877107@./elma.webp","./eve.webp":"877107@./eve.webp","./fafnir.webp":"877107@./fafnir.webp","./faust.webp":"877107@./faust.webp","./fleur.webp":"877107@./fleur.webp","./frostfire.webp":"877107@./frostfire.webp","./gabriel.webp":"877107@./gabriel.webp","./genevieve.webp":"877107@./genevieve.webp","./gram.webp":"877107@./gram.webp","./gronru.webp":"877107@./gronru.webp","./hiiro.webp":"877107@./hiiro.webp","./hydrad.webp":"877107@./hydrad.webp","./irridon.webp":"877107@./irridon.webp","./istvan.webp":"877107@./istvan.webp","./jane.webp":"877107@./jane.webp","./joanie-boom.webp":"877107@./joanie-boom.webp","./jola.webp":"877107@./jola.webp","./jomu.webp":"877107@./jomu.webp","./jona.webp":"877107@./jona.webp","./kafka.webp":"877107@./kafka.webp","./kanna.webp":"877107@./kanna.webp","./keating.webp":"877107@./keating.webp","./kleken.webp":"877107@./kleken.webp","./korgon.webp":"877107@./korgon.webp","./kuma-pengy.webp":"877107@./kuma-pengy.webp","./leah.webp":"877107@./leah.webp","./leona.webp":"877107@./leona.webp","./lester.webp":"877107@./lester.webp","./li-tianxian.webp":"877107@./li-tianxian.webp","./lilliam.webp":"877107@./lilliam.webp","./liqing.webp":"877107@./liqing.webp","./lola.webp":"877107@./lola.webp","./louise.webp":"877107@./louise.webp","./lucoa.webp":"877107@./lucoa.webp","./luke.webp":"877107@./luke.webp","./luo-song.webp":"877107@./luo-song.webp","./maggie.webp":"877107@./maggie.webp","./mia.webp":"877107@./mia.webp","./michael.webp":"877107@./michael.webp","./michenny.webp":"877107@./michenny.webp","./migard.webp":"877107@./migard.webp","./ms-blanc.webp":"877107@./ms-blanc.webp","./mu-yuebai.webp":"877107@./mu-yuebai.webp","./mythos.webp":"877107@./mythos.webp","./nadine.webp":"877107@./nadine.webp","./nails.webp":"877107@./nails.webp","./naroxel.webp":"877107@./naroxel.webp","./nemesis.webp":"877107@./nemesis.webp","./nikinis.webp":"877107@./nikinis.webp","./no-33.webp":"877107@./no-33.webp","./noah.webp":"877107@./noah.webp","./novio.webp":"877107@./novio.webp","./odi.webp":"877107@./odi.webp","./ophina.webp":"877107@./ophina.webp","./pact.webp":"877107@./pact.webp","./paloma.webp":"877107@./paloma.webp","./pasolo.webp":"877107@./pasolo.webp","./patty-patsy.webp":"877107@./patty-patsy.webp","./pepi.webp":"877107@./pepi.webp","./philyshy.webp":"877107@./philyshy.webp","./pittman.webp":"877107@./pittman.webp","./rabbie.webp":"877107@./rabbie.webp","./raphael.webp":"877107@./raphael.webp","./regal.webp":"877107@./regal.webp","./regina.webp":"877107@./regina.webp","./requiem.webp":"877107@./requiem.webp","./revy.webp":"877107@./revy.webp","./robyn.webp":"877107@./robyn.webp","./sariel.webp":"877107@./sariel.webp","./schwartz.webp":"877107@./schwartz.webp","./seleucid.webp":"877107@./seleucid.webp","./sharona.webp":"877107@./sharona.webp","./sikare.webp":"877107@./sikare.webp","./sinsa.webp":"877107@./sinsa.webp","./smokey.webp":"877107@./smokey.webp","./sork-bekk.webp":"877107@./sork-bekk.webp","./sylva.webp":"877107@./sylva.webp","./taki.webp":"877107@./taki.webp","./tessa.webp":"877107@./tessa.webp","./tiny-one.webp":"877107@./tiny-one.webp","./tohru.webp":"877107@./tohru.webp","./tweety.webp":"877107@./tweety.webp","./unimet.webp":"877107@./unimet.webp","./uriah.webp":"877107@./uriah.webp","./uriel.webp":"877107@./uriel.webp","./vice-keen-sight.webp":"877107@./vice-keen-sight.webp","./vice.webp":"877107@./vice.webp","./victoria.webp":"877107@./victoria.webp","./vivian.webp":"877107@./vivian.webp","./wendy.webp":"877107@./wendy.webp","./white-dwarf.webp":"877107@./white-dwarf.webp","./wrath.webp":"877107@./wrath.webp","./xuan-ji.webp":"877107@./xuan-ji.webp","./zarya.webp":"877107@./zarya.webp","./zhong-xu.webp":"877107@./zhong-xu.webp","./zoya.webp":"877107@./zoya.webp"},n={"./alice.webp":"103333","./allura.webp":"579655","./amy.webp":"68317","./angel.webp":"179735","./ansia.webp":"99777","./antony.webp":"801760","./areia.webp":"323883","./barbara.webp":"304792","./barton.webp":"820481","./benny-and-curo.webp":"464132","./beryl.webp":"340030","./bethel.webp":"734011","./bethlehem.webp":"762473","./beverly.webp":"937405","./bonacie.webp":"970781","./brock.webp":"396899","./carleen.webp":"89352","./chainsaw-rick.webp":"878401","./chandra.webp":"707583","./charon.webp":"791931","./chenni.webp":"562392","./chloe.webp":"658489","./clover.webp":"841825","./connolly.webp":"571428","./constantine.webp":"111573","./corax.webp":"859705","./cuscuta.webp":"834842","./dantang.webp":"877804","./dawn.webp":"954200","./dayna.webp":"733738","./dove.webp":"753503","./eho.webp":"384689","./eicy.webp":"487774","./elma.webp":"272992","./eve.webp":"104473","./fafnir.webp":"420613","./faust.webp":"895200","./fleur.webp":"265839","./frostfire.webp":"249725","./gabriel.webp":"981596","./genevieve.webp":"949355","./gram.webp":"717429","./gronru.webp":"303641","./hiiro.webp":"631863","./hydrad.webp":"148547","./irridon.webp":"432718","./istvan.webp":"166437","./jane.webp":"145835","./joanie-boom.webp":"533131","./jola.webp":"653469","./jomu.webp":"91240","./jona.webp":"198107","./kafka.webp":"348564","./kanna.webp":"722711","./keating.webp":"165687","./kleken.webp":"591709","./korgon.webp":"387195","./kuma-pengy.webp":"111036","./leah.webp":"336439","./leona.webp":"157794","./lester.webp":"959506","./li-tianxian.webp":"329412","./lilliam.webp":"35413","./liqing.webp":"731301","./lola.webp":"233789","./louise.webp":"567334","./lucoa.webp":"404990","./luke.webp":"44076","./luo-song.webp":"884650","./maggie.webp":"266726","./mia.webp":"239398","./michael.webp":"686509","./michenny.webp":"832062","./migard.webp":"313307","./ms-blanc.webp":"130435","./mu-yuebai.webp":"797289","./mythos.webp":"965448","./nadine.webp":"435295","./nails.webp":"449447","./naroxel.webp":"340594","./nemesis.webp":"840889","./nikinis.webp":"397439","./no-33.webp":"980053","./noah.webp":"918813","./novio.webp":"938907","./odi.webp":"170399","./ophina.webp":"364573","./pact.webp":"565755","./paloma.webp":"724616","./pasolo.webp":"177934","./patty-patsy.webp":"601795","./pepi.webp":"677395","./philyshy.webp":"614922","./pittman.webp":"120884","./rabbie.webp":"448771","./raphael.webp":"653273","./regal.webp":"131066","./regina.webp":"185738","./requiem.webp":"148459","./revy.webp":"178866","./robyn.webp":"372981","./sariel.webp":"526420","./schwartz.webp":"843348","./seleucid.webp":"8906","./sharona.webp":"855538","./sikare.webp":"733959","./sinsa.webp":"202033","./smokey.webp":"383518","./sork-bekk.webp":"942317","./sylva.webp":"751412","./taki.webp":"998713","./tessa.webp":"123544","./tiny-one.webp":"739581","./tohru.webp":"382341","./tweety.webp":"764767","./unimet.webp":"408281","./uriah.webp":"980258","./uriel.webp":"898992","./vice-keen-sight.webp":"790564","./vice.webp":"318110","./victoria.webp":"698623","./vivian.webp":"319589","./wendy.webp":"873455","./white-dwarf.webp":"155419","./wrath.webp":"990823","./xuan-ji.webp":"319268","./zarya.webp":"462722","./zhong-xu.webp":"156634","./zoya.webp":"938146"};function i(e){if(!a.o(n,e))return Promise.resolve().then(function(){var r=Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r});var r=t[e],i=n[e];return a.el(r).then(function(){return a.t(i,17)})}i.keys=function(){return Object.keys(n)},i.id="877107",e.exports=i},522728:function(e,r,a){"use strict";e.exports={AdaptiveAurorianCard:"AdaptiveAurorianCard-d7ef3b",adaptiveAurorianCard:"AdaptiveAurorianCard-d7ef3b",BackgroundImage:"BackgroundImage-_43461",backgroundImage:"BackgroundImage-_43461",BreakThrough:"BreakThrough-bbea6b",breakThrough:"BreakThrough-bbea6b",Disabled:"Disabled-_21a59",disabled:"Disabled-_21a59",LargeSize:"LargeSize-_6952b",largeSize:"LargeSize-_6952b",MetaClass:"MetaClass-d72291",metaClass:"MetaClass-d72291",MetaContainer:"MetaContainer-a2721f",metaContainer:"MetaContainer-a2721f",MetaFirstAttribute:"MetaFirstAttribute-cfe989",metaFirstAttribute:"MetaFirstAttribute-cfe989",MetaSecondAttribute:"MetaSecondAttribute-_1cb80",metaSecondAttribute:"MetaSecondAttribute-_1cb80",MiniSize:"MiniSize-_8a459",miniSize:"MiniSize-_8a459",NameContainer:"NameContainer-ca1a21",nameContainer:"NameContainer-ca1a21",ReplaceableTag:"ReplaceableTag-_725fb",replaceableTag:"ReplaceableTag-_725fb"}},128750:function(e,r,a){"use strict";e.exports={Author:"Author-f55823",author:"Author-f55823",Card:"Card-c088dd",card:"Card-c088dd",CoverContainer:"CoverContainer-_8adb6",coverContainer:"CoverContainer-_8adb6",CoverImage:"CoverImage-_565fe",coverImage:"CoverImage-_565fe",Dot:"Dot-_916b0",dot:"Dot-_916b0",Duration:"Duration-_0528f",duration:"Duration-_0528f",Title:"Title-_7b631",title:"Title-_7b631",UploadedTagContainer:"UploadedTagContainer-b30f9e",uploadedTagContainer:"UploadedTagContainer-b30f9e"}},899916:function(e,r,a){"use strict";e.exports={RelativeTimeText:"RelativeTimeText-ab3533",relativeTimeText:"RelativeTimeText-ab3533"}},441854:function(e,r,a){"use strict";e.exports={AdaptiveContainer:"AdaptiveContainer-f84115",adaptiveContainer:"AdaptiveContainer-f84115",BreakThrough:"BreakThrough-_8e406",breakThrough:"BreakThrough-_8e406"}},794017:function(e,r,a){"use strict";e.exports={AuroriansTeam:"AuroriansTeam-fa97d1",auroriansTeam:"AuroriansTeam-fa97d1"}},903621:function(e,r,a){"use strict";e.exports={FootBar:"FootBar-_705b4",footBar:"FootBar-_705b4"}},408748:function(e,r,a){"use strict";a.r(r),a.d(r,{AdaptiveAurorianCard:function(){return h}});var t=a("766791"),n=a("450348"),i=a.n(n),o=a("67348"),s=a("835079"),l=a("375748"),p=a("928958"),u=a("863266"),b=a("522728"),c=a("791520"),w=a("887921"),d=a("439538"),m=a("734513");let h=i().memo(e=>{let{aurorianId:r,breakthrough:a,remark:i,onIgnore:h,readOnly:f,mini:g}=e,[{auroriansMap:y}]=(0,o.useModel)(d.AuroriansModel),x=(0,n.useMemo)(()=>y[r],[y,r]),{containerRef:v}=(0,c.useLazyImage)(x?.aurorian_id),k=(0,p.useBreakpoint)(),C=(0,n.useMemo)(()=>{let e=10;switch(k){case"xs":e=10;break;case"sm":e=12;break;default:e=13}return{components:{Rate:{starBg:"white",starSize:e}}}},[k]),_=[{label:`\u{6392}\u{9664}${x?.cn_name}`,key:"ignore"},{label:`\u{4EC5}\u{6392}\u{9664}\u{6B64}\u{7A81}\u{7834}\u{6570}\u{7684}${x?.cn_name}`,key:"ignore-breakthrough"}];return(0,t.jsx)(l.Dropdown,{disabled:f,trigger:["click"],getPopupContainer:()=>document.body,menu:{items:_,onClick:e=>{let{key:r}=e;if(x?.aurorian_id)switch(r){case"ignore-breakthrough":h?.({type:"aurorian",aurorianId:x.aurorian_id,breakthrough:m.getNormalizeBreakthroughByRarity(a??0,x.rarity)});break;case"ignore":h?.({type:"aurorian",aurorianId:x.aurorian_id})}}},children:(0,t.jsxs)(u.m.div,{ref:v,className:(0,s.default)(b.AdaptiveAurorianCard,b.BackgroundImage,f&&b.Disabled,g?b.MiniSize:b.LargeSize),whileHover:f?void 0:{opacity:.6},whileTap:f?void 0:{opacity:.2},children:[x?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(l.Flex,{vertical:!0,className:b.NameContainer,children:[(0,t.jsx)("span",{children:x?.cn_name}),"number"==typeof a&&x?.rarity?(0,t.jsx)(l.ConfigProvider,{theme:C,children:(0,t.jsx)(l.Rate,{className:b.BreakThrough,disabled:!0,value:a,count:x.rarity})}):null]}),(0,t.jsxs)(l.Flex,{className:b.MetaContainer,children:[(0,t.jsx)("img",{className:b.MetaClass,alt:x.profession,src:w.ClassURLMapper[x.profession]}),(0,t.jsxs)(l.Flex,{align:"center",vertical:g,children:[(0,t.jsx)("img",{className:b.MetaFirstAttribute,alt:x.primary_element,src:w.ElementURLMapper[x.primary_element]}),x.secondary_element?(0,t.jsx)("img",{className:b.MetaSecondAttribute,alt:x.secondary_element,src:w.ElementURLMapper[x.secondary_element]}):null]})]})]}):null,i?.replace?.type==="any"&&i?.replace?.any==="All"?(0,t.jsx)(l.Tag,{className:b.ReplaceableTag,color:"#dc5950",children:"\u4EFB\u610F"}):null]})})})},711248:function(e,r,a){"use strict";a.r(r),a.d(r,{useLatestVideoCardRef:function(){return f},LatestVideoCard:function(){return g}});var t=a("766791"),n=a("375748"),i=a("450348"),o=a.n(i),s=a("67348"),l=a("561904"),p=a.n(l),u=a("667227"),b=a("260740"),c=a("216746"),w=a("870233"),d=a("126254"),m=a("128750"),h=a("386025");function f(){return(0,i.useRef)(null)}let g=o().forwardRef((e,r)=>{let{onClickNewCard:o,currentTermId:l}=e,{loadingLatestCopilots:f,loadingLatestVideos:g,getLatestCopilotsAsync:y,getLatestVideosAsync:x,latestCopilots:v,latestVideos:k,refresh:C}=(0,d.useLatestVideo)(),[{isLogin:_}]=(0,s.useModel)(h.FeishuModel);(0,i.useEffect)(()=>{_&&(y(),x())},[_]);let j=(0,i.useMemo)(()=>{let e=v?.filter(e=>e.term_id===l),r=(0,u.maxBy)(e,e=>e.score);return{maxScoreCopilot:r,minScoreCopilot:(0,u.minBy)(e,e=>e.score)}},[v,l]);(0,i.useImperativeHandle)(r,()=>({refresh:C,latestMaxAndMinScoreCopilots:j}),[C,j]);let{data:T,loading:A}=(0,b.useRequest)(async()=>({list:Array.from(await a.el("711248@2004:2030").then(a.t.bind(a,"335718",19)))}),{});return _?(0,t.jsx)(n.Card,{title:"B\u7AD9\u89C6\u9891\u6700\u65B0\u6536\u5F55\u60C5\u51B5\uFF1A\u6700\u8FD1 20 \u6761\u6309\u65B0\u53D1\u5E03\u6392\u5E8F\u641C\u7D22\u7ED3\u679C",loading:f||g||A,bodyStyle:{overflow:"auto",height:400},extra:(0,t.jsx)(n.Button,{type:"primary",loading:f||g,onClick:e=>{e.stopPropagation(),C()},children:"\u5237\u65B0"}),children:v&&k?(0,t.jsx)(n.Flex,{wrap:"wrap",gap:"small",children:k.result.map(e=>{let r=(0,w.trimTitle)(e.title),a=v.find(r=>r.href===e.bvid),i=1===e.hit_columns.length&&e.hit_columns.includes("author"),s="0"===(0,u.first)(e.duration.split(":")),l=T?.list.includes(e.bvid);return(0,t.jsxs)(n.Card,{hoverable:!a&&!l,className:m.Card,size:"small",cover:(0,t.jsxs)("div",{className:m.CoverContainer,children:[(0,t.jsxs)(n.Flex,{className:m.UploadedTagContainer,wrap:"wrap",children:[a?(0,t.jsx)(n.Tooltip,{title:`${a?.created_by.name} \u{4E8E} ${p()(a?.created_time).format("YYYY-MM-DD HH:mm:ss")} \u{6536}\u{5F55}\u{4E86}\u{6B64}\u{4F5C}\u{4E1A}`,children:(0,t.jsxs)(n.Tag,{color:"green",children:["\u5DF2\u6536\u5F55 by ",a.created_by.name]})}):l?null:(0,t.jsx)(n.Tag,{color:"#dc5950",children:"\u672A\u6536\u5F55"}),i||s?(0,t.jsx)(n.Tag,{color:"orange-inverse",children:"\u7591\u4F3C\u975E\u8352\u5178\u4F5C\u4E1A"}):null,l?(0,t.jsx)(n.Tag,{color:"gray",children:"\u65E0\u9700\u6536\u5F55"}):null]}),(0,t.jsx)("img",{className:m.CoverImage,referrerPolicy:"no-referrer",crossOrigin:"anonymous",alt:e.title,src:`${e.pic}@672w_378h_1c_!web-search-common-cover.webp`}),(0,t.jsx)("div",{className:m.Duration,children:e.duration})]}),onClick:r=>{r.stopPropagation(),!a&&o?.(e.bvid)},children:[(0,t.jsxs)(n.Flex,{className:m.Author,align:"center",children:[(0,t.jsx)(n.Typography.Text,{strong:!0,children:e.author}),(0,t.jsx)(n.Typography.Text,{className:m.Dot,type:"secondary",children:"\xb7"}),(0,t.jsx)(c.RelativeTimeText,{time:new Date(e.pubdate)})]}),(0,t.jsx)("div",{className:m.Title,children:(0,t.jsx)(n.Typography.Link,{href:`https://www.bilibili.com/video/${e.bvid}`,target:"_blank",title:e.title,ellipsis:!0,onClick:e=>e.stopPropagation(),children:(0,t.jsx)("span",{dangerouslySetInnerHTML:{__html:r}})})})]},e.bvid)})}):null}):null})},216746:function(e,r,a){"use strict";a.r(r),a.d(r,{RelativeTimeText:function(){return u}});var t=a("766791"),n=a("375748"),i=a("561904"),o=a.n(i),s=a("450348"),l=a.n(s),p=a("899916");let u=l().memo(e=>{let{time:r}=e;return(0,t.jsx)(n.Tooltip,{title:o()(r).format("YYYY-MM-DD HH:mm:ss"),children:(0,t.jsx)("span",{className:p.RelativeTimeText,children:o()(r).fromNow()})})},(e,r)=>e.time.valueOf()===r.time.valueOf())},620221:function(e,r,a){"use strict";a.r(r),a.d(r,{AurorianTallCard:function(){return d}});var t=a("766791"),n=a("450348"),i=a.n(n),o=a("67348"),s=a("375748"),l=a("826424"),p=a("441854"),u=a("306301"),b=a("618579"),c=a("439538"),w=a("408748");let d=i().memo(e=>{let{id:r,breakthrough:a,remark:i,onBreakthroughChange:d,onRemarkChange:m}=e,[{auroriansMap:h}]=(0,o.useModel)(c.AuroriansModel),f=(0,n.useMemo)(()=>h[r],[h,r]);return(0,t.jsxs)(s.Flex,{vertical:!0,align:"center",gap:8,children:[(0,t.jsx)("div",{className:p.AdaptiveContainer,children:(0,t.jsx)(w.AdaptiveAurorianCard,{readOnly:!0,aurorianId:r,remark:i})}),"number"==typeof a&&f?.rarity?(0,t.jsx)(s.Rate,{className:p.BreakThrough,value:a,count:f.rarity,onChange:d,tooltips:(0,u.getDefaultTooltips)(f.rarity)}):null,(0,t.jsx)(s.Switch,{checkedChildren:"\u53EF\u66FF\u6362",unCheckedChildren:"\u4E0D\u53EF\u66FF\u6362",onChange:e=>{m?.(b.normalizeRemark(l.produce(i??{},r=>{e?r.replace={type:"any",any:"All"}:delete r.replace})))}})]})})},270081:function(e,r,a){"use strict";a.r(r),a.d(r,{CopilotnSelector:function(){return c}});var t=a("766791"),n=a("67348"),i=a("375748"),o=a("667227"),s=a("826424"),l=a("794017"),p=a("672430"),u=a("439538"),b=a("620221");let c=e=>{let{value:r,onChange:a}=e,[{auroriansOptions:c,auroriansMap:w}]=(0,n.useModel)(u.AuroriansModel),d=r?.map(e=>e.aurorian_id);return(0,t.jsxs)(i.Flex,{vertical:!0,gap:8,children:[(0,t.jsx)(i.Select,{mode:"multiple",options:c,placeholder:"\u652F\u6301\u6309\u62FC\u97F3\u641C\u7D22, \u6BD4\u5982 ad \u53EF\u4EE5\u641C\u5230 \u5B89\u987F",showSearch:!0,allowClear:!1,value:r?.map(e=>e.aurorian_id),filterOption:u.filterAuroriansOption,onChange:e=>{let t=(0,o.intersection)(d,e),n=r?.filter(e=>t.includes(e.aurorian_id));a?.(e.slice(0,5).map(e=>{let r=n?.find(r=>r.aurorian_id===e);if(r)return{...r};let a=w[e];return{aurorian_id:e,breakthrough:p.getDefaultBreakthrough(a.rarity)}}))}}),(0,t.jsx)(i.Flex,{className:l.AuroriansTeam,wrap:"wrap",gap:16,children:r?.map((e,n)=>{let{aurorian_id:i,breakthrough:o,remark:l}=e;return t.jsx(b.AurorianTallCard,{id:i,breakthrough:o,remark:l,onBreakthroughChange:e=>{a?.(s.produce(r,r=>{r&&(r[n].breakthrough=e)}))},onRemarkChange:e=>{a?.(s.produce(r,r=>{r&&(r[n].remark=e)}))}},i)})})]})}},533018:function(e,r,a){"use strict";a.r(r),a.d(r,{VideoIframe:function(){return i}});var t=a("766791"),n=a("450348");let i=a.n(n)().memo(e=>{let{bvid:r}=e,a=(0,n.useMemo)(()=>{if("string"==typeof r){let e=new URL("https://player.bilibili.com/player.html");return e.searchParams.append("bvid",r),e.href}},[r]);return a?(0,t.jsx)("iframe",{src:a,scrolling:"no",frameBorder:"no",style:{border:0,width:700,height:420}}):null})},145739:function(e,r,a){"use strict";a.r(r),a.d(r,{UploadForm:function(){return T}});var t=a("766791"),n=a("928958"),i=a("67348"),o=a("561904"),s=a.n(o),l=a("375748"),p=a("450348"),u=a("132802"),b=a.n(u),c=a("763615"),w=a("711248"),d=a("270081"),m=a("903621"),h=a("292365"),f=a("533018"),g=a("714511"),y=a("575066"),x=a("651031"),v=a("980674"),k=a("779079"),C=a("393717"),_=a("966785"),j=a("386025");let T=()=>{let[{termsOptions:e,latestTerm:r}]=(0,i.useModel)(_.TermsModel),[{isLogin:a}]=(0,i.useModel)(j.FeishuModel),{videoInfo:o,loadingVideoInfo:u,getVideoInfo:T,setVideoInfo:A}=(0,h.useVideoInfo)(),{loadingCheckVideoExist:M,check:S}=(0,x.useCheckVideoExist)(),{loadingPostCopilot:z,postCopilotAsync:R}=(0,v.usePostCopilot)(),[F]=n.ProForm.useForm(),B=(0,p.useMemo)(()=>{let e={source_type:c.CopilotSourceType.Bilibili};return r?.term_id&&(e.term_id=r.term_id),e},[r?.term_id]),P=(0,w.useLatestVideoCardRef)();return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(w.LatestVideoCard,{currentTermId:F.getFieldValue((0,k.ensureKey)("term_id")),ref:P,onClickNewCard:e=>{F.setFieldValue((0,k.ensureKey)("href"),e)}}),(0,t.jsx)(l.Card,{children:(0,t.jsxs)(n.ProForm,{form:F,initialValues:B,submitter:{submitButtonProps:{loading:M||z},render:(e,r)=>(0,t.jsx)(n.FooterToolbar,{className:m.FootBar,children:r}),searchConfig:{submitText:M?"\u6821\u9A8C\u91CD\u590D\u4E2D":z?"\u63D0\u4EA4\u4E2D":"\u63D0\u4EA4\u4F5C\u4E1A"}},onFinish:async e=>{let r={...e,copilot_id:(0,C.getCopilotId)(e)};console.log("\u5F00\u59CB\u63D0\u4EA4",r);try{let e=await c.CopilotNextSchema.omit({created_by:!0,created_time:!0}).parseAsync(r),a=await R(e);a?.record?.record_id?(l.notification.success({message:`\u{9192}\u{5C71}\u{5C0F}\u{72D7}\u{5DF2}\u{7ECF}\u{6210}\u{529F}\u{5E2E}\u{60A8}\u{6DFB}\u{52A0}\u{4E86} ${a?.record?.fields?.author_name} \u{7684}\u{4E00}\u{4EFD}\u{4F5C}\u{4E1A}, record_id \u{4E3A} ${a?.record?.record_id}`}),F.resetFields(),A(void 0),P.current?.refresh()):(l.notification.error({message:`\u{6CA1}\u{6709}\u{4E0A}\u{4F20}\u{6210}\u{529F} ${JSON.stringify(a,null,2)}`}),console.log("upload failed",a,e))}catch(e){l.notification.error({message:`\u{89E3}\u{6790}\u{8868}\u{5355}\u{5931}\u{8D25} ${JSON.stringify(e,null,2)}`}),console.error("\u89E3\u6790\u5931\u8D25",e)}},children:[(0,t.jsxs)(n.ProForm.Group,{children:[(0,t.jsx)(n.ProFormSelect,{name:(0,k.ensureKey)("term_id"),label:"\u8352\u5178\u671F\u6570",options:e,rules:[{required:!0}],width:"sm",showSearch:!1}),(0,t.jsx)(n.ProFormRadio.Group,{name:(0,k.ensureKey)("source_type"),label:"\u6295\u7A3F\u5E73\u53F0",radioType:"button",options:(0,p.useMemo)(()=>[{label:"\u54D4\u54E9\u54D4\u54E9",value:c.CopilotSourceType.Bilibili},{label:"Youtube",value:c.CopilotSourceType.Youtube,disabled:!0}],[]),rules:[{required:!0}]})]}),(0,t.jsxs)(n.ProForm.Group,{children:[(0,t.jsx)(n.ProFormDependency,{name:[(0,k.ensureKey)("term_id")],children:e=>{let{term_id:r}=e;return(0,t.jsx)(n.ProFormText,{name:(0,k.ensureKey)("href"),label:"BV\u53F7\u6216B\u7AD9\u89C6\u9891\u94FE\u63A5",placeholder:"BVxxxxxxxxxx \u6216 https://www.bilibili.com/video/BVxxxxxxxxxx/",validateTrigger:"onBlur",width:"lg",fieldProps:{onChange(e){let r=e.target.value;(0,y.trimBV)(F,r)}},rules:[{required:!0},{pattern:/^BV.+$/,message:"BV\u53F7\u683C\u5F0F\u4E0D\u6B63\u786E"},{async validator(e,a){if("string"==typeof a&&a.startsWith("BV")){let e=await S({href:a,termId:r});if((e?.noExist||e?.target)&&e?.target){let r=`${e?.target?.fields?.creator?.name} \u{5DF2}\u{7ECF}\u{5728} ${s()(e?.target?.fields?.insert_db_time).format("YYYY-MM-DD HH:mm:ss")} \u{6DFB}\u{52A0}\u{4E86}\u{6B64}\u{4F5C}\u{4E1A}`;throw l.notification.error({message:`${r}. \u{649E}\u{8F66}\u{4E86}~ \u{8BF7}\u{66F4}\u{6362}\u{4F5C}\u{4E1A}\u{6536}\u{5F55}`}),Error(r)}}}}],extra:"\u5C0F\u63D0\u793A\uFF1A\u70B9\u51FB\u4E0A\u65B9\u672A\u6536\u5F55\u7684\u89C6\u9891\u5361\u7247\uFF0C\u80FD\u5FEB\u901F\u586B\u5165 BV \u53F7"})}}),(0,t.jsx)(n.ProForm.Item,{label:" ",children:(0,t.jsx)(n.ProFormDependency,{name:[(0,k.ensureKey)("href")],children:e=>{let{href:r}=e;return(0,t.jsx)(l.Button,{disabled:!a||!("string"==typeof r&&r.startsWith("BV")),type:"primary",loading:u,onClick:async e=>{e.stopPropagation();let a=await T(r);if(a){let{title:e,desc:r,owner:t,pubdate:n}=a;F.setFieldsValue({title:e,description:"-"===r?void 0:r,author_id:String(t.mid),author_name:t.name,upload_time:n.valueOf()})}},children:"\u8BFB\u53D6\u54D4\u54E9\u54D4\u54E9\u6295\u7A3F\u89C6\u9891\u4FE1\u606F"})}})})]}),(0,t.jsx)(f.VideoIframe,{bvid:o?.bvid}),(0,t.jsx)(n.ProForm.Item,{label:"\u5149\u7075\u9635\u5BB9",name:(0,k.ensureKey)("aurorian_requirements"),rules:g.AURORIAN_SUMMARIES_RULES,children:(0,t.jsx)(d.CopilotnSelector,{})}),(0,t.jsx)(n.ProFormDigit,{label:"\u7ED3\u7B97\u5206\u6570",name:(0,k.ensureKey)("score"),validateTrigger:"onBlur",rules:g.SCORE_RULES,min:0,fieldProps:{formatter:e=>b()(e).format("0,0"),parser:e=>b()(e).value()??0,size:"large"},extra:(0,t.jsx)(n.ProFormDependency,{name:[(0,k.ensureKey)("score")],children:e=>{let{score:r}=e;if(P.current?.latestMaxAndMinScoreCopilots?.maxScoreCopilot&&P.current?.latestMaxAndMinScoreCopilots.minScoreCopilot){if(r>=2*P.current.latestMaxAndMinScoreCopilots.maxScoreCopilot.score)return(0,t.jsx)(l.Typography.Text,{type:"warning",children:"\u5F55\u5165\u7684\u5206\u6570\u8D85\u8FC7\u6700\u8FD1\u4F5C\u4E1A\u6700\u9AD8\u5206\u4E24\u500D\uFF0C\u8BF7\u518D\u6B21\u786E\u8BA4\u662F\u5426\u5F55\u5165\u6B63\u786E"});if(r<=.5*P.current.latestMaxAndMinScoreCopilots.minScoreCopilot.score)return(0,t.jsx)(l.Typography.Text,{type:"warning",children:"\u5F55\u5165\u7684\u5206\u6570\u4F4E\u4E8E\u6700\u8FD1\u4F5C\u4E1A\u6700\u4F4E\u5206\u7684\u4E00\u534A\uFF0C\u8BF7\u518D\u6B21\u786E\u8BA4\u662F\u5426\u5F55\u5165\u6B63\u786E"})}return null}})}),(0,t.jsx)(n.ProFormText,{label:"\u89C6\u9891\u6807\u9898",name:(0,k.ensureKey)("title"),rules:[{required:!0}]}),(0,t.jsxs)(n.ProForm.Group,{children:[(0,t.jsx)(n.ProFormDateTimePicker,{label:"\u89C6\u9891\u53D1\u5E03\u65F6\u95F4",name:(0,k.ensureKey)("upload_time"),rules:[{required:!0}]}),(0,t.jsx)(n.ProFormText,{label:"\u4F5C\u4E1A\u4F5C\u8005",name:(0,k.ensureKey)("author_name"),rules:[{required:!0}]}),(0,t.jsx)(n.ProFormText,{label:"\u4F5C\u4E1A\u4F5C\u8005\u7A7A\u95F4 ID",name:(0,k.ensureKey)("author_id"),rules:[{required:!0}],placeholder:`space.bilibili.com/[\u{8FD9}\u{4E00}\u{6BB5}\u{6570}\u{5B57}\u{586B}\u{8FDB}\u{6765}]`,width:"md"}),(0,t.jsx)(n.ProFormTextArea,{label:"\u89C6\u9891\u63CF\u8FF0",name:"description",width:"xl"})]})]})})]})}},294831:function(e,r,a){"use strict";a.r(r),a.d(r,{default:function(){return l}});var t=a("766791"),n=a("928958"),i=a("375748"),o=a("145739"),s=a("617273"),l=()=>(0,t.jsx)(n.PageContainer,{title:"\u4F5C\u4E1A\u6536\u5F55\uFF08\u5185\u90E8\u7248\uFF09",content:"\u5185\u90E8\u7684\u6536\u5F55\u540C\u5B66\u53EF\u4EE5\u4F7F\u7528\u6B64\u9875\u9762\u5FEB\u901F\u4E0A\u4F20\u4F5C\u4E1A\uFF0C\u4E4B\u540E\u4F1A\u518D\u63D0\u4F9B Chrome \u63D2\u4EF6\u63D0\u9AD8\u6548\u7387\uFF08\u6BD4\u5FC3\uFF09",children:(0,t.jsxs)(i.Flex,{vertical:!0,gap:"middle",children:[(0,t.jsx)(s.LarkLoginCard,{}),(0,t.jsx)(o.UploadForm,{})]})})},617273:function(e,r,a){"use strict";a.r(r),a.d(r,{LarkLoginCard:function(){return w}});var t=a("766791"),n=a("551895"),i=a("375748"),o=a("450348"),s=a("260740"),l=a("67348"),p=a("473569"),u=a("605442"),b=a("885561"),c=a("386025");let w=()=>{let e=(0,o.useMemo)(()=>`${window.location.origin}/#${u.RoutePath.Upload}/`,[]),[r,a]=(0,o.useState)(),w=(0,n.useLocation)();(0,o.useEffect)(()=>{let e=w.search.slice(1).split("&").find(e=>e.startsWith("code="))?.replace("code=","");e&&a(e)},[w.search]);let[,{setProfile:d}]=(0,l.useModel)(c.FeishuModel),{data:m,loading:h}=(0,s.useRequest)(async()=>{if(r){await (0,b.saveAuthCallback)({code:r}),a(void 0);return}return(0,b.getFeishuProfile)()},{refreshDeps:[r],onSuccess(e){d(e)}}),f=(0,o.useMemo)(()=>{let r=new URL("https://open.feishu.cn/open-apis/authen/v1/authorize");return r.searchParams.append("app_id",p.UPLOAD_APP_ID),r.searchParams.append("redirect_uri",e),r.searchParams.append("scope",p.LARK_SCOPE),r.href},[]);return(0,t.jsx)(i.Card,{loading:h,children:m?(0,t.jsx)(i.Card.Meta,{avatar:(0,t.jsx)(i.Avatar,{src:m.avatar_url}),title:m.name,description:"\u6B22\u8FCE\u56DE\u6765~ \u60A8\u5DF2\u6388\u6743\uFF0C\u53EF\u4EE5\u5F00\u59CB\u5DE5\u4F5C\u5566"}):(0,t.jsxs)(i.Space,{children:[(0,t.jsx)(i.Typography.Text,{children:"\u60A8\u597D\uFF0C\u6211\u662F\u4F5C\u4E1A\u63D0\u4EA4\u9192\u5C71\u5C0F\u72D7\uFF0C\u6211\u9700\u8981\u60A8\u98DE\u4E66\u6388\u6743\u624D\u80FD\u5DE5\u4F5C"}),(0,t.jsx)(n.Link,{target:"_self",to:f,children:(0,t.jsx)(i.Button,{type:"primary",children:"\u53BB\u98DE\u4E66\u6388\u6743"})})]})})}},791520:function(e,r,a){"use strict";a.r(r),a.d(r,{useLazyImage:function(){return n}});var t=a("450348");function n(e){let r=(0,t.useRef)(null);return(0,t.useEffect)(()=>{(async()=>{if(e&&r.current){let t=await a("877107")(`@/assets/avatars/${e}.webp`.replace("@/assets/avatars/","./"));r.current.style.backgroundImage=`url(${t.default})`}})()},[e]),{containerRef:r}}},353151:function(e,r,a){"use strict";a.r(r),a.d(r,{SearchVideoResultSchema:function(){return i}});var t=a("763615");let n=t.z.object({type:t.z.literal("video"),author:t.z.string(),pic:t.z.string(),bvid:t.z.string().startsWith("BV"),title:t.z.string(),pubdate:t.z.number().transform(e=>1e3*e),hit_columns:t.z.array(t.z.enum(["title","tag","author","description"])),duration:t.z.string()}),i=t.z.object({seid:t.z.string(),page:t.z.number(),pagesize:t.z.number(),numResults:t.z.number(),numPages:t.z.number(),result:t.z.array(n)})},376361:function(e,r,a){"use strict";a.r(r),a.d(r,{SimpleLatestCopilotsResultSchema:function(){return i}});var t=a("763615");let n=t.z.object({created_time:t.z.coerce.date(),created_by:t.z.preprocess(e=>"string"==typeof e?JSON.parse(e):e,t.CopilotNextUserSchema),copilot_id:t.z.string(),score:t.z.coerce.number(),term_id:t.z.string(),href:t.z.string()}),i=t.z.array(n)},126254:function(e,r,a){"use strict";a.r(r),a.d(r,{useLatestVideo:function(){return l}});var t=a("260740"),n=a("450348"),i=a("353151"),o=a("376361"),s=a("885561");function l(){let{loading:e,runAsync:r,data:a,refresh:l}=(0,t.useRequest)(async()=>{try{let e=await (0,s.getLatestVideo)();return i.SearchVideoResultSchema.parse(e)}catch(e){console.log("parse error",e)}},{manual:!0}),{data:p,loading:u,runAsync:b,refresh:c}=(0,t.useRequest)(async()=>{try{let e=await (0,s.getLatestCopilots)({pageSize:30});return o.SimpleLatestCopilotsResultSchema.parse(e)}catch(e){console.log("parse error",e)}},{manual:!0});return{latestVideos:a,loadingLatestVideos:e,getLatestVideosAsync:r,latestCopilots:p,loadingLatestCopilots:u,getLatestCopilotsAsync:b,refresh:(0,n.useCallback)(()=>{c(),l()},[])}}},306301:function(e,r,a){"use strict";a.r(r),a.d(r,{getDefaultTooltips:function(){return t}});let t=(0,a("667227").memoize)(e=>{switch(e){case 6:return["\u96F6","\u96F6","\u4E00","\u4E00","\u4E00","\u6EE1"].map(e=>`${e}\u{7834}`);case 5:return["\u96F6","\u4E00","\u4E00","\u4E00","\u6EE1"].map(e=>`${e}\u{7834}`);case 4:return["\u96F6","\u96F6","\u96F6","\u6EE1"].map(e=>`${e}\u{7834}`);case 3:return["\u96F6","\u96F6","\u6EE1"].map(e=>`${e}\u{7834}`);case 2:return["\u96F6","\u6EE1"].map(e=>`${e}\u{7834}`);case 1:return["\u6EE1"].map(e=>`${e}\u{7834}`);default:return[]}})},618579:function(e,r,a){"use strict";function t(e){if(!e||0!==Object.keys(e).length)return e}a.r(r),a.d(r,{normalizeRemark:function(){return t}})},672430:function(e,r,a){"use strict";a.r(r),a.d(r,{getDefaultBreakthrough:function(){return t}});let t=(0,a("667227").memoize)(e=>{switch(e){case 6:case 2:return 2;case 5:case 1:return 1;case 4:return 4;case 3:return 3;default:return 0}})},651031:function(e,r,a){"use strict";a.r(r),a.d(r,{useCheckVideoExist:function(){return i}});var t=a("260740"),n=a("885561");function i(){let{loading:e,runAsync:r}=(0,t.useRequest)(async e=>{let{href:r,termId:a}=e;return(0,n.checkVideoExist)({href:r,termId:a})},{manual:!0});return{loadingCheckVideoExist:e,check:r}}},980674:function(e,r,a){"use strict";a.r(r),a.d(r,{usePostCopilot:function(){return o}});var t=a("260740"),n=a("763615"),i=a("885561");function o(){let{loading:e,runAsync:r}=(0,t.useRequest)(async e=>{let r=(0,n.toFeishuCopilotWithoutCreatedInfo)(e);return await (0,i.postCopilot)(r)},{manual:!0});return{loadingPostCopilot:e,postCopilotAsync:r}}},292365:function(e,r,a){"use strict";a.r(r),a.d(r,{useVideoInfo:function(){return i}});var t=a("260740"),n=a("885561");function i(){let{data:e,loading:r,runAsync:a,mutate:i}=(0,t.useRequest)(async e=>await (0,n.getVideoInfo)(e),{manual:!0});return{videoInfo:e,loadingVideoInfo:r,getVideoInfo:a,setVideoInfo:i}}},779079:function(e,r,a){"use strict";function t(e){return e}a.r(r),a.d(r,{ensureKey:function(){return t}})},393717:function(e,r,a){"use strict";function t(e){let{href:r,aurorian_requirements:a,term_id:t}=e;if(r&&a&&t){let e=new URL(`https://example.com/${r}`);return`${t}_${e.pathname.slice(1)}_${a[0].aurorian_id}_${a[4].aurorian_id}`}}a.r(r),a.d(r,{getCopilotId:function(){return t}})},575066:function(e,r,a){"use strict";function t(e,r){if("string"==typeof r&&(r.startsWith("https://")||r.startsWith("http://"))){let a=/\/(BV[^/]+)\/?/.exec(new URL(r).pathname)?.[1];"string"==typeof a&&a.startsWith("BV")&&e?.setFieldValue("bv",a)}}a.r(r),a.d(r,{trimBV:function(){return t}})},714511:function(e,r,a){"use strict";a.r(r),a.d(r,{AURORIAN_SUMMARIES_RULES:function(){return t},SCORE_RULES:function(){return n}});let t=[{async validator(e,r){if(Array.isArray(r)&&5===r.length);else throw Error("\u5149\u7075\u6570\u91CF\u5FC5\u987B\u6EE1\u8DB3 5 \u4E2A")}},{required:!0}],n=[{required:!0},{async validator(e,r){if("number"==typeof r&&r.toString().endsWith("0000"))throw Error("\u4E0D\u80FD\u586B\u5199\u7C97\u7565\u5206\u6570, \u8352\u5178\u4F5C\u4E1A\u5206\u6570\u5FC5\u987B\u7CBE\u786E\u5230\u4E2A\u4F4D, \u8BF7\u62D6\u52A8\u89C6\u9891\u8FDB\u5EA6\u6761\u5230\u6700\u540E\u67E5\u770B\u5177\u4F53\u5206\u6570")}},{async validator(e,r){if("number"==typeof r&&Number.isInteger(r)&&r>0);else throw Error("\u5206\u6570\u5FC5\u987B\u662F\u6B63\u6574\u6570");if(r>=1e8)throw Error("\u5206\u6570\u5927\u4E8E\u4E00\u4EBF\u5206\u4E86\uFF0C\u4F60\u8981\u4E0D\u518D\u770B\u770B\u6709\u6CA1\u6709\u586B\u5BF9\uFF1F");if(r<=1e5)throw Error("\u5206\u6570\u5C0F\u4E8E\u5341\u4E07\u5206\uFF0C\u4F60\u8981\u4E0D\u8981\u518D\u770B\u770B\u6709\u6CA1\u6709\u586B\u5BF9\uFF1F")}}]},870233:function(e,r,a){"use strict";function t(e){return e.replace("[\u767D\u591C\u6781\u5149]","").replace("\u3010\u767D\u591C\u6781\u5149\u3011","").replace("\u767D\u591C\u6781\u5149","").replace("\u8352\u5178","").replace("[hidden]","")}a.r(r),a.d(r,{trimTitle:function(){return t}})},386025:function(e,r,a){"use strict";a.r(r),a.d(r,{FeishuModel:function(){return t}});let t=(0,a("67348").model)("feishu").define({state:{profile:void 0},computed:{isLogin:e=>"string"==typeof e.profile?.name&&"string"==typeof e.profile?.open_id},actions:{}})},734513:function(e,r,a){"use strict";a.r(r),a.d(r,{getNormalizeBreakthroughByRarity:function(){return n},withoutExclude:function(){return i}});var t=a("826424");function n(e,r){switch(r){case 6:return[0,0,3,3,3,6].at(e-1);case 5:return[0,2,2,2,5].at(e-1);case 4:return[0,0,0,4].at(e-1);case 3:return[0,0,3].at(e-1);case 2:return[0,2].at(e-1);case 1:return[1].at(e-1);default:return 0}}function i(e,r){return r?(0,t.produce)(e,e=>{for(let{excludeBreakthroughOnly:a,excludeBreakthrough:t,aurorianId:n}of r)a?"number"==typeof t&&t>=1&&(e[n].breakthrough=Math.max(t-1,0)):delete e[n]}):e}},473569:function(e,r,a){"use strict";a.r(r),a.d(r,{UPLOAD_APP_ID:function(){return t},LARK_SCOPE:function(){return n}});let t="cli_a5fd9725777a100b",n="bitable:app"}}]);
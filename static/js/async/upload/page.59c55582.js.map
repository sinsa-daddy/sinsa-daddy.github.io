{"version":3,"file":"static/js/async/upload/page.59c55582.js","sources":["./src/components/AdaptiveAurorianCard/components/asc/index.tsx","./src/components/AdaptiveAurorianCard/index.tsx","./src/components/LatestVideoCard/index.tsx","./src/components/RelativeTimeText/index.tsx","./src/components/UploadForm/AurorianTallCard/index.tsx","./src/components/UploadForm/CopilotSelector/index.tsx","./src/components/UploadForm/VideoIframe/index.tsx","./src/components/UploadForm/index.tsx","./src/routes/upload/page.tsx","./src/views/UploadView/LarkLoginCard/index.tsx","./src/components/AdaptiveAurorianCard/hooks/use-lazy-image.ts","./src/components/LatestVideoCard/schemas/SearchVideo.ts","./src/components/LatestVideoCard/schemas/SimpleLatestCopilot.ts","./src/components/LatestVideoCard/useLatestVideo.ts","./src/components/UploadForm/AurorianTallCard/utils/getDefaultBreakthrough.ts","./src/components/UploadForm/AurorianTallCard/utils/normalizeRemark.ts","./src/components/UploadForm/CopilotSelector/utils/getDefaultBreakthrough.ts","./src/components/UploadForm/hooks/useCheckVideoExist.ts","./src/components/UploadForm/hooks/usePostCopilot.ts","./src/components/UploadForm/hooks/useVideoInfo.ts","./src/components/UploadForm/utils/ensure.ts","./src/components/UploadForm/utils/get-copilot-id.ts","./src/components/UploadForm/utils/preprocess.ts","./src/components/UploadForm/utils/rules.ts","./src/components/utils.ts","./src/models/feishu.ts","./src/services/solution-algorithm.ts","./src/views/SolutionView/QueryForm/utils.ts","./src/views/SolutionView/context.ts","./src/views/SolutionView/hooks/use-request-solution.ts","./src/views/SolutionView/hooks/use-trigger-form-action/constants.ts","./src/views/SolutionView/hooks/use-trigger-form-action/index.ts","./src/views/SolutionView/utils/without-exclude.ts","./src/views/UploadView/LarkLoginCard/constants.ts"],"sourcesContent":["import clsx from 'clsx';\nimport React from 'react';\nimport styles from './styles.module.less';\n\ninterface AscProps {\n  rairty: number;\n  asc: number;\n}\n\nexport const IconAsc = React.memo<AscProps>(\n  ({ rairty }) => {\n    return (\n      <div\n        className={clsx(\n          styles.Asc,\n          rairty >= 4 ? styles.Icon3of3 : styles.Icon2of2,\n        )}\n      ></div>\n    );\n  },\n  (a, b) => a.asc === b.asc && a.rairty === b.rairty,\n);\n","/* eslint-disable no-nested-ternary */\nimport React, { useMemo } from 'react';\nimport { useModel } from '@modern-js/runtime/model';\nimport type {\n  AurorianRequirementRemarkType,\n  AurorianNextType,\n} from '@sinsa/schema';\nimport clsx from 'clsx';\nimport type { MenuProps } from 'antd';\nimport { ConfigProvider, Flex, Rate, Tag, Dropdown } from 'antd';\nimport { useBreakpoint } from '@ant-design/pro-components';\nimport { m } from 'framer-motion';\nimport styles from './styles.module.less';\nimport { useLazyImage } from './hooks/use-lazy-image';\nimport {\n  AdaptiveAurorianCardMenuKey,\n  ClassURLMapper,\n  ElementURLMapper,\n} from './constants';\nimport { IconAsc } from './components/asc';\nimport { AuroriansModel } from '@/models/aurorians';\nimport { useSolutionResultContext } from '@/views/SolutionView/context';\nimport { QueryFormAction } from '@/views/SolutionView/hooks/use-trigger-form-action/constants';\n\ninterface AdaptiveArurorianCardProps {\n  aurorianId: string;\n  breakthrough?: number;\n  remark?: AurorianRequirementRemarkType;\n  readOnly?: boolean;\n  mini?: boolean;\n}\n\nexport const AdaptiveAurorianCard = React.memo<AdaptiveArurorianCardProps>(\n  ({ aurorianId: name, breakthrough, remark, readOnly, mini }) => {\n    const [{ auroriansMap }] = useModel(AuroriansModel);\n    const aurorian = useMemo(\n      () => auroriansMap[name] as AurorianNextType | undefined,\n      [auroriansMap, name],\n    );\n    const { containerRef } = useLazyImage(aurorian?.aurorian_id);\n\n    const screen = useBreakpoint();\n    const rateTheme = useMemo(() => {\n      let starSize = 10;\n      switch (screen) {\n        case 'xs':\n          starSize = 10;\n          break;\n        case 'sm':\n          starSize = 12;\n          break;\n        default:\n          starSize = 13;\n          break;\n      }\n      return {\n        components: {\n          Rate: {\n            starBg: 'white',\n            starSize,\n          },\n        },\n      };\n    }, [screen]);\n\n    const items: MenuProps['items'] = useMemo(\n      () =>\n        [\n          {\n            label: `排除${aurorian?.cn_name}`,\n            key: AdaptiveAurorianCardMenuKey.IgnoreAurorian,\n          },\n          typeof breakthrough === 'number'\n            ? {\n                label: `仅排除此突破数的${aurorian?.cn_name}`,\n                key: AdaptiveAurorianCardMenuKey.IgnoreBreakthrough,\n              }\n            : null,\n          {\n            label: `替换${aurorian?.cn_name}`,\n            key: AdaptiveAurorianCardMenuKey.ReplaceAurorian,\n          },\n        ].filter(_ => _),\n      [aurorian?.cn_name, breakthrough],\n    );\n\n    const { triggerFormAction } = useSolutionResultContext();\n\n    return (\n      <Dropdown\n        disabled={readOnly}\n        trigger={['click']}\n        getPopupContainer={() => document.body}\n        menu={{\n          items,\n          onClick: ({ key }) => {\n            if (!aurorian?.aurorian_id) {\n              return;\n            }\n\n            switch (key) {\n              case AdaptiveAurorianCardMenuKey.IgnoreBreakthrough:\n                if (typeof breakthrough === 'number') {\n                  triggerFormAction({\n                    type: QueryFormAction.IgnoreAurorianBreakthroughOnly,\n                    aurorian,\n                    breakthrough,\n                  });\n                }\n\n                break;\n              case AdaptiveAurorianCardMenuKey.IgnoreAurorian:\n                triggerFormAction({\n                  type: QueryFormAction.IgnoreAurorian,\n                  aurorian,\n                });\n                break;\n              default:\n                break;\n            }\n          },\n        }}\n      >\n        <m.div\n          ref={containerRef}\n          className={clsx(\n            styles.AdaptiveAurorianCard,\n            styles.BackgroundImage,\n            readOnly && styles.Disabled,\n            mini ? styles.MiniSize : styles.LargeSize,\n          )}\n          whileHover={readOnly ? undefined : { opacity: 0.6 }}\n          whileTap={readOnly ? undefined : { opacity: 0.2 }}\n        >\n          {aurorian ? (\n            <>\n              <Flex vertical className={styles.NameContainer}>\n                <span>{aurorian?.cn_name}</span>\n                {typeof breakthrough === 'number' && aurorian?.rarity ? (\n                  <ConfigProvider theme={rateTheme}>\n                    <Rate\n                      className={styles.BreakThrough}\n                      disabled\n                      value={breakthrough}\n                      count={aurorian.rarity}\n                    />\n                  </ConfigProvider>\n                ) : null}\n              </Flex>\n              <Flex align=\"center\" className={styles.MetaContainer}>\n                <img\n                  className={styles.MetaClass}\n                  alt={aurorian.profession}\n                  src={ClassURLMapper[aurorian.profession]}\n                />\n                <Flex align=\"center\" vertical={mini}>\n                  <img\n                    className={styles.MetaFirstAttribute}\n                    alt={aurorian.primary_element}\n                    src={ElementURLMapper[aurorian.primary_element]}\n                  />\n                  {aurorian.secondary_element ? (\n                    <img\n                      className={styles.MetaSecondAttribute}\n                      alt={aurorian.secondary_element}\n                      src={ElementURLMapper[aurorian.secondary_element]}\n                    />\n                  ) : null}\n                </Flex>\n              </Flex>\n            </>\n          ) : null}\n          {remark?.replace?.type === 'any' && remark?.replace?.any === 'All' ? (\n            <Tag className={styles.ReplaceableTag} color={'#dc5950'}>\n              可替\n            </Tag>\n          ) : null}\n          {remark?.replace?.type === 'any' && remark?.replace?.any === 'DPS' ? (\n            <Tag className={styles.ReplaceableTag} color={'#dc5950'}>\n              可替输出\n            </Tag>\n          ) : null}\n          {remark?.replace?.type === 'any' ? null : aurorian?.rarity &&\n            remark?.level?.asc === 3 &&\n            typeof remark?.level?.lv === 'number' ? (\n            <Tag className={styles.RemarkContainer} color={'rgba(0,0,0,0.4)'}>\n              <Flex align=\"center\" gap={2}>\n                <IconAsc rairty={aurorian.rarity} asc={3} />\n                <span className={styles.num}>{remark?.level?.lv}</span>\n              </Flex>\n            </Tag>\n          ) : null}\n        </m.div>\n      </Dropdown>\n    );\n  },\n);\n","/* eslint-disable no-nested-ternary */\n/* eslint-disable react/no-danger */\nimport { Button, Card, Flex, Tag, Tooltip, Typography } from 'antd';\nimport React, { useEffect, useImperativeHandle, useMemo, useRef } from 'react';\nimport { useModel } from '@modern-js/runtime/model';\nimport dayjs from 'dayjs';\nimport { first, maxBy, minBy } from 'lodash-es';\nimport { useRequest } from 'ahooks';\nimport { RelativeTimeText } from '../RelativeTimeText';\nimport { trimTitle } from '../utils';\nimport { useLatestVideo } from './useLatestVideo';\nimport styles from './styles.module.less';\nimport type { SimpleLatestCopilotType } from './schemas/SimpleLatestCopilot';\nimport { FeishuModel } from '@/models/feishu';\n\ninterface LatestVideoCardProps {\n  onClickNewCard?: (newBvid: string) => void;\n  currentTermId?: string;\n}\n\ninterface LatestVideoCardRef {\n  refresh: () => void;\n  latestMaxAndMinScoreCopilots: {\n    maxScoreCopilot: SimpleLatestCopilotType | undefined;\n    minScoreCopilot: SimpleLatestCopilotType | undefined;\n  };\n}\n\nexport function useLatestVideoCardRef() {\n  const ref = useRef<LatestVideoCardRef>(null);\n  return ref;\n}\n\nexport const LatestVideoCard = React.forwardRef<\n  LatestVideoCardRef,\n  LatestVideoCardProps\n>(({ onClickNewCard, currentTermId }, ref) => {\n  const {\n    loadingLatestCopilots,\n    loadingLatestVideos,\n    getLatestCopilotsAsync,\n    getLatestVideosAsync,\n    latestCopilots,\n    latestVideos,\n    refresh,\n  } = useLatestVideo();\n  const [{ isLogin }] = useModel(FeishuModel);\n\n  useEffect(() => {\n    if (isLogin) {\n      getLatestCopilotsAsync();\n      getLatestVideosAsync();\n    }\n  }, [isLogin]);\n\n  const latestMaxAndMinScoreCopilots = useMemo(() => {\n    const currentTermCopilots = latestCopilots?.filter(\n      c => c.term_id === currentTermId,\n    );\n    const maxScoreCopilot = maxBy(currentTermCopilots, c => c.score);\n    const minScoreCopilot = minBy(currentTermCopilots, c => c.score);\n\n    return {\n      maxScoreCopilot,\n      minScoreCopilot,\n    };\n  }, [latestCopilots, currentTermId]);\n\n  useImperativeHandle(\n    ref,\n    () => {\n      return {\n        refresh,\n        latestMaxAndMinScoreCopilots,\n      };\n    },\n    [refresh, latestMaxAndMinScoreCopilots],\n  );\n\n  const { data, loading: loadingDenyList } = useRequest(async () => {\n    const list = await import('./deny-list.json');\n\n    return {\n      list: Array.from(list),\n    };\n  }, {});\n\n  if (!isLogin) {\n    return null;\n  }\n\n  return (\n    <Card\n      title=\"B站视频最新收录情况：最近 20 条按新发布排序搜索结果\"\n      loading={loadingLatestCopilots || loadingLatestVideos || loadingDenyList}\n      bodyStyle={{ overflow: 'auto', height: 400 }}\n      extra={\n        <Button\n          type=\"primary\"\n          loading={loadingLatestCopilots || loadingLatestVideos}\n          onClick={e => {\n            e.stopPropagation();\n            refresh();\n          }}\n        >\n          刷新\n        </Button>\n      }\n    >\n      {latestCopilots && latestVideos ? (\n        <Flex wrap=\"wrap\" gap=\"small\">\n          {latestVideos.result.map(video => {\n            const displayTitle = trimTitle(video.title);\n\n            const copilotInfo = latestCopilots.find(c => c.href === video.bvid);\n\n            const onlyHitAuthor =\n              video.hit_columns.length === 1 &&\n              video.hit_columns.includes('author');\n\n            const tooShort = first(video.duration.split(':')) === '0';\n\n            const inDenyList = data?.list.includes(video.bvid);\n\n            return (\n              <Card\n                hoverable={!copilotInfo && !inDenyList}\n                className={styles.Card}\n                size=\"small\"\n                key={video.bvid}\n                cover={\n                  <div className={styles.CoverContainer}>\n                    <Flex className={styles.UploadedTagContainer} wrap=\"wrap\">\n                      {copilotInfo ? (\n                        <Tooltip\n                          title={`${copilotInfo?.created_by.name} 于 ${dayjs(\n                            copilotInfo?.created_time,\n                          ).format('YYYY-MM-DD HH:mm:ss')} 收录了此作业`}\n                        >\n                          <Tag color=\"green\">已收录</Tag>\n                        </Tooltip>\n                      ) : inDenyList ? null : (\n                        <Tag color={'#dc5950'}>未收录</Tag>\n                      )}\n                      {onlyHitAuthor || tooShort ? (\n                        <Tag color=\"orange-inverse\">疑似非荒典作业</Tag>\n                      ) : null}\n                      {inDenyList ? <Tag color=\"gray\">无需收录</Tag> : null}\n                    </Flex>\n                    <img\n                      className={styles.CoverImage}\n                      referrerPolicy=\"no-referrer\"\n                      crossOrigin=\"anonymous\"\n                      alt={video.title}\n                      src={`${video.pic}@672w_378h_1c_!web-search-common-cover.webp`}\n                    />\n                    <div className={styles.Duration}>{video.duration}</div>\n                  </div>\n                }\n                onClick={e => {\n                  e.stopPropagation();\n                  if (!copilotInfo) {\n                    onClickNewCard?.(video.bvid);\n                  }\n                }}\n              >\n                <Flex className={styles.Author} align=\"center\">\n                  <Typography.Text strong>{video.author}</Typography.Text>\n                  <Typography.Text className={styles.Dot} type=\"secondary\">\n                    ·\n                  </Typography.Text>\n                  <RelativeTimeText time={new Date(video.pubdate)} />\n                </Flex>\n                <div className={styles.Title}>\n                  <Typography.Link\n                    href={`https://www.bilibili.com/video/${video.bvid}`}\n                    target=\"_blank\"\n                    title={video.title}\n                    ellipsis={true}\n                    onClick={e => e.stopPropagation()}\n                  >\n                    <span dangerouslySetInnerHTML={{ __html: displayTitle }} />\n                  </Typography.Link>\n                </div>\n              </Card>\n            );\n          })}\n        </Flex>\n      ) : null}\n    </Card>\n  );\n});\n","import { Tooltip } from 'antd';\nimport dayjs from 'dayjs';\nimport React from 'react';\nimport styles from './styles.module.less';\n\ninterface RelativeTimeTextProps {\n  time: Date;\n}\n\nexport const RelativeTimeText = React.memo<RelativeTimeTextProps>(\n  ({ time }) => {\n    return (\n      <Tooltip title={dayjs(time).format('YYYY-MM-DD HH:mm:ss')}>\n        <span className={styles.RelativeTimeText}>{dayjs(time).fromNow()}</span>\n      </Tooltip>\n    );\n  },\n  (prev, cur) => prev.time.valueOf() === cur.time.valueOf(),\n);\n","import type React from 'react';\nimport { useMemo } from 'react';\nimport { useModel } from '@modern-js/runtime/model';\nimport { Flex, InputNumber, Radio, Rate, Slider, Space, Switch } from 'antd';\nimport type {\n  AurorianNextType,\n  AurorianRequirementRemarkType,\n} from '@sinsa/schema';\nimport { produce } from 'immer';\nimport styles from './styles.module.less';\nimport { getDefaultTooltips } from './utils/getDefaultBreakthrough';\nimport { normalizeRemark } from './utils/normalizeRemark';\nimport { AuroriansModel } from '@/models/aurorians';\nimport { AdaptiveAurorianCard } from '@/components/AdaptiveAurorianCard';\n\ninterface AurorianTallCardProps {\n  id: string;\n  breakthrough?: number;\n  remark?: AurorianRequirementRemarkType;\n  onBreakthroughChange?: (b: number) => void;\n  onRemarkChange?: (r: AurorianRequirementRemarkType | undefined) => void;\n}\n\nconst REPLCE_OPTIONS = [\n  { label: '可替', value: 'All' },\n  { label: '可替输出', value: 'DPS' },\n];\n\nconst ASC_OPTIONS = [\n  { label: '觉醒三', value: 3 },\n  { label: '觉醒二', value: 2 },\n  { label: '觉醒一', value: 1 },\n  { label: '未觉醒', value: 0 },\n];\n\nconst MARKS = {\n  1: '1',\n  10: '10',\n  20: '20',\n  30: '30',\n  40: '40',\n  60: '60',\n  80: '80',\n};\n\nexport const AurorianTallCard: React.FC<AurorianTallCardProps> = ({\n  id: name,\n  breakthrough,\n  remark,\n  onBreakthroughChange,\n  onRemarkChange,\n}) => {\n  const [{ auroriansMap }] = useModel(AuroriansModel);\n  const aurorian = useMemo(\n    () => auroriansMap[name] as AurorianNextType | undefined,\n    [auroriansMap, name],\n  );\n\n  const hasLevel = Object.keys(remark?.level ?? {}).length > 0;\n  return (\n    <Flex vertical align=\"center\" gap={8}>\n      <div className={styles.AdaptiveContainer}>\n        <AdaptiveAurorianCard\n          readOnly\n          aurorianId={name}\n          remark={remark}\n          breakthrough={breakthrough}\n        />\n      </div>\n\n      {typeof breakthrough === 'number' && aurorian?.rarity ? (\n        <Rate\n          className={styles.BreakThrough}\n          value={breakthrough}\n          count={aurorian.rarity}\n          onChange={onBreakthroughChange}\n          tooltips={getDefaultTooltips(aurorian.rarity)}\n        />\n      ) : null}\n      <Flex align=\"center\" gap={2} wrap={'wrap'}>\n        <Switch\n          checkedChildren=\"可替换\"\n          unCheckedChildren=\"不可替换\"\n          checked={remark?.replace?.type === 'any'}\n          onChange={val => {\n            onRemarkChange?.(\n              normalizeRemark(\n                produce(remark ?? {}, draft => {\n                  if (val) {\n                    draft.replace = {\n                      type: 'any',\n                      any: 'All',\n                    };\n                  } else {\n                    delete draft.replace;\n                  }\n                }),\n              ),\n            );\n          }}\n        />\n        {remark?.replace?.type === 'any' ? (\n          <Radio.Group\n            size=\"small\"\n            value={remark?.replace?.any}\n            options={REPLCE_OPTIONS}\n            optionType=\"button\"\n            onChange={e => {\n              onRemarkChange?.(\n                normalizeRemark(\n                  produce(remark ?? {}, draft => {\n                    if (draft.replace?.type === 'any') {\n                      draft.replace.any = e.target.value;\n                    }\n                  }),\n                ),\n              );\n            }}\n          />\n        ) : null}\n      </Flex>\n      {typeof aurorian?.rarity === 'number' &&\n      aurorian.rarity >= 4 &&\n      !remark?.replace ? (\n        <Flex align=\"center\" gap={6} wrap={'wrap'} vertical={true}>\n          <Switch\n            checkedChildren=\"标注练度\"\n            unCheckedChildren=\"不标注练度\"\n            checked={hasLevel}\n            onChange={val => {\n              onRemarkChange?.(\n                normalizeRemark(\n                  produce(remark ?? {}, draft => {\n                    if (val) {\n                      draft.level = {\n                        asc: 3,\n                        lv: 80,\n                        eq: 0,\n                        rfn: 0,\n                        aff: 0,\n                      };\n                    } else {\n                      delete draft.level;\n                    }\n                  }),\n                ),\n              );\n            }}\n          />\n          {hasLevel ? (\n            <Flex align=\"center\" gap={2} wrap={'wrap'} vertical={true}>\n              <Radio.Group\n                size=\"small\"\n                optionType=\"button\"\n                disabled\n                value={remark?.level?.asc ?? 0}\n                options={ASC_OPTIONS}\n              />\n              <Space>\n                <Slider\n                  style={{ width: 180 }}\n                  value={remark?.level?.lv ?? 0}\n                  min={1}\n                  max={80}\n                  marks={MARKS}\n                  onChange={val => {\n                    onRemarkChange?.(\n                      normalizeRemark(\n                        produce(remark ?? {}, draft => {\n                          if (draft.level) {\n                            draft.level.lv = val;\n                          }\n                        }),\n                      ),\n                    );\n                  }}\n                  step={null}\n                />\n                <InputNumber\n                  style={{ width: 60 }}\n                  size=\"small\"\n                  value={remark?.level?.lv ?? 0}\n                  min={1}\n                  max={80}\n                  onChange={val => {\n                    onRemarkChange?.(\n                      normalizeRemark(\n                        produce(remark ?? {}, draft => {\n                          if (draft.level) {\n                            draft.level.lv = val ?? 0;\n                          }\n                        }),\n                      ),\n                    );\n                  }}\n                />\n              </Space>\n            </Flex>\n          ) : null}\n        </Flex>\n      ) : null}\n    </Flex>\n  );\n};\n","import { useModel } from '@modern-js/runtime/model';\nimport { Flex, Select } from 'antd';\nimport { intersection } from 'lodash-es';\nimport { produce } from 'immer';\nimport type { AurorianRequirementType } from '@sinsa/schema';\nimport styles from './styles.module.less';\nimport { getDefaultBreakthrough } from './utils/getDefaultBreakthrough';\nimport { AuroriansModel, filterAuroriansOption } from '@/models/aurorians';\nimport { AurorianTallCard } from '@/components/UploadForm/AurorianTallCard';\n\ninterface CopilotSelector {\n  value?: AurorianRequirementType[];\n  onChange?: (val: AurorianRequirementType[]) => void;\n}\n\nexport const CopilotnSelector: React.FC<CopilotSelector> = ({\n  value,\n  onChange,\n}) => {\n  const [{ auroriansOptions, auroriansMap }] = useModel(AuroriansModel);\n  const multiSelectValue = value?.map(item => item.aurorian_id);\n  return (\n    <Flex vertical gap={8}>\n      <Select\n        mode=\"multiple\"\n        options={auroriansOptions}\n        placeholder=\"支持按拼音搜索, 比如 ad 可以搜到 安顿\"\n        showSearch\n        allowClear={false}\n        value={value?.map(item => item.aurorian_id)}\n        filterOption={filterAuroriansOption}\n        onChange={newVal => {\n          const commonValues = intersection(multiSelectValue, newVal);\n          const remainEntity = value?.filter(item =>\n            commonValues.includes(item.aurorian_id),\n          );\n          onChange?.(\n            newVal.slice(0, 5).map(newId => {\n              const oldEntity = remainEntity?.find(\n                entity => entity.aurorian_id === newId,\n              );\n              if (oldEntity) {\n                return { ...oldEntity };\n              }\n              const targetAurorian = auroriansMap[newId];\n\n              return {\n                aurorian_id: newId,\n                breakthrough: getDefaultBreakthrough(targetAurorian.rarity),\n                // is_replaceable: false,\n              } as AurorianRequirementType;\n            }),\n          );\n        }}\n      />\n\n      <Flex className={styles.AuroriansTeam} wrap=\"wrap\" gap={16}>\n        {value?.map(({ aurorian_id, breakthrough, remark }, index) => {\n          return (\n            <AurorianTallCard\n              key={aurorian_id}\n              id={aurorian_id}\n              breakthrough={breakthrough}\n              remark={remark}\n              onBreakthroughChange={bt => {\n                onChange?.(\n                  produce(value, draft => {\n                    if (draft) {\n                      draft[index].breakthrough = bt;\n                    }\n                  }),\n                );\n              }}\n              onRemarkChange={r => {\n                onChange?.(\n                  produce(value, draft => {\n                    if (draft) {\n                      draft[index].remark = r;\n                    }\n                  }),\n                );\n              }}\n            />\n          );\n        })}\n      </Flex>\n    </Flex>\n  );\n};\n","import React, { useMemo } from 'react';\n\ninterface VideoIframeProps {\n  bvid?: string;\n}\n\nexport const VideoIframe = React.memo<VideoIframeProps>(({ bvid }) => {\n  const url = useMemo(() => {\n    if (typeof bvid === 'string') {\n      const src = new URL('https://player.bilibili.com/player.html');\n      src.searchParams.append('bvid', bvid);\n      return src.href;\n    }\n    return undefined;\n  }, [bvid]);\n\n  if (url) {\n    return (\n      <iframe\n        src={url}\n        scrolling=\"no\"\n        frameBorder=\"no\"\n        style={{ border: 0, width: 700, height: 420 }}\n      ></iframe>\n    );\n  }\n\n  return null;\n});\n","import {\n  FooterToolbar,\n  ProForm,\n  ProFormDateTimePicker,\n  ProFormDependency,\n  ProFormDigit,\n  ProFormRadio,\n  ProFormSelect,\n  ProFormText,\n  ProFormTextArea,\n} from '@ant-design/pro-components';\nimport { useModel } from '@modern-js/runtime/model';\nimport dayjs from 'dayjs';\nimport { Button, Card, Typography, notification } from 'antd';\nimport { useMemo } from 'react';\nimport numeral from 'numeral';\nimport { CopilotNextSchema, CopilotSourceType } from '@sinsa/schema';\nimport { LatestVideoCard, useLatestVideoCardRef } from '../LatestVideoCard';\nimport type { FormValues } from './types';\nimport { CopilotnSelector } from './CopilotSelector';\nimport styles from './styles.module.less';\nimport { useVideoInfo } from './hooks/useVideoInfo';\nimport { VideoIframe } from './VideoIframe';\nimport { AURORIAN_SUMMARIES_RULES, SCORE_RULES } from './utils/rules';\nimport { trimBV } from './utils/preprocess';\nimport { useCheckVideoExist } from './hooks/useCheckVideoExist';\nimport { usePostCopilot } from './hooks/usePostCopilot';\nimport { ensureKey } from './utils/ensure';\nimport { getCopilotId } from './utils/get-copilot-id';\nimport { TermsModel } from '@/models/terms';\nimport { FeishuModel } from '@/models/feishu';\n\nexport const UploadForm: React.FC = () => {\n  const [{ termsOptions, latestTerm }] = useModel(TermsModel);\n  const [{ isLogin }] = useModel(FeishuModel);\n\n  const { videoInfo, loadingVideoInfo, getVideoInfo, setVideoInfo } =\n    useVideoInfo();\n\n  const { loadingCheckVideoExist, check } = useCheckVideoExist();\n\n  const { loadingPostCopilot, postCopilotAsync } = usePostCopilot();\n\n  const [form] = ProForm.useForm<FormValues>();\n\n  const initialValues: Partial<FormValues> = useMemo(() => {\n    const result: Partial<FormValues> = {\n      source_type: CopilotSourceType.Bilibili,\n    };\n    if (latestTerm?.term_id) {\n      result.term_id = latestTerm.term_id;\n    }\n    return result;\n  }, [latestTerm?.term_id]);\n\n  const latestVideoCardRef = useLatestVideoCardRef();\n\n  return (\n    <>\n      <LatestVideoCard\n        currentTermId={form.getFieldValue(ensureKey('term_id'))}\n        ref={latestVideoCardRef}\n        onClickNewCard={bvid => {\n          form.setFieldValue(ensureKey('href'), bvid);\n        }}\n      />\n      <Card>\n        <ProForm<FormValues>\n          form={form}\n          initialValues={initialValues}\n          submitter={{\n            submitButtonProps: {\n              loading: loadingCheckVideoExist || loadingPostCopilot,\n            },\n            render: (_, dom) => (\n              <FooterToolbar className={styles.FootBar}>{dom}</FooterToolbar>\n            ),\n            searchConfig: {\n              // eslint-disable-next-line no-nested-ternary\n              submitText: loadingCheckVideoExist\n                ? '校验重复中'\n                : loadingPostCopilot\n                ? '提交中'\n                : '提交作业',\n            },\n          }}\n          onFinish={async (values: FormValues) => {\n            const submitValues = {\n              ...values,\n              copilot_id: getCopilotId(values),\n            };\n\n            console.log('开始提交', submitValues);\n\n            try {\n              const submitCopilot = await CopilotNextSchema.omit({\n                created_by: true,\n                created_time: true,\n              }).parseAsync(submitValues);\n              const result = await postCopilotAsync(submitCopilot);\n\n              if (result?.record?.record_id) {\n                notification.success({\n                  message: `醒山小狗已经成功帮您添加了 ${result?.record?.fields?.author_name} 的一份作业, record_id 为 ${result?.record?.record_id}`,\n                });\n                form.resetFields();\n                setVideoInfo(undefined);\n                latestVideoCardRef.current?.refresh();\n              } else {\n                notification.error({\n                  message: `没有上传成功 ${JSON.stringify(result, null, 2)}`,\n                });\n                console.log('upload failed', result, submitCopilot);\n              }\n            } catch (error) {\n              notification.error({\n                message: `解析表单失败 ${JSON.stringify(error, null, 2)}`,\n              });\n              console.error('解析失败', error);\n            }\n          }}\n        >\n          <ProForm.Group>\n            <ProFormSelect\n              name={ensureKey('term_id')}\n              label=\"荒典期数\"\n              options={termsOptions}\n              rules={[{ required: true }]}\n              width={'sm'}\n              showSearch={false}\n            />\n            <ProFormRadio.Group\n              name={ensureKey('source_type')}\n              label=\"投稿平台\"\n              radioType=\"button\"\n              options={useMemo(\n                () => [\n                  {\n                    label: '哔哩哔哩',\n                    value: CopilotSourceType.Bilibili,\n                  },\n                  {\n                    label: 'Youtube',\n                    value: CopilotSourceType.Youtube,\n                    disabled: true,\n                  },\n                ],\n                [],\n              )}\n              rules={[{ required: true }]}\n            />\n          </ProForm.Group>\n          <ProForm.Group>\n            <ProFormDependency name={[ensureKey('term_id')]}>\n              {({ term_id }) => (\n                <ProFormText\n                  name={ensureKey('href')}\n                  label=\"BV号或B站视频链接\"\n                  placeholder={\n                    'BVxxxxxxxxxx 或 https://www.bilibili.com/video/BVxxxxxxxxxx/'\n                  }\n                  validateTrigger=\"onBlur\"\n                  width={'lg'}\n                  fieldProps={{\n                    onChange(e) {\n                      const bvOrLink = e.target.value;\n                      trimBV(form, bvOrLink);\n                    },\n                  }}\n                  rules={[\n                    { required: true },\n                    { pattern: /^BV.+$/, message: 'BV号格式不正确' },\n                    {\n                      async validator(_, bv) {\n                        if (typeof bv === 'string' && bv.startsWith('BV')) {\n                          const result = await check({\n                            href: bv,\n                            termId: term_id,\n                          });\n                          if (result?.noExist || result?.target) {\n                            if (result?.target) {\n                              const errorMessage = `${\n                                result?.target?.fields?.creator?.name\n                              } 已经在 ${dayjs(\n                                result?.target?.fields?.insert_db_time,\n                              ).format('YYYY-MM-DD HH:mm:ss')} 添加了此作业`;\n                              notification.error({\n                                message: `${errorMessage}. 撞车了~ 请更换作业收录`,\n                              });\n                              throw new Error(errorMessage);\n                            }\n                          }\n                        }\n                      },\n                    },\n                  ]}\n                  extra=\"小提示：点击上方未收录的视频卡片，能快速填入 BV 号\"\n                />\n              )}\n            </ProFormDependency>\n            <ProForm.Item label=\" \">\n              <ProFormDependency name={[ensureKey('href')]}>\n                {({ href }) => (\n                  <Button\n                    disabled={\n                      !isLogin ||\n                      !(typeof href === 'string' && href.startsWith('BV'))\n                    }\n                    type=\"primary\"\n                    loading={loadingVideoInfo}\n                    onClick={async e => {\n                      e.stopPropagation();\n                      const result = await getVideoInfo(href);\n\n                      if (result) {\n                        const { title, desc, owner, pubdate } = result;\n                        form.setFieldsValue({\n                          title,\n                          description: desc === '-' ? undefined : desc,\n                          author_id: String(owner.mid),\n                          author_name: owner.name,\n                          upload_time: pubdate.valueOf(),\n                        });\n                      }\n                    }}\n                  >\n                    读取哔哩哔哩投稿视频信息\n                  </Button>\n                )}\n              </ProFormDependency>\n            </ProForm.Item>\n          </ProForm.Group>\n          <VideoIframe bvid={videoInfo?.bvid} />\n\n          <ProForm.Item\n            label=\"光灵阵容\"\n            name={ensureKey('aurorian_requirements')}\n            rules={AURORIAN_SUMMARIES_RULES}\n          >\n            <CopilotnSelector />\n          </ProForm.Item>\n\n          <ProFormDigit\n            label=\"结算分数\"\n            name={ensureKey('score')}\n            validateTrigger=\"onBlur\"\n            rules={SCORE_RULES}\n            min={0}\n            fieldProps={{\n              formatter: value => numeral(value).format('0,0'),\n              parser: str => numeral(str).value() ?? 0,\n              size: 'large',\n            }}\n            extra={\n              <ProFormDependency name={[ensureKey('score')]}>\n                {partialValues => {\n                  const { score } = partialValues as Pick<FormValues, 'score'>;\n                  if (\n                    latestVideoCardRef.current?.latestMaxAndMinScoreCopilots\n                      ?.maxScoreCopilot &&\n                    latestVideoCardRef.current?.latestMaxAndMinScoreCopilots\n                      .minScoreCopilot\n                  ) {\n                    if (\n                      score >=\n                      2 *\n                        latestVideoCardRef.current.latestMaxAndMinScoreCopilots\n                          .maxScoreCopilot.score\n                    ) {\n                      return (\n                        <Typography.Text type=\"warning\">\n                          录入的分数超过最近作业最高分两倍，请再次确认是否录入正确\n                        </Typography.Text>\n                      );\n                    }\n\n                    if (\n                      score <=\n                      0.5 *\n                        latestVideoCardRef.current.latestMaxAndMinScoreCopilots\n                          .minScoreCopilot.score\n                    ) {\n                      return (\n                        <Typography.Text type=\"warning\">\n                          录入的分数低于最近作业最低分的一半，请再次确认是否录入正确\n                        </Typography.Text>\n                      );\n                    }\n                  }\n\n                  return null;\n                }}\n              </ProFormDependency>\n            }\n          />\n\n          <ProFormText\n            label=\"视频标题\"\n            name={ensureKey('title')}\n            rules={[{ required: true }]}\n          />\n\n          <ProForm.Group>\n            <ProFormDateTimePicker\n              label=\"视频发布时间\"\n              name={ensureKey('upload_time')}\n              rules={[{ required: true }]}\n            />\n            <ProFormText\n              label=\"作业作者\"\n              name={ensureKey('author_name')}\n              rules={[{ required: true }]}\n            />\n            <ProFormText\n              label=\"作业作者空间 ID\"\n              name={ensureKey('author_id')}\n              rules={[{ required: true }]}\n              placeholder={`space.bilibili.com/[这一段数字填进来]`}\n              width={'md'}\n            />\n            <ProFormTextArea label=\"视频描述\" name=\"description\" width={'xl'} />\n          </ProForm.Group>\n        </ProForm>\n      </Card>\n    </>\n  );\n};\n","import { PageContainer } from '@ant-design/pro-components';\nimport { Flex } from 'antd';\nimport { UploadForm } from '@/components/UploadForm';\nimport { LarkLoginCard } from '@/views/UploadView/LarkLoginCard';\n\nconst UploadPage: React.FC = () => {\n  return (\n    <PageContainer\n      title=\"作业收录（内部版）\"\n      content=\"内部的收录同学可以使用此页面快速上传作业，之后会再提供 Chrome 插件提高效率（比心）\"\n    >\n      <Flex vertical gap=\"middle\">\n        <LarkLoginCard />\n        <UploadForm />\n      </Flex>\n    </PageContainer>\n  );\n};\n\nexport default UploadPage;\n","import { Link, useLocation } from '@modern-js/runtime/router';\nimport { Avatar, Button, Card, Space, Typography } from 'antd';\nimport { useEffect, useMemo, useState } from 'react';\nimport { useRequest } from 'ahooks';\nimport { useModel } from '@modern-js/runtime/model';\nimport { LARK_SCOPE, UPLOAD_APP_ID } from './constants';\nimport { RoutePath } from '@/views/GlobalLayout/constants';\nimport { getFeishuProfile, saveAuthCallback } from '@/services/http';\nimport { FeishuModel } from '@/models/feishu';\n\nexport const LarkLoginCard: React.FC = () => {\n  const REDIRECT_URI = useMemo(() => {\n    return `${window.location.origin}/#${RoutePath.Upload}/`;\n  }, []);\n\n  const [larkpreLoginCode, setLarkpreLoginCode] = useState<string>();\n  const location = useLocation();\n\n  useEffect(() => {\n    const code = location.search\n      .slice(1)\n      .split('&')\n      .find(item => item.startsWith('code='))\n      ?.replace('code=', '');\n\n    if (code) {\n      setLarkpreLoginCode(code);\n    }\n  }, [location.search]);\n\n  const [, { setProfile }] = useModel(FeishuModel);\n\n  const { data, loading } = useRequest(\n    async () => {\n      if (larkpreLoginCode) {\n        await saveAuthCallback({ code: larkpreLoginCode });\n        setLarkpreLoginCode(undefined);\n        return undefined;\n      }\n\n      return getFeishuProfile();\n    },\n    {\n      refreshDeps: [larkpreLoginCode],\n      onSuccess(_p) {\n        setProfile(_p);\n      },\n    },\n  );\n\n  const FEISHU_AUTH_URL = useMemo(() => {\n    const url = new URL(`https://open.feishu.cn/open-apis/authen/v1/authorize`);\n    url.searchParams.append('app_id', UPLOAD_APP_ID);\n    url.searchParams.append('redirect_uri', REDIRECT_URI);\n    url.searchParams.append('scope', LARK_SCOPE);\n\n    return url.href;\n  }, []);\n  return (\n    <Card loading={loading}>\n      {data ? (\n        <Card.Meta\n          avatar={<Avatar src={data.avatar_url} />}\n          title={data.name}\n          description=\"欢迎回来~ 您已授权，可以开始工作啦\"\n        />\n      ) : (\n        <Space>\n          <Typography.Text>\n            您好，我是作业提交醒山小狗，我需要您飞书授权才能工作\n          </Typography.Text>\n          <Link target=\"_self\" to={FEISHU_AUTH_URL}>\n            <Button type=\"primary\">去飞书授权</Button>\n          </Link>\n        </Space>\n      )}\n    </Card>\n  );\n};\n","import { useEffect, useRef } from 'react';\n\nexport function useLazyImage(aurorianId?: string) {\n  const containerRef = useRef<HTMLDivElement>(null);\n  useEffect(() => {\n    const loadImage = async () => {\n      if (aurorianId && containerRef.current) {\n        containerRef.current.style.backgroundImage = `url(/assets/images/avatars/${aurorianId}.webp)`;\n      }\n    };\n    loadImage();\n  }, [aurorianId]);\n\n  return {\n    containerRef,\n  };\n}\n","import { z } from '@sinsa/schema';\n\nexport const SearchVideoSchema = z.object({\n  type: z.literal('video'),\n  author: z.string(),\n  pic: z.string(),\n  bvid: z.string().startsWith('BV'),\n  title: z.string(),\n  pubdate: z.number().transform(v => v * 1000),\n  hit_columns: z.array(z.enum(['title', 'tag', 'author', 'description'])),\n  duration: z.string(),\n});\n\nexport type SearchVideoType = z.infer<typeof SearchVideoSchema>;\n\nexport const SearchVideoResultSchema = z.object({\n  seid: z.string(),\n  page: z.number(),\n  pagesize: z.number(),\n  numResults: z.number(),\n  numPages: z.number(),\n  result: z.array(SearchVideoSchema),\n});\n\nexport type SearchVideoResultType = z.infer<typeof SearchVideoResultSchema>;\n","import { CopilotNextUserSchema, z } from '@sinsa/schema';\n\nexport const SimpleLatestCopilotSchema = z.object({\n  created_time: z.coerce.date(),\n  created_by: z.preprocess(\n    val => (typeof val === 'string' ? JSON.parse(val) : val),\n    CopilotNextUserSchema,\n  ),\n  copilot_id: z.string(),\n  score: z.coerce.number(),\n  term_id: z.string(),\n  href: z.string(),\n});\n\nexport interface SimpleLatestCopilotType\n  extends z.infer<typeof SimpleLatestCopilotSchema> {}\n\nexport const SimpleLatestCopilotsResultSchema = z.array(\n  SimpleLatestCopilotSchema,\n);\n","import { useRequest } from 'ahooks';\nimport { useCallback } from 'react';\nimport { SearchVideoResultSchema } from './schemas/SearchVideo';\nimport { SimpleLatestCopilotsResultSchema } from './schemas/SimpleLatestCopilot';\nimport { getLatestCopilots, getLatestVideo } from '@/services/http';\n\nexport function useLatestVideo() {\n  const {\n    loading: loadingLatestVideos,\n    runAsync: getLatestVideosAsync,\n    data: latestVideos,\n    refresh: refreshLatestVideos,\n  } = useRequest(\n    async () => {\n      try {\n        const data = await getLatestVideo();\n        return SearchVideoResultSchema.parse(data);\n      } catch (error) {\n        console.log('parse error', error);\n      }\n      return undefined;\n    },\n    {\n      manual: true,\n    },\n  );\n\n  const {\n    data: latestCopilots,\n    loading: loadingLatestCopilots,\n    runAsync: getLatestCopilotsAsync,\n    refresh: refreshLatestCopilots,\n  } = useRequest(\n    async () => {\n      try {\n        const data = await getLatestCopilots({ pageSize: 30 });\n        return SimpleLatestCopilotsResultSchema.parse(data);\n      } catch (error) {\n        console.log('parse error', error);\n      }\n      return undefined;\n    },\n    { manual: true },\n  );\n\n  const refresh = useCallback(() => {\n    refreshLatestCopilots();\n    refreshLatestVideos();\n  }, []);\n\n  return {\n    latestVideos,\n    loadingLatestVideos,\n    getLatestVideosAsync,\n    latestCopilots,\n    loadingLatestCopilots,\n    getLatestCopilotsAsync,\n    refresh,\n  };\n}\n","import { memoize } from 'lodash-es';\n\nexport const getDefaultTooltips = memoize((rarity: number) => {\n  switch (rarity) {\n    case 6:\n      return ['零', '零', '一', '一', '一', '满'].map(txt => `${txt}破`);\n    case 5:\n      return ['零', '一', '一', '一', '满'].map(txt => `${txt}破`);\n    case 4:\n      return ['零', '零', '零', '满'].map(txt => `${txt}破`);\n    case 3:\n      return ['零', '零', '满'].map(txt => `${txt}破`);\n    case 2:\n      return ['零', '满'].map(txt => `${txt}破`);\n    case 1:\n      return ['满'].map(txt => `${txt}破`);\n    default:\n      return [];\n  }\n});\n","import type { AurorianRequirementRemarkType } from '@sinsa/schema';\n\nexport function normalizeRemark(remark?: AurorianRequirementRemarkType) {\n  if (remark && Object.keys(remark).length === 0) {\n    return undefined;\n  }\n  return remark;\n}\n","import { memoize } from 'lodash-es';\n\nexport const getDefaultBreakthrough = memoize((rarity: number) => {\n  switch (rarity) {\n    case 6:\n      return 2;\n    case 5:\n      return 1;\n    case 4:\n      return 4;\n    case 3:\n      return 3;\n    case 2:\n      return 2;\n    case 1:\n      return 1;\n    default:\n      return 0;\n  }\n});\n","import { useRequest } from 'ahooks';\nimport { checkVideoExist } from '@/services/http';\n\nexport function useCheckVideoExist() {\n  const { loading: loadingCheckVideoExist, runAsync: check } = useRequest(\n    async ({ href, termId }: { href: string; termId: string }) => {\n      return checkVideoExist({ href, termId });\n    },\n    {\n      manual: true,\n    },\n  );\n\n  return {\n    loadingCheckVideoExist,\n    check,\n  };\n}\n","import { useRequest } from 'ahooks';\nimport type { CopilotNextType } from '@sinsa/schema';\nimport { toFeishuCopilotWithoutCreatedInfo } from '@sinsa/schema';\nimport { postCopilot } from '@/services/http';\n\nexport function usePostCopilot() {\n  const { loading: loadingPostCopilot, runAsync: postCopilotAsync } =\n    useRequest(\n      async (\n        submitCopilot: Omit<CopilotNextType, 'created_time' | 'created_by'>,\n      ) => {\n        const remoteCopilot = toFeishuCopilotWithoutCreatedInfo(submitCopilot);\n        const result = await postCopilot(remoteCopilot);\n\n        return result;\n      },\n      { manual: true },\n    );\n\n  return {\n    loadingPostCopilot,\n    postCopilotAsync,\n  };\n}\n","import { useRequest } from 'ahooks';\nimport { getVideoInfo } from '@/services/http';\n\nexport function useVideoInfo() {\n  const { data, loading, runAsync, mutate } = useRequest(\n    async bv => {\n      const result = await getVideoInfo(bv);\n\n      return result;\n    },\n    { manual: true },\n  );\n\n  return {\n    videoInfo: data,\n    loadingVideoInfo: loading,\n    getVideoInfo: runAsync,\n    setVideoInfo: mutate,\n  };\n}\n","import type { FormValues } from '../types';\n\nexport function ensureKey(key: keyof FormValues) {\n  return key;\n}\n","import type { FormValues } from '../types';\n\nexport function getCopilotId({\n  href,\n  aurorian_requirements,\n  term_id,\n}: Pick<FormValues, 'href' | 'aurorian_requirements' | 'term_id'>) {\n  if (href && aurorian_requirements && term_id) {\n    const url = new URL(`https://example.com/${href}`);\n    return `${term_id}_${url.pathname.slice(1)}_${\n      aurorian_requirements[0].aurorian_id\n    }_${aurorian_requirements[4].aurorian_id}`;\n  }\n  return undefined;\n}\n","import type { ProFormInstance } from '@ant-design/pro-components';\nimport type { FormValues } from '../types';\n\nexport function trimBV(\n  form: ProFormInstance<FormValues> | undefined,\n  bvOrLink?: string,\n) {\n  if (\n    typeof bvOrLink === 'string' &&\n    (bvOrLink.startsWith('https://') || bvOrLink.startsWith('http://'))\n  ) {\n    const bvResult = /\\/(BV[^/]+)\\/?/.exec(new URL(bvOrLink).pathname)?.[1];\n    if (typeof bvResult === 'string' && bvResult.startsWith('BV')) {\n      form?.setFieldValue('bv', bvResult);\n    }\n  }\n}\n","import type { Rule } from 'antd/es/form';\n\nexport const AURORIAN_SUMMARIES_RULES: Rule[] = [\n  {\n    async validator(_, array) {\n      if (Array.isArray(array) && array.length === 5) {\n        // pass\n      } else {\n        throw new Error('光灵数量必须满足 5 个');\n      }\n    },\n  },\n  { required: true },\n];\n\nexport const SCORE_RULES: Rule[] = [\n  { required: true },\n  {\n    async validator(_, value) {\n      if (typeof value === 'number' && value.toString().endsWith('0000')) {\n        throw new Error(\n          '不能填写粗略分数, 荒典作业分数必须精确到个位, 请拖动视频进度条到最后查看具体分数',\n        );\n      }\n    },\n  },\n  {\n    async validator(_, value) {\n      if (typeof value === 'number' && Number.isInteger(value) && value > 0) {\n        // pass\n      } else {\n        throw new Error('分数必须是正整数');\n      }\n\n      if (value >= 1e8) {\n        throw new Error('分数大于一亿分了，你要不再看看有没有填对？');\n      } else if (value <= 1e5) {\n        throw new Error('分数小于十万分，你要不要再看看有没有填对？');\n      }\n    },\n  },\n];\n","export function trimTitle(title: string): string {\n  return title\n    .replace('[白夜极光]', '')\n    .replace('【白夜极光】', '')\n    .replace('白夜极光', '')\n    .replace('荒典', '')\n    .replace('[hidden]', '');\n}\n","import { model } from '@modern-js/runtime/model';\nimport type { FeishuProfileType } from '@/schemas/feishu-profile';\n\nexport interface FeishuState {\n  profile?: FeishuProfileType;\n}\n\nexport const FeishuModel = model<FeishuState>('feishu').define({\n  state: {\n    profile: undefined,\n  },\n  computed: {\n    isLogin: state =>\n      typeof state.profile?.name === 'string' &&\n      typeof state.profile?.open_id === 'string',\n  },\n  actions: {},\n});\n","import type {\n  CalcOptions,\n  SolutionContext,\n  AllSolutions,\n} from '@sinsa/solution-calculator/dist/types/types';\n\nexport class SolutionAlgorithmService {\n  private static instance: SolutionAlgorithmService | null = null;\n\n  public static getInstance(): SolutionAlgorithmService {\n    if (SolutionAlgorithmService.instance === null) {\n      SolutionAlgorithmService.instance = new SolutionAlgorithmService();\n    }\n    return SolutionAlgorithmService.instance;\n  }\n\n  protected constructor() {\n    // noop\n  }\n\n  calculateAllSolutions(\n    context: SolutionContext,\n    k: number,\n    options: CalcOptions,\n  ): Promise<AllSolutions> {\n    return new Promise((resolve, reject) => {\n      const worker = new Worker(\n        new URL('@sinsa/solution-calculator', import.meta.url),\n      );\n\n      worker.addEventListener('message', event => {\n        const result = event.data;\n        resolve(result);\n        worker.terminate();\n      });\n\n      worker.addEventListener('error', error => {\n        reject(error);\n        worker.terminate();\n      });\n\n      worker.postMessage({ context, k, options });\n    });\n  }\n}\n\nexport const solutionAlgorithm = SolutionAlgorithmService.getInstance();\n","import type { QueryParamsType } from '../schemas/query-params';\n\nexport function ensureQueryKey(key: keyof QueryParamsType) {\n  return key;\n}\n","import constate from 'constate';\nimport { ProForm } from '@ant-design/pro-components';\nimport { useRequestSolution } from './hooks/use-request-solution';\nimport type { QueryParamsType } from './schemas/query-params';\nimport { useTriggerFormAction } from './hooks/use-trigger-form-action';\n\nexport const [SolutionResultProvider, useSolutionResultContext] = constate(\n  () => {\n    const { solutionResult, loadingSolutionResult, requestSolution } =\n      useRequestSolution();\n\n    const [form] = ProForm.useForm<QueryParamsType>();\n\n    const { triggerFormAction } = useTriggerFormAction(form);\n\n    return {\n      solutionResult,\n      loadingSolutionResult,\n      requestSolution,\n      form,\n      triggerFormAction,\n    };\n  },\n);\n","import { useRequest } from 'ahooks';\nimport { useModel } from '@modern-js/runtime/model';\nimport type { Solution } from '@sinsa/solution-calculator/dist/types/types';\nimport type { CopilotNextType } from '@sinsa/schema';\nimport type { QueryParamsType } from '../schemas/query-params';\nimport { withoutExclude } from '../utils/without-exclude';\nimport { AuroriansModel } from '@/models/aurorians';\nimport { solutionAlgorithm } from '@/services/solution-algorithm';\n\nexport function useRequestSolution() {\n  const [{ WHOLE_BOX }] = useModel(AuroriansModel);\n  const {\n    data: solutionResult,\n    loading: loadingSolutionResult,\n    runAsync: requestSolution,\n  } = useRequest(\n    async (\n      copilots: CopilotNextType[],\n      {\n        exclude,\n        k,\n        disableAlternative,\n        copilotsIgnore,\n        enableExclude,\n      }: QueryParamsType,\n    ) => {\n      const availableBox =\n        enableExclude && Array.isArray(exclude)\n          ? withoutExclude(WHOLE_BOX, exclude)\n          : WHOLE_BOX;\n\n      const allSolutions = await solutionAlgorithm.calculateAllSolutions(\n        {\n          copilots,\n          availableBox,\n        },\n        k,\n        { disableAlternative, copilotsIgnore },\n      );\n\n      const rankSet = new WeakMap<Solution, number>();\n      for (let i = 0; i < allSolutions.solutions.length; i++) {\n        const target = allSolutions.solutions[i];\n        rankSet.set(target, i);\n      }\n\n      return {\n        allSolutions,\n        rankSet,\n      };\n    },\n    {\n      manual: true,\n    },\n  );\n\n  return {\n    solutionResult,\n    loadingSolutionResult,\n    requestSolution,\n  };\n}\n","export enum QueryFormAction {\n  IgnoreAurorian = 'IgnoreAurorian',\n  IgnoreAurorianBreakthroughOnly = 'IgnoreAurorianBreakthroughOnly',\n  IgnoreCopilot = 'IgnoreCopilot',\n  ReplaceAurorian = 'ReplaceAurorian',\n}\n","import type { ProFormInstance } from '@ant-design/pro-components';\nimport { useCallback } from 'react';\nimport type { AurorianNextType, CopilotNextType } from '@sinsa/schema';\nimport type {\n  ExcludeDataType,\n  QueryParamsType,\n} from '../../schemas/query-params';\nimport { ensureQueryKey } from '../../QueryForm/utils';\nimport { getNormalizeBreakthroughByRarity } from '../../utils/without-exclude';\nimport { QueryFormAction } from './constants';\n\nexport type TriggerFormActionPayload =\n  | {\n      type: QueryFormAction.IgnoreAurorian;\n      aurorian: AurorianNextType;\n    }\n  | {\n      type: QueryFormAction.IgnoreAurorianBreakthroughOnly;\n      aurorian: AurorianNextType;\n      breakthrough: number;\n    }\n  | {\n      type: QueryFormAction.IgnoreCopilot;\n      copilot: CopilotNextType;\n    }\n  | {\n      type: QueryFormAction.ReplaceAurorian;\n      aurorian: AurorianNextType;\n      copilot: CopilotNextType;\n    };\n\nexport function useTriggerFormAction(form: ProFormInstance<QueryParamsType>) {\n  const triggerFormAction = useCallback(\n    (payload: TriggerFormActionPayload) => {\n      switch (payload.type) {\n        // 1. 排除单个作业\n        case QueryFormAction.IgnoreCopilot: {\n          const copilotsIgnore = form.getFieldValue(\n            ensureQueryKey('copilotsIgnore'),\n          );\n          const newCopilotsIgnore = Array.isArray(copilotsIgnore)\n            ? [...copilotsIgnore, payload.copilot.copilot_id]\n            : [payload.copilot.copilot_id];\n          form.setFieldValue(\n            ensureQueryKey('copilotsIgnore'),\n            newCopilotsIgnore,\n          );\n          break;\n        }\n\n        // 2. 排除单个光灵\n        case QueryFormAction.IgnoreAurorian:\n        case QueryFormAction.IgnoreAurorianBreakthroughOnly: {\n          form.setFieldValue(ensureQueryKey('enableExclude'), true);\n          const { exclude } = form.getFieldsValue();\n          // 光灵是否已经在排除列表里了\n          const existAurorianInfo = exclude?.find(\n            ex => ex.aurorianId === payload.aurorian.aurorian_id,\n          );\n          let clonedExclude = Array.isArray(exclude) ? Array.from(exclude) : [];\n          if (existAurorianInfo) {\n            clonedExclude = clonedExclude.filter(\n              info => info.aurorianId !== existAurorianInfo.aurorianId,\n            );\n          }\n          const newExclude: ExcludeDataType[] =\n            payload.type === QueryFormAction.IgnoreAurorianBreakthroughOnly\n              ? [\n                  ...clonedExclude,\n                  {\n                    aurorianId: payload.aurorian.aurorian_id,\n                    excludeBreakthroughOnly: true,\n                    excludeBreakthrough: getNormalizeBreakthroughByRarity(\n                      payload.breakthrough,\n                      payload.aurorian.rarity,\n                    ),\n                  },\n                ]\n              : [\n                  ...clonedExclude,\n                  { aurorianId: payload.aurorian.aurorian_id },\n                ];\n          form.setFieldValue(ensureQueryKey('exclude'), newExclude);\n\n          break;\n        }\n\n        default:\n          break;\n      }\n      window.setTimeout(() => form.submit());\n    },\n    [form],\n  );\n\n  return {\n    triggerFormAction,\n  };\n}\n","import { produce } from 'immer';\nimport type { AurorianRequirementType } from '@sinsa/schema';\nimport type { QueryParamsType } from '../schemas/query-params';\n\nexport function getNormalizeBreakthroughByRarity(\n  currentBreakthrough: number,\n  rarity: 1 | 2 | 3 | 4 | 5 | 6 | number,\n) {\n  switch (rarity) {\n    case 6:\n      return [0, 0, 3, 3, 3, 6].at(currentBreakthrough - 1)!;\n    case 5:\n      return [0, 2, 2, 2, 5].at(currentBreakthrough - 1)!;\n    case 4:\n      return [0, 0, 0, 4].at(currentBreakthrough - 1)!;\n    case 3:\n      return [0, 0, 3].at(currentBreakthrough - 1)!;\n    case 2:\n      return [0, 2].at(currentBreakthrough - 1)!;\n    case 1:\n      return [1].at(currentBreakthrough - 1)!;\n    default:\n      return 0;\n  }\n}\n\nexport function withoutExclude(\n  summaries: Record<\n    AurorianRequirementType['aurorian_id'],\n    AurorianRequirementType\n  >,\n  exclude: QueryParamsType['exclude'],\n) {\n  if (!exclude) {\n    return summaries;\n  }\n  return produce(summaries, draft => {\n    for (const {\n      excludeBreakthroughOnly,\n      excludeBreakthrough,\n      aurorianId,\n    } of exclude) {\n      // 如果是仅仅排除突破\n      if (excludeBreakthroughOnly) {\n        // 如果排除突破的要求 >= 1\n        if (\n          typeof excludeBreakthrough === 'number' &&\n          excludeBreakthrough >= 1\n        ) {\n          // const targetAurorian = auroriansMap[aurorianName];\n          // 那么说明 Box 里的该光灵的突破一定比排除突破小 1\n          draft[aurorianId].breakthrough = Math.max(excludeBreakthrough - 1, 0);\n        }\n      } else {\n        // 否则排除该光灵\n        delete draft[aurorianId];\n      }\n    }\n  });\n}\n","export const UPLOAD_APP_ID = 'cli_a5fd9725777a100b';\n\nexport const LARK_SCOPE = `bitable:app`;\n"],"names":["IconAsc","rairty","className","a","b","asc","AdaptiveAurorianCard","aurorianId","name","breakthrough","remark","readOnly","mini","auroriansMap","useModel","AuroriansModel","aurorian","useMemo","containerRef","useLazyImage","aurorian_id","screen","useBreakpoint","rateTheme","starSize","components","Rate","starBg","items","label","cn_name","key","AdaptiveAurorianCardMenuKey","filter","_","triggerFormAction","useSolutionResultContext","Dropdown","disabled","trigger","getPopupContainer","document","body","menu","onClick","type","QueryFormAction","m","ref","whileHover","undefined","opacity","whileTap","Flex","vertical","rarity","ConfigProvider","theme","value","count","align","alt","profession","src","ClassURLMapper","primary_element","ElementURLMapper","secondary_element","replace","any","Tag","color","level","lv","gap","useLatestVideoCardRef","useRef","LatestVideoCard","onClickNewCard","currentTermId","loadingLatestCopilots","loadingLatestVideos","getLatestCopilotsAsync","getLatestVideosAsync","latestCopilots","latestVideos","refresh","useLatestVideo","isLogin","FeishuModel","useEffect","latestMaxAndMinScoreCopilots","currentTermCopilots","c","term_id","maxScoreCopilot","maxBy","score","minScoreCopilot","minBy","useImperativeHandle","data","loading","loadingDenyList","useRequest","list","Array","from","Card","title","bodyStyle","overflow","height","extra","Button","e","stopPropagation","wrap","result","map","video","displayTitle","trimTitle","copilotInfo","find","href","bvid","onlyHitAuthor","hit_columns","length","includes","tooShort","first","duration","split","inDenyList","hoverable","size","cover","Tooltip","created_by","created_time","format","referrerPolicy","crossOrigin","pic","Typography","strong","author","RelativeTimeText","time","Date","pubdate","target","ellipsis","dangerouslySetInnerHTML","__html","fromNow","prev","cur","valueOf","REPLCE_OPTIONS","ASC_OPTIONS","MARKS","AurorianTallCard","id","onBreakthroughChange","onRemarkChange","hasLevel","Object","keys","onChange","tooltips","getDefaultTooltips","Switch","checkedChildren","unCheckedChildren","checked","val","normalizeRemark","produce","draft","Radio","options","optionType","eq","rfn","aff","Space","Slider","style","width","min","max","marks","step","InputNumber","CopilotnSelector","auroriansOptions","multiSelectValue","item","Select","mode","placeholder","showSearch","allowClear","filterOption","filterAuroriansOption","newVal","commonValues","intersection","remainEntity","slice","newId","oldEntity","entity","targetAurorian","getDefaultBreakthrough","index","bt","r","VideoIframe","url","URL","searchParams","append","scrolling","frameBorder","border","UploadForm","termsOptions","latestTerm","TermsModel","videoInfo","loadingVideoInfo","getVideoInfo","setVideoInfo","useVideoInfo","loadingCheckVideoExist","check","useCheckVideoExist","loadingPostCopilot","postCopilotAsync","usePostCopilot","form","ProForm","initialValues","source_type","CopilotSourceType","latestVideoCardRef","getFieldValue","ensureKey","setFieldValue","submitter","submitButtonProps","render","dom","FooterToolbar","searchConfig","submitText","onFinish","values","submitValues","copilot_id","getCopilotId","console","log","submitCopilot","CopilotNextSchema","parseAsync","record","record_id","notification","message","fields","author_name","resetFields","current","JSON","stringify","error","ProFormSelect","rules","required","ProFormRadio","radioType","ProFormDependency","ProFormText","validateTrigger","fieldProps","bvOrLink","trimBV","pattern","validator","bv","startsWith","termId","noExist","errorMessage","creator","insert_db_time","Error","desc","owner","setFieldsValue","description","author_id","String","mid","upload_time","AURORIAN_SUMMARIES_RULES","ProFormDigit","SCORE_RULES","formatter","parser","str","partialValues","ProFormDateTimePicker","ProFormTextArea","PageContainer","content","LarkLoginCard","REDIRECT_URI","window","location","origin","RoutePath","larkpreLoginCode","setLarkpreLoginCode","useState","useLocation","code","search","setProfile","saveAuthCallback","getFeishuProfile","refreshDeps","onSuccess","_p","FEISHU_AUTH_URL","UPLOAD_APP_ID","LARK_SCOPE","avatar","Avatar","avatar_url","Link","to","loadImage","backgroundImage","SearchVideoSchema","z","transform","v","SearchVideoResultSchema","seid","page","pagesize","numResults","numPages","SimpleLatestCopilotSchema","parse","CopilotNextUserSchema","SimpleLatestCopilotsResultSchema","runAsync","refreshLatestVideos","getLatestVideo","manual","refreshLatestCopilots","getLatestCopilots","pageSize","useCallback","memoize","txt","checkVideoExist","remoteCopilot","toFeishuCopilotWithoutCreatedInfo","postCopilot","mutate","aurorian_requirements","pathname","bvResult","exec","array","isArray","toString","endsWith","Number","isInteger","model","define","state","profile","computed","open_id","actions","SolutionAlgorithmService","getInstance","instance","calculateAllSolutions","context","k","Promise","resolve","reject","worker","Worker","addEventListener","event","terminate","postMessage","solutionAlgorithm","ensureQueryKey","SolutionResultProvider","solutionResult","loadingSolutionResult","requestSolution","useRequestSolution","useTriggerFormAction","WHOLE_BOX","copilots","exclude","disableAlternative","copilotsIgnore","enableExclude","availableBox","withoutExclude","allSolutions","rankSet","WeakMap","i","solutions","set","payload","newCopilotsIgnore","copilot","getFieldsValue","existAurorianInfo","ex","clonedExclude","info","newExclude","excludeBreakthroughOnly","excludeBreakthrough","getNormalizeBreakthroughByRarity","setTimeout","submit","currentBreakthrough","at","summaries","Math"],"mappings":"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"}
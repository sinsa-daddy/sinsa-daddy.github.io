{"version":3,"file":"static/js/async/8651.e82dad95.js","sources":["../../packages/solution-calculator/dist/es/index.js"],"sourcesContent":["var __defProp = Object.defineProperty;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\n\n// src/lib/helpers/box-without-aurorians-in-copilot.ts\nfunction boxWithoutAuroriansInCopilot(myBox, copilot, { disableAlternative: disalbeAlternative }) {\n  var _a, _b;\n  const cloneMyBox = __spreadValues({}, myBox);\n  for (const aurorianRequirement of copilot.aurorian_requirements) {\n    if (!disalbeAlternative && ((_b = (_a = aurorianRequirement.remark) == null ? void 0 : _a.replace) == null ? void 0 : _b.type) === \"any\" && aurorianRequirement.remark.replace.any === \"All\") {\n      continue;\n    }\n    delete cloneMyBox[aurorianRequirement.aurorian_id];\n  }\n  return cloneMyBox;\n}\n\n// src/lib/helpers/can-use-copilot.ts\nfunction canUseCopilot(myBox, copilot, { disableAlternative, copilotsIgnore }) {\n  var _a, _b;\n  if (Array.isArray(copilotsIgnore) && copilotsIgnore.length > 0 && copilotsIgnore.includes(copilot.copilot_id)) {\n    return false;\n  }\n  for (const aurorianRequirement of copilot.aurorian_requirements) {\n    if (!disableAlternative && ((_b = (_a = aurorianRequirement.remark) == null ? void 0 : _a.replace) == null ? void 0 : _b.type) === \"any\" && aurorianRequirement.remark.replace.any === \"All\") {\n      continue;\n    }\n    const aurorianInMyBox = myBox[aurorianRequirement.aurorian_id];\n    if (!aurorianInMyBox) {\n      return false;\n    }\n    if (aurorianInMyBox.breakthrough < aurorianRequirement.breakthrough) {\n      return false;\n    }\n  }\n  return true;\n}\n\n// src/lib/calculate-all-solutions.ts\nfunction calculateAllSolutions(context, k = 3, options = {}) {\n  const result = {\n    solutions: []\n  };\n  const stack = [\n    {\n      currentCopilotIndex: 0,\n      currentScenario: [],\n      remainingBox: context.availableBox,\n      count: k\n    }\n  ];\n  while (stack.length > 0) {\n    const { currentCopilotIndex, currentScenario, remainingBox, count } = stack.pop();\n    if (count === 0 || currentCopilotIndex === context.copilots.length) {\n      if (currentScenario.length >= k) {\n        result.solutions.push({\n          copilots: [...currentScenario],\n          totalScore: currentScenario.reduce(\n            (score, next) => score + next.score,\n            0\n          )\n        });\n      }\n    } else {\n      const currentCopilot = context.copilots[currentCopilotIndex];\n      if (canUseCopilot(remainingBox, currentCopilot, options)) {\n        const newRemainingBox = boxWithoutAuroriansInCopilot(\n          remainingBox,\n          currentCopilot,\n          options\n        );\n        stack.push({\n          currentCopilotIndex: currentCopilotIndex + 1,\n          currentScenario: [...currentScenario, currentCopilot],\n          remainingBox: newRemainingBox,\n          count: count - 1\n        });\n      }\n      stack.push({\n        currentCopilotIndex: currentCopilotIndex + 1,\n        currentScenario,\n        remainingBox,\n        count\n      });\n    }\n  }\n  result.solutions.sort((a, b) => Number(b.totalScore - a.totalScore));\n  return result;\n}\n\n// src/index.ts\nself.addEventListener(\"message\", (event) => {\n  const { context, k, options } = event.data;\n  const result = calculateAllSolutions(context, k, options);\n  self.postMessage(result);\n});\n"],"names":["__defProp","Object","defineProperty","__getOwnPropSymbols","getOwnPropertySymbols","__hasOwnProp","prototype","hasOwnProperty","__propIsEnum","propertyIsEnumerable","__defNormalProp","obj","key","value","enumerable","configurable","writable","__spreadValues","a","b","prop","call","self","addEventListener","event","context","k","options","data","result","calculateAllSolutions","solutions","stack","currentCopilotIndex","currentScenario","remainingBox","availableBox","count","length","pop","copilots","push","totalScore","reduce","score","next","currentCopilot","canUseCopilot","myBox","copilot","_a","_b","disableAlternative","copilotsIgnore","Array","isArray","includes","copilot_id","aurorianRequirement","aurorian_requirements","remark","replace","type","any","aurorianInMyBox","aurorian_id","breakthrough","newRemainingBox","boxWithoutAuroriansInCopilot","disalbeAlternative","cloneMyBox","sort","Number","postMessage"],"mappings":"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"}
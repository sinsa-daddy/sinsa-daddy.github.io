/*! For license information please see 675.bd4b63dc.js.LICENSE.txt */
(globalThis.webpackChunk_sinsa_web=globalThis.webpackChunk_sinsa_web||[]).push([["675"],{439465:function(e,r,a){"use strict";e.exports=a.p+"static/image/3StarAsc2.5e960018.webp"},459670:function(e,r,a){"use strict";e.exports=a.p+"static/image/Asc3.40b5771f.webp"},119571:function(e,r,a){"use strict";e.exports={Asc:"Asc-_61174",asc:"Asc-_61174",Icon2of2:"Icon2of2-_1950c",icon2of2:"Icon2of2-_1950c",Icon3of3:"Icon3of3-_13b84",icon3of3:"Icon3of3-_13b84"}},522728:function(e,r,a){"use strict";e.exports={AdaptiveAurorianCard:"AdaptiveAurorianCard-d7ef3b",adaptiveAurorianCard:"AdaptiveAurorianCard-d7ef3b",BackgroundImage:"BackgroundImage-_43461",backgroundImage:"BackgroundImage-_43461",BreakThrough:"BreakThrough-bbea6b",breakThrough:"BreakThrough-bbea6b",Disabled:"Disabled-_21a59",disabled:"Disabled-_21a59",LargeSize:"LargeSize-_6952b",largeSize:"LargeSize-_6952b",MetaClass:"MetaClass-d72291",metaClass:"MetaClass-d72291",MetaContainer:"MetaContainer-a2721f",metaContainer:"MetaContainer-a2721f",MetaFirstAttribute:"MetaFirstAttribute-cfe989",metaFirstAttribute:"MetaFirstAttribute-cfe989",MetaSecondAttribute:"MetaSecondAttribute-_1cb80",metaSecondAttribute:"MetaSecondAttribute-_1cb80",MiniSize:"MiniSize-_8a459",miniSize:"MiniSize-_8a459",NameContainer:"NameContainer-ca1a21",nameContainer:"NameContainer-ca1a21",RemarkContainer:"RemarkContainer-e5526c",remarkContainer:"RemarkContainer-e5526c",ReplaceableTag:"ReplaceableTag-_725fb",replaceableTag:"ReplaceableTag-_725fb",num:"num-_7331a"}},899916:function(e,r,a){"use strict";e.exports={RelativeTimeText:"RelativeTimeText-ab3533",relativeTimeText:"RelativeTimeText-ab3533"}},794331:function(e,r,a){"use strict";e.exports={AuroriansTeam:"AuroriansTeam-_29905",auroriansTeam:"AuroriansTeam-_29905"}},145559:function(e,r,a){"use strict";e.exports={Author:"Author-_23945",author:"Author-_23945",Deleted:"Deleted-_6a789",deleted:"Deleted-_6a789",Header:"Header-dc09f4",header:"Header-dc09f4",Modal:"Modal-be0d96",modal:"Modal-be0d96",Score:"Score-cfe2ce",score:"Score-cfe2ce",TeamsContainer:"TeamsContainer-_0ac86",teamsContainer:"TeamsContainer-_0ac86",Title:"Title-_3704a",title:"Title-_3704a"}},321438:function(e,r,a){"use strict";a.r(r),a.d(r,{IconAsc:function(){return s}});var t=a("766791"),n=a("835079"),i=a("450348"),o=a.n(i),l=a("119571");let s=o().memo(e=>{let{rairty:r}=e;return(0,t.jsx)("div",{className:(0,n.default)(l.Asc,r>=4?l.Icon3of3:l.Icon2of2)})},(e,r)=>e.asc===r.asc&&e.rairty===r.rairty)},408748:function(e,r,a){"use strict";a.r(r),a.d(r,{AdaptiveAurorianCard:function(){return b}});var t=a("766791"),n=a("450348"),i=a.n(n),o=a("67348"),l=a("835079"),s=a("375748"),u=a("928958"),c=a("863266"),d=a("522728"),m=a("791520"),p=a("887921"),g=a("321438"),f=a("439538"),h=a("714874"),y=a("609386");let b=i().memo(e=>{let{aurorianId:r,breakthrough:a,remark:i,readOnly:b,mini:x,onReplace:A}=e,[{auroriansMap:j}]=(0,o.useModel)(f.AuroriansModel),k=(0,n.useMemo)(()=>j[r],[j,r]),{containerRef:v}=(0,m.useLazyImage)(k?.aurorian_id),_=(0,u.useBreakpoint)(),T=(0,n.useMemo)(()=>{let e=10;switch(_){case"xs":e=10;break;case"sm":e=12;break;default:e=13}return{components:{Rate:{starBg:"white",starSize:e}}}},[_]),C=(0,n.useMemo)(()=>[{label:`\u{6392}\u{9664}${k?.cn_name}`,key:p.AdaptiveAurorianCardMenuKey.IgnoreAurorian},"number"==typeof a?{label:`\u{4EC5}\u{6392}\u{9664}\u{6B64}\u{7A81}\u{7834}\u{6570}\u{7684}${k?.cn_name}`,key:p.AdaptiveAurorianCardMenuKey.IgnoreBreakthrough}:null].filter(e=>e),[k?.cn_name,a]),{triggerFormAction:I}=(0,h.useSolutionResultContext)();return(0,t.jsx)(s.Dropdown,{disabled:b,trigger:["click"],getPopupContainer:()=>document.body,menu:{items:C,onClick:e=>{let{key:r}=e;if(k?.aurorian_id)switch(r){case p.AdaptiveAurorianCardMenuKey.IgnoreBreakthrough:"number"==typeof a&&I({type:y.QueryFormAction.IgnoreAurorianBreakthroughOnly,aurorian:k,breakthrough:a});break;case p.AdaptiveAurorianCardMenuKey.IgnoreAurorian:I({type:y.QueryFormAction.IgnoreAurorian,aurorian:k});break;case p.AdaptiveAurorianCardMenuKey.ReplaceAurorian:A?.(k)}}},children:(0,t.jsxs)(c.m.div,{ref:v,className:(0,l.default)(d.AdaptiveAurorianCard,d.BackgroundImage,b&&d.Disabled,x?d.MiniSize:d.LargeSize),whileHover:b?void 0:{opacity:.6},whileTap:b?void 0:{opacity:.2},children:[k?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(s.Flex,{vertical:!0,className:d.NameContainer,children:[(0,t.jsx)("span",{children:k?.cn_name}),"number"==typeof a&&k?.rarity?(0,t.jsx)(s.ConfigProvider,{theme:T,children:(0,t.jsx)(s.Rate,{className:d.BreakThrough,disabled:!0,value:a,count:k.rarity})}):null]}),(0,t.jsxs)(s.Flex,{align:"center",className:d.MetaContainer,children:[(0,t.jsx)("img",{className:d.MetaClass,alt:k.profession,src:p.ClassURLMapper[k.profession]}),(0,t.jsxs)(s.Flex,{align:"center",vertical:x,children:[(0,t.jsx)("img",{className:d.MetaFirstAttribute,alt:k.primary_element,src:p.ElementURLMapper[k.primary_element]}),k.secondary_element?(0,t.jsx)("img",{className:d.MetaSecondAttribute,alt:k.secondary_element,src:p.ElementURLMapper[k.secondary_element]}):null]})]})]}):null,i?.replace?.type==="any"&&i?.replace?.any==="All"?(0,t.jsx)(s.Tag,{className:d.ReplaceableTag,color:"#dc5950",children:"\u53EF\u66FF"}):null,i?.replace?.type==="any"&&i?.replace?.any==="DPS"?(0,t.jsx)(s.Tag,{className:d.ReplaceableTag,color:"#dc5950",children:"\u53EF\u66FF\u8F93\u51FA"}):null,i?.replace?.type==="any"?null:k?.rarity&&i?.level?.asc===3&&"number"==typeof i?.level?.lv?(0,t.jsx)(s.Tag,{className:d.RemarkContainer,color:"rgba(0,0,0,0.4)",children:(0,t.jsxs)(s.Flex,{align:"center",gap:2,children:[(0,t.jsx)(g.IconAsc,{rairty:k.rarity,asc:3}),(0,t.jsx)("span",{className:d.num,children:i?.level?.lv})]})}):null]})})})},216746:function(e,r,a){"use strict";a.r(r),a.d(r,{RelativeTimeText:function(){return c}});var t=a("766791"),n=a("375748"),i=a("561904"),o=a.n(i),l=a("450348"),s=a.n(l),u=a("899916");let c=s().memo(e=>{let{time:r}=e;return(0,t.jsx)(n.Tooltip,{title:o()(r).format("YYYY-MM-DD HH:mm:ss"),children:(0,t.jsx)("span",{className:u.RelativeTimeText,children:o()(r).fromNow()})})},(e,r)=>e.time.valueOf()===r.time.valueOf())},947720:function(e,r,a){"use strict";a.r(r),a.d(r,{AdaptiveAuroriansTeam:function(){return l}});var t=a("766791"),n=a("375748"),i=a("794331"),o=a("408748");let l=e=>{let{aurorianRequirements:r,readOnly:a,onReplace:l}=e;return(0,t.jsx)(n.Flex,{className:i.AuroriansTeam,children:r.map(e=>{let{aurorian_id:r,breakthrough:n,remark:i}=e;return(0,t.jsx)(o.AdaptiveAurorianCard,{aurorianId:r,breakthrough:n,remark:i,readOnly:a,onReplace:l},r)})})}},554244:function(e,r,a){"use strict";a.r(r),a.d(r,{DiffModal:function(){return k}});var t=a("766791"),n=a("523038"),i=a("375748"),o=a("928958"),l=a("132802"),s=a.n(l),u=a("134640"),c=a("450348"),d=a("67348"),m=a("835079"),p=a("251346"),g=a("145559"),f=a("304937"),h=a("947720"),y=a("216746"),b=a("870233"),x=a("439538");function A(e){return e}function j(e){return e}let k=(0,n.create)(e=>{let{originCopilot:r,currentTerm:a,replaceAurorians:l}=e,A=(0,n.useModal)(),[{auroriansOptions:j,auroriansMap:k}]=(0,d.useModel)(x.AuroriansModel),[v]=o.ProForm.useForm(),_={copilotId:r.copilot_id,auroriansReplace:l.length?l.map(e=>({origin:e.aurorian_id,alter:void 0})):void 0},T=(0,c.useMemo)(()=>(0,b.trimTitle)(r.title),[r.title]);return(0,t.jsx)(i.Modal,{...(0,n.antdModalV5)(A),title:"\u66FF\u6362\u4F5C\u4E1A\u4E2D\u7684\u5149\u7075",width:"100%",onOk:()=>{v.submit()},onCancel:()=>{v.resetFields(),A.hide()},className:g.Modal,children:(0,t.jsx)(o.ProForm,{onFinish:async e=>{console.log("submit",e),A.hide()},form:v,initialValues:_,submitter:!1,layout:"horizontal",children:(0,t.jsxs)(i.Flex,{vertical:!0,gap:8,children:[(0,t.jsxs)("div",{className:g.PaddingContainer,children:[(0,t.jsx)("div",{className:g.Title,children:(0,t.jsxs)(i.Typography.Link,{href:`https://www.bilibili.com/video/${r.href}`,target:"_blank",title:r.title,ellipsis:!0,children:[a?.term_id&&r.term_id!==a.term_id?(0,t.jsx)(i.Tooltip,{title:`\u{590D}\u{523B} ${r.term_id} \u{671F}\u{8352}\u{5178}`,children:(0,t.jsx)(i.Tag,{color:"red",children:"\u590D\u523B"})}):null,T]})}),(0,t.jsxs)(i.Flex,{className:g.Header,wrap:"wrap",children:[(0,t.jsx)(o.ProFormDependency,{name:["diffScore"],children:e=>{let{diffScore:a}=e,n="number"==typeof a&&0!==a;return(0,t.jsxs)(i.Flex,{align:"center",gap:4,children:[(0,t.jsx)("span",{className:(0,m.default)(g.Score,n&&g.Deleted),children:s()(r.score).format("0,0")}),n?(0,t.jsx)("span",{className:(0,m.default)(g.Score),children:s()(r.score+(a??0)).format("0,0")}):null]})}}),(0,t.jsxs)(i.Flex,{className:g.Author,align:"center",gap:6,children:[(0,t.jsx)(i.Typography.Text,{strong:!0,children:r.author_name}),(0,t.jsx)(y.RelativeTimeText,{time:r.upload_time})]})]})]}),(0,t.jsx)("div",{className:g.TeamsContainer,children:(0,t.jsx)(h.AdaptiveAuroriansTeam,{aurorianRequirements:r.aurorian_requirements,readOnly:!0})}),(0,t.jsx)("div",{className:g.TeamsContainer,style:{marginBottom:".5rem"},children:(0,t.jsx)(o.ProFormDependency,{name:["auroriansReplace"],children:e=>{let{auroriansReplace:a}=e,n=p.CopilotDiffSchema.pick({auroriansReplace:!0}).safeParse({auroriansReplace:a});return n.success?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.Flex,{justify:"center",style:{marginBottom:".5rem"},children:(0,t.jsx)(u.ArrowDown,{})}),(0,t.jsx)(h.AdaptiveAuroriansTeam,{aurorianRequirements:(0,f.patchAurorianRequirements)(r.aurorian_requirements,n.data.auroriansReplace),readOnly:!0})]}):null}})}),(0,t.jsx)(o.ProFormList,{name:"auroriansReplace",copyIconProps:!1,deleteIconProps:!1,children:(e,a,n)=>{let{auroriansReplace:l}=v.getFieldsValue(),s=r.aurorian_requirements.filter(e=>!l?.find(r=>r.origin===e.aurorian_id)).map(e=>({label:k[e.aurorian_id].cn_name,value:e.aurorian_id}));return(0,t.jsxs)(i.Flex,{wrap:"wrap",align:"baseline",gap:4,children:[(0,t.jsxs)("div",{children:["#",a+1]}),(0,t.jsx)(o.ProFormSelect,{name:"origin",options:s,allowClear:!1,placeholder:"\u60F3\u8981\u66FF\u6362\u7684\u5149\u7075",rules:[{required:!0}]}),(0,t.jsx)(u.ArrowRight,{}),(0,t.jsx)(o.ProFormSelect,{name:["alter","aurorianId"],options:j,showSearch:!0,allowClear:!1,placeholder:"\u88AB\u66FF\u6362\u7684\u5149\u7075\uFF0C\u53EF\u62FC\u97F3\u641C\u7D22",fieldProps:{filterOption:x.filterAuroriansOption},rules:[{required:!0}]}),(0,t.jsx)(i.Tooltip,{title:"\u5220\u9664\u6B64\u66FF\u6362\u5149\u7075",children:(0,t.jsx)(i.Button,{style:{marginLeft:".3rem"},icon:(0,t.jsx)(u.Delete,{}),onClick:r=>{r.stopPropagation(),n.remove(e.name)}})},"delete"),(0,t.jsx)(o.ProFormDependency,{name:["alter","aurorianId"],children:e=>{if(e?.alter?.aurorianId){let r=k[e.alter.aurorianId];return(0,t.jsx)(o.ProFormRate,{label:`${r.cn_name}\u{7684}\u{5149}\u{7075}\u{7A81}\u{7834}`,name:["alter","breakthrough"],fieldProps:{count:r.rarity,allowHalf:!1},rules:[{required:!0}]})}return null}})]})}}),(0,t.jsxs)(i.Flex,{align:"baseline",gap:4,children:[(0,t.jsx)(o.ProFormDigit,{width:"xs",name:"diffScore",placeholder:"\u5206\u6570\u53D8\u5316",fieldProps:{precision:0},min:-r.score,max:5*r.score}),(0,t.jsxs)(i.Space.Compact,{children:[(0,t.jsx)(i.Button,{onClick:()=>{let{diffScore:e}=v.getFieldsValue();v.setFieldValue("diffScore",-Math.floor(.1*r.score)+(e??0))},children:"\u5206\u6570\u51CF\u5C11 10%"}),(0,t.jsx)(i.Button,{onClick:()=>{let{diffScore:e}=v.getFieldsValue();v.setFieldValue("diffScore",Math.floor(.1*r.score)+(e??0))},children:"\u589E\u52A0 10%"})]})]})]})})})})},791520:function(e,r,a){"use strict";a.r(r),a.d(r,{useLazyImage:function(){return i}});var t=a("450348");let n={bethel:{type:"awaken"},luke:{type:"awaken"},zarya:{type:"skin-1"},fleur:{type:"awaken"}};function i(e){let r=(0,t.useRef)(null);return(0,t.useEffect)(()=>{(async()=>{if(e&&r.current){let a=n[e],t=a?.type?`${e}-${a.type}`:e;r.current.style.backgroundImage=`url(/assets/images/avatars/${t}.webp)`}})()},[e]),{containerRef:r}}},870233:function(e,r,a){"use strict";function t(e){return e.replace("[\u767D\u591C\u6781\u5149]","").replace("\u3010\u767D\u591C\u6781\u5149\u3011","").replace("\u767D\u591C\u6781\u5149","").replace("\u8352\u5178","").replace("[hidden]","")}a.r(r),a.d(r,{trimTitle:function(){return t}})},28549:function(e,r,a){"use strict";a.r(r),a.d(r,{solutionAlgorithm:function(){return n}});class t{static getInstance(){return null===t.instance&&(t.instance=new t),t.instance}calculateAllSolutions(e,r,t){return new Promise((n,i)=>{let o=new Worker(new URL(a.p+a.u("651"),a.b));o.addEventListener("message",e=>{n(e.data),o.terminate()}),o.addEventListener("error",e=>{i(e),o.terminate()}),o.postMessage({context:e,k:r,options:t})})}constructor(){}}t.instance=null;let n=t.getInstance()},304937:function(e,r,a){"use strict";a.r(r),a.d(r,{patchAurorianRequirements:function(){return n}});var t=a("826424");function n(e,r){return r?(0,t.produce)(e,e=>{for(let a of r){let r=e.find(e=>e.aurorian_id===a.origin);r&&(r.aurorian_id=a.alter.aurorianId,r.breakthrough=a.alter.breakthrough,delete r.remark)}}):e}},718151:function(e,r,a){"use strict";function t(e){return e}a.r(r),a.d(r,{ensureQueryKey:function(){return t}})},714874:function(e,r,a){"use strict";a.r(r),a.d(r,{SolutionResultProvider:function(){return l},useSolutionResultContext:function(){return s}});var t=a("363733"),n=a("928958"),i=a("642862"),o=a("292812");let[l,s]=(0,t.default)(()=>{let{solutionResult:e,loadingSolutionResult:r,requestSolution:a}=(0,i.useRequestSolution)(),[t]=n.ProForm.useForm(),{triggerFormAction:l}=(0,o.useTriggerFormAction)(t);return{solutionResult:e,loadingSolutionResult:r,requestSolution:a,form:t,triggerFormAction:l}})},642862:function(e,r,a){"use strict";a.r(r),a.d(r,{useRequestSolution:function(){return s}});var t=a("260740"),n=a("67348"),i=a("734513"),o=a("439538"),l=a("28549");function s(){let[{WHOLE_BOX:e}]=(0,n.useModel)(o.AuroriansModel),{data:r,loading:a,runAsync:s}=(0,t.useRequest)(async(r,a)=>{let{exclude:t,k:n,disableAlternative:o,copilotsIgnore:s,enableExclude:u}=a,c=u&&Array.isArray(t)?(0,i.withoutExclude)(e,t):e,d=await l.solutionAlgorithm.calculateAllSolutions({copilots:r,availableBox:c},n,{disableAlternative:o,copilotsIgnore:s}),m=new WeakMap;for(let e=0;e<d.solutions.length;e++){let r=d.solutions[e];m.set(r,e)}return{allSolutions:d,rankSet:m}},{manual:!0});return{solutionResult:r,loadingSolutionResult:a,requestSolution:s}}},609386:function(e,r,a){"use strict";var t,n;a.r(r),a.d(r,{QueryFormAction:function(){return t}}),(n=t||(t={})).IgnoreAurorian="IgnoreAurorian",n.IgnoreAurorianBreakthroughOnly="IgnoreAurorianBreakthroughOnly",n.IgnoreCopilot="IgnoreCopilot",n.ReplaceAurorian="ReplaceAurorian"},292812:function(e,r,a){"use strict";a.r(r),a.d(r,{useTriggerFormAction:function(){return u}});var t=a("260740"),n=a("523038"),i=a("718151"),o=a("734513"),l=a("554244"),s=a("609386");function u(e){return{triggerFormAction:(0,t.useMemoizedFn)(async r=>{switch(r.type){case s.QueryFormAction.IgnoreCopilot:{let a=e.getFieldValue((0,i.ensureQueryKey)("copilotsIgnore")),t=Array.isArray(a)?[...a,r.copilot.copilot_id]:[r.copilot.copilot_id];e.setFieldValue((0,i.ensureQueryKey)("copilotsIgnore"),t);break}case s.QueryFormAction.IgnoreAurorian:case s.QueryFormAction.IgnoreAurorianBreakthroughOnly:{e.setFieldValue((0,i.ensureQueryKey)("enableExclude"),!0);let{exclude:a}=e.getFieldsValue(),t=a?.find(e=>e.aurorianId===r.aurorian.aurorian_id),n=Array.isArray(a)?Array.from(a):[];t&&(n=n.filter(e=>e.aurorianId!==t.aurorianId));let l=r.type===s.QueryFormAction.IgnoreAurorianBreakthroughOnly?[...n,{aurorianId:r.aurorian.aurorian_id,excludeBreakthroughOnly:!0,excludeBreakthrough:(0,o.getNormalizeBreakthroughByRarity)(r.breakthrough,r.aurorian.rarity)}]:[...n,{aurorianId:r.aurorian.aurorian_id}];e.setFieldValue((0,i.ensureQueryKey)("exclude"),l);break}case s.QueryFormAction.ReplaceAurorian:console.log("replace",r),(0,n.show)(l.DiffModal,{type:"create",currentTerm:r.currentTerm,originCopilot:r.copilot,replaceAurorians:[r.aurorian]}).catch(e=>console.log(e))}window.setTimeout(()=>e.submit())})}}},251346:function(e,r,a){"use strict";a.r(r),a.d(r,{CopilotDiffSchema:function(){return o}});var t=a("763615");let n=t.z.object({aurorianId:t.z.string(),excludeBreakthroughOnly:t.z.optional(t.z.boolean()),excludeBreakthrough:t.z.optional(t.z.number())}),i=t.z.object({origin:t.z.string(),alter:t.z.object({aurorianId:t.z.string(),breakthrough:t.z.number()})}),o=t.z.object({copilotId:t.z.string().describe("\u4F5C\u7528\u7684\u4F5C\u4E1AID"),diffScore:t.z.optional(t.z.number()).describe("\u5206\u6570\u5DEE\u503C"),auroriansReplace:t.z.optional(t.z.array(i))});t.z.object({k:t.z.number().min(1).max(4),disableAlternative:t.z.optional(t.z.boolean()),enableExclude:t.z.optional(t.z.boolean()),exclude:t.z.optional(t.z.array(n)),enableSaveLocalStorage:t.z.optional(t.z.boolean()),copilotsIgnore:t.z.optional(t.z.array(t.z.string())),copilotsDiff:t.z.optional(t.z.array(o))})},734513:function(e,r,a){"use strict";a.r(r),a.d(r,{getNormalizeBreakthroughByRarity:function(){return n},withoutExclude:function(){return i}});var t=a("826424");function n(e,r){switch(r){case 6:return[0,0,3,3,3,6].at(e-1);case 5:return[0,2,2,2,5].at(e-1);case 4:return[0,0,0,4].at(e-1);case 3:return[0,0,3].at(e-1);case 2:return[0,2].at(e-1);case 1:return[1].at(e-1);default:return 0}}function i(e,r){return r?(0,t.produce)(e,e=>{for(let{excludeBreakthroughOnly:a,excludeBreakthrough:t,aurorianId:n}of r)a?"number"==typeof t&&t>=1&&(e[n].breakthrough=Math.max(t-1,0)):delete e[n]}):e}}}]);